function iS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function sS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oS={exports:{}},jd={},aS={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zu=Symbol.for("react.element"),vN=Symbol.for("react.portal"),wN=Symbol.for("react.fragment"),EN=Symbol.for("react.strict_mode"),TN=Symbol.for("react.profiler"),SN=Symbol.for("react.provider"),RN=Symbol.for("react.context"),IN=Symbol.for("react.forward_ref"),CN=Symbol.for("react.suspense"),AN=Symbol.for("react.memo"),PN=Symbol.for("react.lazy"),s0=Symbol.iterator;function kN(t){return t===null||typeof t!="object"?null:(t=s0&&t[s0]||t["@@iterator"],typeof t=="function"?t:null)}var lS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uS=Object.assign,cS={};function Ga(t,e,n){this.props=t,this.context=e,this.refs=cS,this.updater=n||lS}Ga.prototype.isReactComponent={};Ga.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ga.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hS(){}hS.prototype=Ga.prototype;function Jg(t,e,n){this.props=t,this.context=e,this.refs=cS,this.updater=n||lS}var Zg=Jg.prototype=new hS;Zg.constructor=Jg;uS(Zg,Ga.prototype);Zg.isPureReactComponent=!0;var o0=Array.isArray,dS=Object.prototype.hasOwnProperty,e_={current:null},fS={key:!0,ref:!0,__self:!0,__source:!0};function pS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)dS.call(e,r)&&!fS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Zu,type:t,key:s,ref:o,props:i,_owner:e_.current}}function NN(t,e){return{$$typeof:Zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function t_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zu}function bN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var a0=/\/+/g;function op(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bN(""+t.key):e.toString(36)}function mh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zu:case vN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+op(o,0):r,o0(i)?(n="",t!=null&&(n=t.replace(a0,"$&/")+"/"),mh(i,e,n,"",function(c){return c})):i!=null&&(t_(i)&&(i=NN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(a0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",o0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+op(s,a);o+=mh(s,e,n,l,i)}else if(l=kN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+op(s,a++),o+=mh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function jc(t,e,n){if(t==null)return t;var r=[],i=0;return mh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ln={current:null},gh={transition:null},DN={ReactCurrentDispatcher:Ln,ReactCurrentBatchConfig:gh,ReactCurrentOwner:e_};function mS(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:jc,forEach:function(t,e,n){jc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jc(t,function(){e++}),e},toArray:function(t){return jc(t,function(e){return e})||[]},only:function(t){if(!t_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=Ga;Fe.Fragment=wN;Fe.Profiler=TN;Fe.PureComponent=Jg;Fe.StrictMode=EN;Fe.Suspense=CN;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DN;Fe.act=mS;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=e_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)dS.call(e,l)&&!fS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Zu,type:t.type,key:i,ref:s,props:r,_owner:o}};Fe.createContext=function(t){return t={$$typeof:RN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SN,_context:t},t.Consumer=t};Fe.createElement=pS;Fe.createFactory=function(t){var e=pS.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:IN,render:t}};Fe.isValidElement=t_;Fe.lazy=function(t){return{$$typeof:PN,_payload:{_status:-1,_result:t},_init:xN}};Fe.memo=function(t,e){return{$$typeof:AN,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=gh.transition;gh.transition={};try{t()}finally{gh.transition=e}};Fe.unstable_act=mS;Fe.useCallback=function(t,e){return Ln.current.useCallback(t,e)};Fe.useContext=function(t){return Ln.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return Ln.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return Ln.current.useEffect(t,e)};Fe.useId=function(){return Ln.current.useId()};Fe.useImperativeHandle=function(t,e,n){return Ln.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return Ln.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return Ln.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return Ln.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return Ln.current.useReducer(t,e,n)};Fe.useRef=function(t){return Ln.current.useRef(t)};Fe.useState=function(t){return Ln.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return Ln.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return Ln.current.useTransition()};Fe.version="18.3.1";aS.exports=Fe;var B=aS.exports;const ut=sS(B),LN=iS({__proto__:null,default:ut},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ON=B,MN=Symbol.for("react.element"),VN=Symbol.for("react.fragment"),FN=Object.prototype.hasOwnProperty,UN=ON.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jN={key:!0,ref:!0,__self:!0,__source:!0};function gS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)FN.call(e,r)&&!jN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:MN,type:t,key:s,ref:o,props:i,_owner:UN.current}}jd.Fragment=VN;jd.jsx=gS;jd.jsxs=gS;oS.exports=jd;var U=oS.exports,cm={},_S={exports:{}},ur={},yS={exports:{}},vS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,de){var Z=J.length;J.push(de);e:for(;0<Z;){var le=Z-1>>>1,O=J[le];if(0<i(O,de))J[le]=de,J[Z]=O,Z=le;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var de=J[0],Z=J.pop();if(Z!==de){J[0]=Z;e:for(var le=0,O=J.length,H=O>>>1;le<H;){var Q=2*(le+1)-1,ce=J[Q],ie=Q+1,Te=J[ie];if(0>i(ce,Z))ie<O&&0>i(Te,ce)?(J[le]=Te,J[ie]=Z,le=ie):(J[le]=ce,J[Q]=Z,le=Q);else if(ie<O&&0>i(Te,Z))J[le]=Te,J[ie]=Z,le=ie;else break e}}return de}function i(J,de){var Z=J.sortIndex-de.sortIndex;return Z!==0?Z:J.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,_=!1,y=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(J){for(var de=n(c);de!==null;){if(de.callback===null)r(c);else if(de.startTime<=J)r(c),de.sortIndex=de.expirationTime,e(l,de);else break;de=n(c)}}function M(J){if(S=!1,I(J),!y)if(n(l)!==null)y=!0,St(z);else{var de=n(c);de!==null&&Le(M,de.startTime-J)}}function z(J,de){y=!1,S&&(S=!1,R(v),v=-1),_=!0;var Z=p;try{for(I(de),d=n(l);d!==null&&(!(d.expirationTime>de)||J&&!P());){var le=d.callback;if(typeof le=="function"){d.callback=null,p=d.priorityLevel;var O=le(d.expirationTime<=de);de=t.unstable_now(),typeof O=="function"?d.callback=O:d===n(l)&&r(l),I(de)}else r(l);d=n(l)}if(d!==null)var H=!0;else{var Q=n(c);Q!==null&&Le(M,Q.startTime-de),H=!1}return H}finally{d=null,p=Z,_=!1}}var k=!1,T=null,v=-1,E=5,A=-1;function P(){return!(t.unstable_now()-A<E)}function D(){if(T!==null){var J=t.unstable_now();A=J;var de=!0;try{de=T(!0,J)}finally{de?C():(k=!1,T=null)}}else k=!1}var C;if(typeof g=="function")C=function(){g(D)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Nt=Ae.port2;Ae.port1.onmessage=D,C=function(){Nt.postMessage(null)}}else C=function(){b(D,0)};function St(J){T=J,k||(k=!0,C())}function Le(J,de){v=b(function(){J(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){y||_||(y=!0,St(z))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(J){switch(p){case 1:case 2:case 3:var de=3;break;default:de=p}var Z=p;p=de;try{return J()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,de){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Z=p;p=J;try{return de()}finally{p=Z}},t.unstable_scheduleCallback=function(J,de,Z){var le=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?le+Z:le):Z=le,J){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Z+O,J={id:h++,callback:de,priorityLevel:J,startTime:Z,expirationTime:O,sortIndex:-1},Z>le?(J.sortIndex=Z,e(c,J),n(l)===null&&J===n(c)&&(S?(R(v),v=-1):S=!0,Le(M,Z-le))):(J.sortIndex=O,e(l,J),y||_||(y=!0,St(z))),J},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(J){var de=p;return function(){var Z=p;p=de;try{return J.apply(this,arguments)}finally{p=Z}}}})(vS);yS.exports=vS;var $N=yS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BN=B,lr=$N;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wS=new Set,vu={};function Ro(t,e){Ra(t,e),Ra(t+"Capture",e)}function Ra(t,e){for(vu[t]=e,t=0;t<e.length;t++)wS.add(e[t])}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hm=Object.prototype.hasOwnProperty,zN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,l0={},u0={};function WN(t){return hm.call(u0,t)?!0:hm.call(l0,t)?!1:zN.test(t)?u0[t]=!0:(l0[t]=!0,!1)}function HN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qN(t,e,n,r){if(e===null||typeof e>"u"||HN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dn[t]=new On(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dn[e]=new On(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dn[t]=new On(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dn[t]=new On(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dn[t]=new On(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dn[t]=new On(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dn[t]=new On(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dn[t]=new On(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dn[t]=new On(t,5,!1,t.toLowerCase(),null,!1,!1)});var n_=/[\-:]([a-z])/g;function r_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(n_,r_);dn[e]=new On(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(n_,r_);dn[e]=new On(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(n_,r_);dn[e]=new On(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dn[t]=new On(t,1,!1,t.toLowerCase(),null,!1,!1)});dn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dn[t]=new On(t,1,!1,t.toLowerCase(),null,!0,!0)});function i_(t,e,n,r){var i=dn.hasOwnProperty(e)?dn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qN(e,n,i,r)&&(n=null),r||i===null?WN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xi=BN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$c=Symbol.for("react.element"),Yo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),s_=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),ES=Symbol.for("react.provider"),TS=Symbol.for("react.context"),o_=Symbol.for("react.forward_ref"),fm=Symbol.for("react.suspense"),pm=Symbol.for("react.suspense_list"),a_=Symbol.for("react.memo"),zi=Symbol.for("react.lazy"),SS=Symbol.for("react.offscreen"),c0=Symbol.iterator;function yl(t){return t===null||typeof t!="object"?null:(t=c0&&t[c0]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Object.assign,ap;function Ul(t){if(ap===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ap=e&&e[1]||""}return`
`+ap+t}var lp=!1;function up(t,e){if(!t||lp)return"";lp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ul(t):""}function KN(t){switch(t.tag){case 5:return Ul(t.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return t=up(t.type,!1),t;case 11:return t=up(t.type.render,!1),t;case 1:return t=up(t.type,!0),t;default:return""}}function mm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case Yo:return"Portal";case dm:return"Profiler";case s_:return"StrictMode";case fm:return"Suspense";case pm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case TS:return(t.displayName||"Context")+".Consumer";case ES:return(t._context.displayName||"Context")+".Provider";case o_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case a_:return e=t.displayName||null,e!==null?e:mm(t.type)||"Memo";case zi:e=t._payload,t=t._init;try{return mm(t(e))}catch{}}return null}function GN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mm(e);case 8:return e===s_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QN(t){var e=RS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bc(t){t._valueTracker||(t._valueTracker=QN(t))}function IS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=RS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gm(t,e){var n=e.checked;return kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function h0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CS(t,e){e=e.checked,e!=null&&i_(t,"checked",e,!1)}function _m(t,e){CS(t,e);var n=ps(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ym(t,e.type,n):e.hasOwnProperty("defaultValue")&&ym(t,e.type,ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function d0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ym(t,e,n){(e!=="number"||Vh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jl=Array.isArray;function ha(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ps(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function vm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function f0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(jl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ps(n)}}function AS(t,e){var n=ps(e.value),r=ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function p0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zc,kS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zc=zc||document.createElement("div"),zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YN=["Webkit","ms","Moz","O"];Object.keys(Yl).forEach(function(t){YN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yl[e]=Yl[t]})});function NS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yl.hasOwnProperty(t)&&Yl[t]?(""+e).trim():e+"px"}function bS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=NS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var XN=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Em(t,e){if(e){if(XN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Tm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sm=null;function l_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rm=null,da=null,fa=null;function m0(t){if(t=nc(t)){if(typeof Rm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Hd(e),Rm(t.stateNode,t.type,e))}}function xS(t){da?fa?fa.push(t):fa=[t]:da=t}function DS(){if(da){var t=da,e=fa;if(fa=da=null,m0(t),e)for(t=0;t<e.length;t++)m0(e[t])}}function LS(t,e){return t(e)}function OS(){}var cp=!1;function MS(t,e,n){if(cp)return t(e,n);cp=!0;try{return LS(t,e,n)}finally{cp=!1,(da!==null||fa!==null)&&(OS(),DS())}}function Eu(t,e){var n=t.stateNode;if(n===null)return null;var r=Hd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Im=!1;if(Ii)try{var vl={};Object.defineProperty(vl,"passive",{get:function(){Im=!0}}),window.addEventListener("test",vl,vl),window.removeEventListener("test",vl,vl)}catch{Im=!1}function JN(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Xl=!1,Fh=null,Uh=!1,Cm=null,ZN={onError:function(t){Xl=!0,Fh=t}};function eb(t,e,n,r,i,s,o,a,l){Xl=!1,Fh=null,JN.apply(ZN,arguments)}function tb(t,e,n,r,i,s,o,a,l){if(eb.apply(this,arguments),Xl){if(Xl){var c=Fh;Xl=!1,Fh=null}else throw Error(Y(198));Uh||(Uh=!0,Cm=c)}}function Io(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function g0(t){if(Io(t)!==t)throw Error(Y(188))}function nb(t){var e=t.alternate;if(!e){if(e=Io(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return g0(i),t;if(s===r)return g0(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function FS(t){return t=nb(t),t!==null?US(t):null}function US(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=US(t);if(e!==null)return e;t=t.sibling}return null}var jS=lr.unstable_scheduleCallback,_0=lr.unstable_cancelCallback,rb=lr.unstable_shouldYield,ib=lr.unstable_requestPaint,Ut=lr.unstable_now,sb=lr.unstable_getCurrentPriorityLevel,u_=lr.unstable_ImmediatePriority,$S=lr.unstable_UserBlockingPriority,jh=lr.unstable_NormalPriority,ob=lr.unstable_LowPriority,BS=lr.unstable_IdlePriority,$d=null,Yr=null;function ab(t){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot($d,t,void 0,(t.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:cb,lb=Math.log,ub=Math.LN2;function cb(t){return t>>>=0,t===0?32:31-(lb(t)/ub|0)|0}var Wc=64,Hc=4194304;function $l(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $h(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=$l(a):(s&=o,s!==0&&(r=$l(s)))}else o=n&~i,o!==0?r=$l(o):s!==0&&(r=$l(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Dr(e),i=1<<n,r|=t[n],e&=~i;return r}function hb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function db(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Dr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=hb(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Am(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zS(){var t=Wc;return Wc<<=1,!(Wc&4194240)&&(Wc=64),t}function hp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ec(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dr(e),t[e]=n}function fb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Dr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function c_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Dr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var nt=0;function WS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HS,h_,qS,KS,GS,Pm=!1,qc=[],ts=null,ns=null,rs=null,Tu=new Map,Su=new Map,qi=[],pb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function y0(t,e){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Tu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Su.delete(e.pointerId)}}function wl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=nc(e),e!==null&&h_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function mb(t,e,n,r,i){switch(e){case"focusin":return ts=wl(ts,t,e,n,r,i),!0;case"dragenter":return ns=wl(ns,t,e,n,r,i),!0;case"mouseover":return rs=wl(rs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Tu.set(s,wl(Tu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Su.set(s,wl(Su.get(s)||null,t,e,n,r,i)),!0}return!1}function QS(t){var e=Hs(t.target);if(e!==null){var n=Io(e);if(n!==null){if(e=n.tag,e===13){if(e=VS(n),e!==null){t.blockedOn=e,GS(t.priority,function(){qS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _h(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=km(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sm=r,n.target.dispatchEvent(r),Sm=null}else return e=nc(n),e!==null&&h_(e),t.blockedOn=n,!1;e.shift()}return!0}function v0(t,e,n){_h(t)&&n.delete(e)}function gb(){Pm=!1,ts!==null&&_h(ts)&&(ts=null),ns!==null&&_h(ns)&&(ns=null),rs!==null&&_h(rs)&&(rs=null),Tu.forEach(v0),Su.forEach(v0)}function El(t,e){t.blockedOn===e&&(t.blockedOn=null,Pm||(Pm=!0,lr.unstable_scheduleCallback(lr.unstable_NormalPriority,gb)))}function Ru(t){function e(i){return El(i,t)}if(0<qc.length){El(qc[0],t);for(var n=1;n<qc.length;n++){var r=qc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ts!==null&&El(ts,t),ns!==null&&El(ns,t),rs!==null&&El(rs,t),Tu.forEach(e),Su.forEach(e),n=0;n<qi.length;n++)r=qi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qi.length&&(n=qi[0],n.blockedOn===null);)QS(n),n.blockedOn===null&&qi.shift()}var pa=xi.ReactCurrentBatchConfig,Bh=!0;function _b(t,e,n,r){var i=nt,s=pa.transition;pa.transition=null;try{nt=1,d_(t,e,n,r)}finally{nt=i,pa.transition=s}}function yb(t,e,n,r){var i=nt,s=pa.transition;pa.transition=null;try{nt=4,d_(t,e,n,r)}finally{nt=i,pa.transition=s}}function d_(t,e,n,r){if(Bh){var i=km(t,e,n,r);if(i===null)Ep(t,e,r,zh,n),y0(t,r);else if(mb(i,t,e,n,r))r.stopPropagation();else if(y0(t,r),e&4&&-1<pb.indexOf(t)){for(;i!==null;){var s=nc(i);if(s!==null&&HS(s),s=km(t,e,n,r),s===null&&Ep(t,e,r,zh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ep(t,e,r,null,n)}}var zh=null;function km(t,e,n,r){if(zh=null,t=l_(r),t=Hs(t),t!==null)if(e=Io(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zh=t,null}function YS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sb()){case u_:return 1;case $S:return 4;case jh:case ob:return 16;case BS:return 536870912;default:return 16}default:return 16}}var Ji=null,f_=null,yh=null;function XS(){if(yh)return yh;var t,e=f_,n=e.length,r,i="value"in Ji?Ji.value:Ji.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return yh=i.slice(t,1<r?1-r:void 0)}function vh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Kc(){return!0}function w0(){return!1}function cr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Kc:w0,this.isPropagationStopped=w0,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kc)},persist:function(){},isPersistent:Kc}),e}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p_=cr(Qa),tc=kt({},Qa,{view:0,detail:0}),vb=cr(tc),dp,fp,Tl,Bd=kt({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tl&&(Tl&&t.type==="mousemove"?(dp=t.screenX-Tl.screenX,fp=t.screenY-Tl.screenY):fp=dp=0,Tl=t),dp)},movementY:function(t){return"movementY"in t?t.movementY:fp}}),E0=cr(Bd),wb=kt({},Bd,{dataTransfer:0}),Eb=cr(wb),Tb=kt({},tc,{relatedTarget:0}),pp=cr(Tb),Sb=kt({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),Rb=cr(Sb),Ib=kt({},Qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cb=cr(Ib),Ab=kt({},Qa,{data:0}),T0=cr(Ab),Pb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Nb[t])?!!e[t]:!1}function m_(){return bb}var xb=kt({},tc,{key:function(t){if(t.key){var e=Pb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m_,charCode:function(t){return t.type==="keypress"?vh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Db=cr(xb),Lb=kt({},Bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S0=cr(Lb),Ob=kt({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m_}),Mb=cr(Ob),Vb=kt({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fb=cr(Vb),Ub=kt({},Bd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jb=cr(Ub),$b=[9,13,27,32],g_=Ii&&"CompositionEvent"in window,Jl=null;Ii&&"documentMode"in document&&(Jl=document.documentMode);var Bb=Ii&&"TextEvent"in window&&!Jl,JS=Ii&&(!g_||Jl&&8<Jl&&11>=Jl),R0=" ",I0=!1;function ZS(t,e){switch(t){case"keyup":return $b.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jo=!1;function zb(t,e){switch(t){case"compositionend":return eR(e);case"keypress":return e.which!==32?null:(I0=!0,R0);case"textInput":return t=e.data,t===R0&&I0?null:t;default:return null}}function Wb(t,e){if(Jo)return t==="compositionend"||!g_&&ZS(t,e)?(t=XS(),yh=f_=Ji=null,Jo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JS&&e.locale!=="ko"?null:e.data;default:return null}}var Hb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Hb[t.type]:e==="textarea"}function tR(t,e,n,r){xS(r),e=Wh(e,"onChange"),0<e.length&&(n=new p_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zl=null,Iu=null;function qb(t){dR(t,0)}function zd(t){var e=ta(t);if(IS(e))return t}function Kb(t,e){if(t==="change")return e}var nR=!1;if(Ii){var mp;if(Ii){var gp="oninput"in document;if(!gp){var A0=document.createElement("div");A0.setAttribute("oninput","return;"),gp=typeof A0.oninput=="function"}mp=gp}else mp=!1;nR=mp&&(!document.documentMode||9<document.documentMode)}function P0(){Zl&&(Zl.detachEvent("onpropertychange",rR),Iu=Zl=null)}function rR(t){if(t.propertyName==="value"&&zd(Iu)){var e=[];tR(e,Iu,t,l_(t)),MS(qb,e)}}function Gb(t,e,n){t==="focusin"?(P0(),Zl=e,Iu=n,Zl.attachEvent("onpropertychange",rR)):t==="focusout"&&P0()}function Qb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zd(Iu)}function Yb(t,e){if(t==="click")return zd(e)}function Xb(t,e){if(t==="input"||t==="change")return zd(e)}function Jb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mr=typeof Object.is=="function"?Object.is:Jb;function Cu(t,e){if(Mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hm.call(e,i)||!Mr(t[i],e[i]))return!1}return!0}function k0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function N0(t,e){var n=k0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=k0(n)}}function iR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sR(){for(var t=window,e=Vh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vh(t.document)}return e}function __(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Zb(t){var e=sR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iR(n.ownerDocument.documentElement,n)){if(r!==null&&__(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=N0(n,s);var o=N0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ex=Ii&&"documentMode"in document&&11>=document.documentMode,Zo=null,Nm=null,eu=null,bm=!1;function b0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bm||Zo==null||Zo!==Vh(r)||(r=Zo,"selectionStart"in r&&__(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eu&&Cu(eu,r)||(eu=r,r=Wh(Nm,"onSelect"),0<r.length&&(e=new p_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zo)))}function Gc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ea={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},_p={},oR={};Ii&&(oR=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function Wd(t){if(_p[t])return _p[t];if(!ea[t])return t;var e=ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oR)return _p[t]=e[n];return t}var aR=Wd("animationend"),lR=Wd("animationiteration"),uR=Wd("animationstart"),cR=Wd("transitionend"),hR=new Map,x0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(t,e){hR.set(t,e),Ro(e,[t])}for(var yp=0;yp<x0.length;yp++){var vp=x0[yp],tx=vp.toLowerCase(),nx=vp[0].toUpperCase()+vp.slice(1);Es(tx,"on"+nx)}Es(aR,"onAnimationEnd");Es(lR,"onAnimationIteration");Es(uR,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(cR,"onTransitionEnd");Ra("onMouseEnter",["mouseout","mouseover"]);Ra("onMouseLeave",["mouseout","mouseover"]);Ra("onPointerEnter",["pointerout","pointerover"]);Ra("onPointerLeave",["pointerout","pointerover"]);Ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function D0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tb(r,e,void 0,t),t.currentTarget=null}function dR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;D0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;D0(i,a,c),s=l}}}if(Uh)throw t=Cm,Uh=!1,Cm=null,t}function ft(t,e){var n=e[Mm];n===void 0&&(n=e[Mm]=new Set);var r=t+"__bubble";n.has(r)||(fR(e,t,2,!1),n.add(r))}function wp(t,e,n){var r=0;e&&(r|=4),fR(n,t,r,e)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function Au(t){if(!t[Qc]){t[Qc]=!0,wS.forEach(function(n){n!=="selectionchange"&&(rx.has(n)||wp(n,!1,t),wp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qc]||(e[Qc]=!0,wp("selectionchange",!1,e))}}function fR(t,e,n,r){switch(YS(e)){case 1:var i=_b;break;case 4:i=yb;break;default:i=d_}n=i.bind(null,e,n,t),i=void 0,!Im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ep(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Hs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}MS(function(){var c=s,h=l_(n),d=[];e:{var p=hR.get(t);if(p!==void 0){var _=p_,y=t;switch(t){case"keypress":if(vh(n)===0)break e;case"keydown":case"keyup":_=Db;break;case"focusin":y="focus",_=pp;break;case"focusout":y="blur",_=pp;break;case"beforeblur":case"afterblur":_=pp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=E0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Eb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Mb;break;case aR:case lR:case uR:_=Rb;break;case cR:_=Fb;break;case"scroll":_=vb;break;case"wheel":_=jb;break;case"copy":case"cut":case"paste":_=Cb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=S0}var S=(e&4)!==0,b=!S&&t==="scroll",R=S?p!==null?p+"Capture":null:p;S=[];for(var g=c,I;g!==null;){I=g;var M=I.stateNode;if(I.tag===5&&M!==null&&(I=M,R!==null&&(M=Eu(g,R),M!=null&&S.push(Pu(g,M,I)))),b)break;g=g.return}0<S.length&&(p=new _(p,y,null,n,h),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==Sm&&(y=n.relatedTarget||n.fromElement)&&(Hs(y)||y[Ci]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(y=n.relatedTarget||n.toElement,_=c,y=y?Hs(y):null,y!==null&&(b=Io(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(_=null,y=c),_!==y)){if(S=E0,M="onMouseLeave",R="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(S=S0,M="onPointerLeave",R="onPointerEnter",g="pointer"),b=_==null?p:ta(_),I=y==null?p:ta(y),p=new S(M,g+"leave",_,n,h),p.target=b,p.relatedTarget=I,M=null,Hs(h)===c&&(S=new S(R,g+"enter",y,n,h),S.target=I,S.relatedTarget=b,M=S),b=M,_&&y)t:{for(S=_,R=y,g=0,I=S;I;I=zo(I))g++;for(I=0,M=R;M;M=zo(M))I++;for(;0<g-I;)S=zo(S),g--;for(;0<I-g;)R=zo(R),I--;for(;g--;){if(S===R||R!==null&&S===R.alternate)break t;S=zo(S),R=zo(R)}S=null}else S=null;_!==null&&L0(d,p,_,S,!1),y!==null&&b!==null&&L0(d,b,y,S,!0)}}e:{if(p=c?ta(c):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var z=Kb;else if(C0(p))if(nR)z=Xb;else{z=Qb;var k=Gb}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(z=Yb);if(z&&(z=z(t,c))){tR(d,z,n,h);break e}k&&k(t,p,c),t==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&ym(p,"number",p.value)}switch(k=c?ta(c):window,t){case"focusin":(C0(k)||k.contentEditable==="true")&&(Zo=k,Nm=c,eu=null);break;case"focusout":eu=Nm=Zo=null;break;case"mousedown":bm=!0;break;case"contextmenu":case"mouseup":case"dragend":bm=!1,b0(d,n,h);break;case"selectionchange":if(ex)break;case"keydown":case"keyup":b0(d,n,h)}var T;if(g_)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Jo?ZS(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(JS&&n.locale!=="ko"&&(Jo||v!=="onCompositionStart"?v==="onCompositionEnd"&&Jo&&(T=XS()):(Ji=h,f_="value"in Ji?Ji.value:Ji.textContent,Jo=!0)),k=Wh(c,v),0<k.length&&(v=new T0(v,t,null,n,h),d.push({event:v,listeners:k}),T?v.data=T:(T=eR(n),T!==null&&(v.data=T)))),(T=Bb?zb(t,n):Wb(t,n))&&(c=Wh(c,"onBeforeInput"),0<c.length&&(h=new T0("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=T))}dR(d,e)})}function Pu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Eu(t,n),s!=null&&r.unshift(Pu(t,s,i)),s=Eu(t,e),s!=null&&r.push(Pu(t,s,i))),t=t.return}return r}function zo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function L0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Eu(n,s),l!=null&&o.unshift(Pu(n,l,a))):i||(l=Eu(n,s),l!=null&&o.push(Pu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ix=/\r\n?/g,sx=/\u0000|\uFFFD/g;function O0(t){return(typeof t=="string"?t:""+t).replace(ix,`
`).replace(sx,"")}function Yc(t,e,n){if(e=O0(e),O0(t)!==e&&n)throw Error(Y(425))}function Hh(){}var xm=null,Dm=null;function Lm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Om=typeof setTimeout=="function"?setTimeout:void 0,ox=typeof clearTimeout=="function"?clearTimeout:void 0,M0=typeof Promise=="function"?Promise:void 0,ax=typeof queueMicrotask=="function"?queueMicrotask:typeof M0<"u"?function(t){return M0.resolve(null).then(t).catch(lx)}:Om;function lx(t){setTimeout(function(){throw t})}function Tp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ru(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ru(e)}function is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function V0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ya=Math.random().toString(36).slice(2),qr="__reactFiber$"+Ya,ku="__reactProps$"+Ya,Ci="__reactContainer$"+Ya,Mm="__reactEvents$"+Ya,ux="__reactListeners$"+Ya,cx="__reactHandles$"+Ya;function Hs(t){var e=t[qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ci]||n[qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=V0(t);t!==null;){if(n=t[qr])return n;t=V0(t)}return e}t=n,n=t.parentNode}return null}function nc(t){return t=t[qr]||t[Ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ta(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Hd(t){return t[ku]||null}var Vm=[],na=-1;function Ts(t){return{current:t}}function _t(t){0>na||(t.current=Vm[na],Vm[na]=null,na--)}function lt(t,e){na++,Vm[na]=t.current,t.current=e}var ms={},An=Ts(ms),zn=Ts(!1),no=ms;function Ia(t,e){var n=t.type.contextTypes;if(!n)return ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Wn(t){return t=t.childContextTypes,t!=null}function qh(){_t(zn),_t(An)}function F0(t,e,n){if(An.current!==ms)throw Error(Y(168));lt(An,e),lt(zn,n)}function pR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,GN(t)||"Unknown",i));return kt({},n,r)}function Kh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ms,no=An.current,lt(An,t),lt(zn,zn.current),!0}function U0(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=pR(t,e,no),r.__reactInternalMemoizedMergedChildContext=t,_t(zn),_t(An),lt(An,t)):_t(zn),lt(zn,n)}var pi=null,qd=!1,Sp=!1;function mR(t){pi===null?pi=[t]:pi.push(t)}function hx(t){qd=!0,mR(t)}function Ss(){if(!Sp&&pi!==null){Sp=!0;var t=0,e=nt;try{var n=pi;for(nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pi=null,qd=!1}catch(i){throw pi!==null&&(pi=pi.slice(t+1)),jS(u_,Ss),i}finally{nt=e,Sp=!1}}return null}var ra=[],ia=0,Gh=null,Qh=0,fr=[],pr=0,ro=null,mi=1,gi="";function Us(t,e){ra[ia++]=Qh,ra[ia++]=Gh,Gh=t,Qh=e}function gR(t,e,n){fr[pr++]=mi,fr[pr++]=gi,fr[pr++]=ro,ro=t;var r=mi;t=gi;var i=32-Dr(r)-1;r&=~(1<<i),n+=1;var s=32-Dr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,mi=1<<32-Dr(e)+i|n<<i|r,gi=s+t}else mi=1<<s|n<<i|r,gi=t}function y_(t){t.return!==null&&(Us(t,1),gR(t,1,0))}function v_(t){for(;t===Gh;)Gh=ra[--ia],ra[ia]=null,Qh=ra[--ia],ra[ia]=null;for(;t===ro;)ro=fr[--pr],fr[pr]=null,gi=fr[--pr],fr[pr]=null,mi=fr[--pr],fr[pr]=null}var sr=null,rr=null,Et=!1,Nr=null;function _R(t,e){var n=mr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function j0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sr=t,rr=is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sr=t,rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ro!==null?{id:mi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sr=t,rr=null,!0):!1;default:return!1}}function Fm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Um(t){if(Et){var e=rr;if(e){var n=e;if(!j0(t,e)){if(Fm(t))throw Error(Y(418));e=is(n.nextSibling);var r=sr;e&&j0(t,e)?_R(r,n):(t.flags=t.flags&-4097|2,Et=!1,sr=t)}}else{if(Fm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Et=!1,sr=t}}}function $0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sr=t}function Xc(t){if(t!==sr)return!1;if(!Et)return $0(t),Et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lm(t.type,t.memoizedProps)),e&&(e=rr)){if(Fm(t))throw yR(),Error(Y(418));for(;e;)_R(t,e),e=is(e.nextSibling)}if($0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rr=is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rr=null}}else rr=sr?is(t.stateNode.nextSibling):null;return!0}function yR(){for(var t=rr;t;)t=is(t.nextSibling)}function Ca(){rr=sr=null,Et=!1}function w_(t){Nr===null?Nr=[t]:Nr.push(t)}var dx=xi.ReactCurrentBatchConfig;function Sl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Jc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function B0(t){var e=t._init;return e(t._payload)}function vR(t){function e(R,g){if(t){var I=R.deletions;I===null?(R.deletions=[g],R.flags|=16):I.push(g)}}function n(R,g){if(!t)return null;for(;g!==null;)e(R,g),g=g.sibling;return null}function r(R,g){for(R=new Map;g!==null;)g.key!==null?R.set(g.key,g):R.set(g.index,g),g=g.sibling;return R}function i(R,g){return R=ls(R,g),R.index=0,R.sibling=null,R}function s(R,g,I){return R.index=I,t?(I=R.alternate,I!==null?(I=I.index,I<g?(R.flags|=2,g):I):(R.flags|=2,g)):(R.flags|=1048576,g)}function o(R){return t&&R.alternate===null&&(R.flags|=2),R}function a(R,g,I,M){return g===null||g.tag!==6?(g=Np(I,R.mode,M),g.return=R,g):(g=i(g,I),g.return=R,g)}function l(R,g,I,M){var z=I.type;return z===Xo?h(R,g,I.props.children,M,I.key):g!==null&&(g.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===zi&&B0(z)===g.type)?(M=i(g,I.props),M.ref=Sl(R,g,I),M.return=R,M):(M=Ch(I.type,I.key,I.props,null,R.mode,M),M.ref=Sl(R,g,I),M.return=R,M)}function c(R,g,I,M){return g===null||g.tag!==4||g.stateNode.containerInfo!==I.containerInfo||g.stateNode.implementation!==I.implementation?(g=bp(I,R.mode,M),g.return=R,g):(g=i(g,I.children||[]),g.return=R,g)}function h(R,g,I,M,z){return g===null||g.tag!==7?(g=eo(I,R.mode,M,z),g.return=R,g):(g=i(g,I),g.return=R,g)}function d(R,g,I){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Np(""+g,R.mode,I),g.return=R,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case $c:return I=Ch(g.type,g.key,g.props,null,R.mode,I),I.ref=Sl(R,null,g),I.return=R,I;case Yo:return g=bp(g,R.mode,I),g.return=R,g;case zi:var M=g._init;return d(R,M(g._payload),I)}if(jl(g)||yl(g))return g=eo(g,R.mode,I,null),g.return=R,g;Jc(R,g)}return null}function p(R,g,I,M){var z=g!==null?g.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return z!==null?null:a(R,g,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case $c:return I.key===z?l(R,g,I,M):null;case Yo:return I.key===z?c(R,g,I,M):null;case zi:return z=I._init,p(R,g,z(I._payload),M)}if(jl(I)||yl(I))return z!==null?null:h(R,g,I,M,null);Jc(R,I)}return null}function _(R,g,I,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return R=R.get(I)||null,a(g,R,""+M,z);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case $c:return R=R.get(M.key===null?I:M.key)||null,l(g,R,M,z);case Yo:return R=R.get(M.key===null?I:M.key)||null,c(g,R,M,z);case zi:var k=M._init;return _(R,g,I,k(M._payload),z)}if(jl(M)||yl(M))return R=R.get(I)||null,h(g,R,M,z,null);Jc(g,M)}return null}function y(R,g,I,M){for(var z=null,k=null,T=g,v=g=0,E=null;T!==null&&v<I.length;v++){T.index>v?(E=T,T=null):E=T.sibling;var A=p(R,T,I[v],M);if(A===null){T===null&&(T=E);break}t&&T&&A.alternate===null&&e(R,T),g=s(A,g,v),k===null?z=A:k.sibling=A,k=A,T=E}if(v===I.length)return n(R,T),Et&&Us(R,v),z;if(T===null){for(;v<I.length;v++)T=d(R,I[v],M),T!==null&&(g=s(T,g,v),k===null?z=T:k.sibling=T,k=T);return Et&&Us(R,v),z}for(T=r(R,T);v<I.length;v++)E=_(T,R,v,I[v],M),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?v:E.key),g=s(E,g,v),k===null?z=E:k.sibling=E,k=E);return t&&T.forEach(function(P){return e(R,P)}),Et&&Us(R,v),z}function S(R,g,I,M){var z=yl(I);if(typeof z!="function")throw Error(Y(150));if(I=z.call(I),I==null)throw Error(Y(151));for(var k=z=null,T=g,v=g=0,E=null,A=I.next();T!==null&&!A.done;v++,A=I.next()){T.index>v?(E=T,T=null):E=T.sibling;var P=p(R,T,A.value,M);if(P===null){T===null&&(T=E);break}t&&T&&P.alternate===null&&e(R,T),g=s(P,g,v),k===null?z=P:k.sibling=P,k=P,T=E}if(A.done)return n(R,T),Et&&Us(R,v),z;if(T===null){for(;!A.done;v++,A=I.next())A=d(R,A.value,M),A!==null&&(g=s(A,g,v),k===null?z=A:k.sibling=A,k=A);return Et&&Us(R,v),z}for(T=r(R,T);!A.done;v++,A=I.next())A=_(T,R,v,A.value,M),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?v:A.key),g=s(A,g,v),k===null?z=A:k.sibling=A,k=A);return t&&T.forEach(function(D){return e(R,D)}),Et&&Us(R,v),z}function b(R,g,I,M){if(typeof I=="object"&&I!==null&&I.type===Xo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case $c:e:{for(var z=I.key,k=g;k!==null;){if(k.key===z){if(z=I.type,z===Xo){if(k.tag===7){n(R,k.sibling),g=i(k,I.props.children),g.return=R,R=g;break e}}else if(k.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===zi&&B0(z)===k.type){n(R,k.sibling),g=i(k,I.props),g.ref=Sl(R,k,I),g.return=R,R=g;break e}n(R,k);break}else e(R,k);k=k.sibling}I.type===Xo?(g=eo(I.props.children,R.mode,M,I.key),g.return=R,R=g):(M=Ch(I.type,I.key,I.props,null,R.mode,M),M.ref=Sl(R,g,I),M.return=R,R=M)}return o(R);case Yo:e:{for(k=I.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===I.containerInfo&&g.stateNode.implementation===I.implementation){n(R,g.sibling),g=i(g,I.children||[]),g.return=R,R=g;break e}else{n(R,g);break}else e(R,g);g=g.sibling}g=bp(I,R.mode,M),g.return=R,R=g}return o(R);case zi:return k=I._init,b(R,g,k(I._payload),M)}if(jl(I))return y(R,g,I,M);if(yl(I))return S(R,g,I,M);Jc(R,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,g!==null&&g.tag===6?(n(R,g.sibling),g=i(g,I),g.return=R,R=g):(n(R,g),g=Np(I,R.mode,M),g.return=R,R=g),o(R)):n(R,g)}return b}var Aa=vR(!0),wR=vR(!1),Yh=Ts(null),Xh=null,sa=null,E_=null;function T_(){E_=sa=Xh=null}function S_(t){var e=Yh.current;_t(Yh),t._currentValue=e}function jm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ma(t,e){Xh=t,E_=sa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Un=!0),t.firstContext=null)}function vr(t){var e=t._currentValue;if(E_!==t)if(t={context:t,memoizedValue:e,next:null},sa===null){if(Xh===null)throw Error(Y(308));sa=t,Xh.dependencies={lanes:0,firstContext:t}}else sa=sa.next=t;return e}var qs=null;function R_(t){qs===null?qs=[t]:qs.push(t)}function ER(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,R_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ai(t,r)}function Ai(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wi=!1;function I_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ai(t,n)}return i=r.interleaved,i===null?(e.next=e,R_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ai(t,n)}function wh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,c_(t,n)}}function z0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jh(t,e,n,r){var i=t.updateQueue;Wi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,_=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,S=a;switch(p=e,_=n,S.tag){case 1:if(y=S.payload,typeof y=="function"){d=y.call(_,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,p=typeof y=="function"?y.call(_,d,p):y,p==null)break e;d=kt({},d,p);break e;case 2:Wi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else _={eventTime:_,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,l=d):h=h.next=_,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);so|=o,t.lanes=o,t.memoizedState=d}}function W0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var rc={},Xr=Ts(rc),Nu=Ts(rc),bu=Ts(rc);function Ks(t){if(t===rc)throw Error(Y(174));return t}function C_(t,e){switch(lt(bu,e),lt(Nu,t),lt(Xr,rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wm(e,t)}_t(Xr),lt(Xr,e)}function Pa(){_t(Xr),_t(Nu),_t(bu)}function SR(t){Ks(bu.current);var e=Ks(Xr.current),n=wm(e,t.type);e!==n&&(lt(Nu,t),lt(Xr,n))}function A_(t){Nu.current===t&&(_t(Xr),_t(Nu))}var At=Ts(0);function Zh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rp=[];function P_(){for(var t=0;t<Rp.length;t++)Rp[t]._workInProgressVersionPrimary=null;Rp.length=0}var Eh=xi.ReactCurrentDispatcher,Ip=xi.ReactCurrentBatchConfig,io=0,Pt=null,qt=null,Zt=null,ed=!1,tu=!1,xu=0,fx=0;function yn(){throw Error(Y(321))}function k_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mr(t[n],e[n]))return!1;return!0}function N_(t,e,n,r,i,s){if(io=s,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eh.current=t===null||t.memoizedState===null?_x:yx,t=n(r,i),tu){s=0;do{if(tu=!1,xu=0,25<=s)throw Error(Y(301));s+=1,Zt=qt=null,e.updateQueue=null,Eh.current=vx,t=n(r,i)}while(tu)}if(Eh.current=td,e=qt!==null&&qt.next!==null,io=0,Zt=qt=Pt=null,ed=!1,e)throw Error(Y(300));return t}function b_(){var t=xu!==0;return xu=0,t}function Hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Pt.memoizedState=Zt=t:Zt=Zt.next=t,Zt}function wr(){if(qt===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var e=Zt===null?Pt.memoizedState:Zt.next;if(e!==null)Zt=e,qt=t;else{if(t===null)throw Error(Y(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Zt===null?Pt.memoizedState=Zt=t:Zt=Zt.next=t}return Zt}function Du(t,e){return typeof e=="function"?e(t):e}function Cp(t){var e=wr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=qt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((io&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Pt.lanes|=h,so|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Mr(r,e.memoizedState)||(Un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Pt.lanes|=s,so|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ap(t){var e=wr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Mr(s,e.memoizedState)||(Un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function RR(){}function IR(t,e){var n=Pt,r=wr(),i=e(),s=!Mr(r.memoizedState,i);if(s&&(r.memoizedState=i,Un=!0),r=r.queue,x_(PR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Zt!==null&&Zt.memoizedState.tag&1){if(n.flags|=2048,Lu(9,AR.bind(null,n,r,i,e),void 0,null),nn===null)throw Error(Y(349));io&30||CR(n,e,i)}return i}function CR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AR(t,e,n,r){e.value=n,e.getSnapshot=r,kR(e)&&NR(t)}function PR(t,e,n){return n(function(){kR(e)&&NR(t)})}function kR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mr(t,n)}catch{return!0}}function NR(t){var e=Ai(t,1);e!==null&&Lr(e,t,1,-1)}function H0(t){var e=Hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Du,lastRenderedState:t},e.queue=t,t=t.dispatch=gx.bind(null,Pt,t),[e.memoizedState,t]}function Lu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bR(){return wr().memoizedState}function Th(t,e,n,r){var i=Hr();Pt.flags|=t,i.memoizedState=Lu(1|e,n,void 0,r===void 0?null:r)}function Kd(t,e,n,r){var i=wr();r=r===void 0?null:r;var s=void 0;if(qt!==null){var o=qt.memoizedState;if(s=o.destroy,r!==null&&k_(r,o.deps)){i.memoizedState=Lu(e,n,s,r);return}}Pt.flags|=t,i.memoizedState=Lu(1|e,n,s,r)}function q0(t,e){return Th(8390656,8,t,e)}function x_(t,e){return Kd(2048,8,t,e)}function xR(t,e){return Kd(4,2,t,e)}function DR(t,e){return Kd(4,4,t,e)}function LR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function OR(t,e,n){return n=n!=null?n.concat([t]):null,Kd(4,4,LR.bind(null,e,t),n)}function D_(){}function MR(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&k_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VR(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&k_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function FR(t,e,n){return io&21?(Mr(n,e)||(n=zS(),Pt.lanes|=n,so|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Un=!0),t.memoizedState=n)}function px(t,e){var n=nt;nt=n!==0&&4>n?n:4,t(!0);var r=Ip.transition;Ip.transition={};try{t(!1),e()}finally{nt=n,Ip.transition=r}}function UR(){return wr().memoizedState}function mx(t,e,n){var r=as(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jR(t))$R(e,n);else if(n=ER(t,e,n,r),n!==null){var i=Dn();Lr(n,t,r,i),BR(n,e,r)}}function gx(t,e,n){var r=as(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jR(t))$R(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Mr(a,o)){var l=e.interleaved;l===null?(i.next=i,R_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=ER(t,e,i,r),n!==null&&(i=Dn(),Lr(n,t,r,i),BR(n,e,r))}}function jR(t){var e=t.alternate;return t===Pt||e!==null&&e===Pt}function $R(t,e){tu=ed=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function BR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,c_(t,n)}}var td={readContext:vr,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},_x={readContext:vr,useCallback:function(t,e){return Hr().memoizedState=[t,e===void 0?null:e],t},useContext:vr,useEffect:q0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Th(4194308,4,LR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Th(4194308,4,t,e)},useInsertionEffect:function(t,e){return Th(4,2,t,e)},useMemo:function(t,e){var n=Hr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Hr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mx.bind(null,Pt,t),[r.memoizedState,t]},useRef:function(t){var e=Hr();return t={current:t},e.memoizedState=t},useState:H0,useDebugValue:D_,useDeferredValue:function(t){return Hr().memoizedState=t},useTransition:function(){var t=H0(!1),e=t[0];return t=px.bind(null,t[1]),Hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pt,i=Hr();if(Et){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),nn===null)throw Error(Y(349));io&30||CR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,q0(PR.bind(null,r,s,t),[t]),r.flags|=2048,Lu(9,AR.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Hr(),e=nn.identifierPrefix;if(Et){var n=gi,r=mi;n=(r&~(1<<32-Dr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yx={readContext:vr,useCallback:MR,useContext:vr,useEffect:x_,useImperativeHandle:OR,useInsertionEffect:xR,useLayoutEffect:DR,useMemo:VR,useReducer:Cp,useRef:bR,useState:function(){return Cp(Du)},useDebugValue:D_,useDeferredValue:function(t){var e=wr();return FR(e,qt.memoizedState,t)},useTransition:function(){var t=Cp(Du)[0],e=wr().memoizedState;return[t,e]},useMutableSource:RR,useSyncExternalStore:IR,useId:UR,unstable_isNewReconciler:!1},vx={readContext:vr,useCallback:MR,useContext:vr,useEffect:x_,useImperativeHandle:OR,useInsertionEffect:xR,useLayoutEffect:DR,useMemo:VR,useReducer:Ap,useRef:bR,useState:function(){return Ap(Du)},useDebugValue:D_,useDeferredValue:function(t){var e=wr();return qt===null?e.memoizedState=t:FR(e,qt.memoizedState,t)},useTransition:function(){var t=Ap(Du)[0],e=wr().memoizedState;return[t,e]},useMutableSource:RR,useSyncExternalStore:IR,useId:UR,unstable_isNewReconciler:!1};function Ar(t,e){if(t&&t.defaultProps){e=kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $m(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gd={isMounted:function(t){return(t=t._reactInternals)?Io(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dn(),i=as(t),s=Ei(r,i);s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(Lr(e,t,i,r),wh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dn(),i=as(t),s=Ei(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ss(t,s,i),e!==null&&(Lr(e,t,i,r),wh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dn(),r=as(t),i=Ei(n,r);i.tag=2,e!=null&&(i.callback=e),e=ss(t,i,r),e!==null&&(Lr(e,t,r,n),wh(e,t,r))}};function K0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Cu(n,r)||!Cu(i,s):!0}function zR(t,e,n){var r=!1,i=ms,s=e.contextType;return typeof s=="object"&&s!==null?s=vr(s):(i=Wn(e)?no:An.current,r=e.contextTypes,s=(r=r!=null)?Ia(t,i):ms),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function G0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gd.enqueueReplaceState(e,e.state,null)}function Bm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},I_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vr(s):(s=Wn(e)?no:An.current,i.context=Ia(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($m(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gd.enqueueReplaceState(i,i.state,null),Jh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ka(t,e){try{var n="",r=e;do n+=KN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Pp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wx=typeof WeakMap=="function"?WeakMap:Map;function WR(t,e,n){n=Ei(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rd||(rd=!0,Zm=r),zm(t,e)},n}function HR(t,e,n){n=Ei(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zm(t,e),typeof r!="function"&&(os===null?os=new Set([this]):os.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Q0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Lx.bind(null,t,e,n),e.then(t,t))}function Y0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function X0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ei(-1,1),e.tag=2,ss(n,e,1))),n.lanes|=1),t)}var Ex=xi.ReactCurrentOwner,Un=!1;function xn(t,e,n,r){e.child=t===null?wR(e,null,n,r):Aa(e,t.child,n,r)}function J0(t,e,n,r,i){n=n.render;var s=e.ref;return ma(e,i),r=N_(t,e,n,r,s,i),n=b_(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pi(t,e,i)):(Et&&n&&y_(e),e.flags|=1,xn(t,e,r,i),e.child)}function Z0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!$_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qR(t,e,s,r,i)):(t=Ch(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cu,n(o,r)&&t.ref===e.ref)return Pi(t,e,i)}return e.flags|=1,t=ls(s,r),t.ref=e.ref,t.return=e,e.child=t}function qR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Cu(s,r)&&t.ref===e.ref)if(Un=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Un=!0);else return e.lanes=t.lanes,Pi(t,e,i)}return Wm(t,e,n,r,i)}function KR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(aa,tr),tr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(aa,tr),tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,lt(aa,tr),tr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,lt(aa,tr),tr|=r;return xn(t,e,i,n),e.child}function GR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wm(t,e,n,r,i){var s=Wn(n)?no:An.current;return s=Ia(e,s),ma(e,i),n=N_(t,e,n,r,s,i),r=b_(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pi(t,e,i)):(Et&&r&&y_(e),e.flags|=1,xn(t,e,n,i),e.child)}function ew(t,e,n,r,i){if(Wn(n)){var s=!0;Kh(e)}else s=!1;if(ma(e,i),e.stateNode===null)Sh(t,e),zR(e,n,r),Bm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=vr(c):(c=Wn(n)?no:An.current,c=Ia(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&G0(e,o,r,c),Wi=!1;var p=e.memoizedState;o.state=p,Jh(e,r,o,i),l=e.memoizedState,a!==r||p!==l||zn.current||Wi?(typeof h=="function"&&($m(e,n,h,r),l=e.memoizedState),(a=Wi||K0(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,TR(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ar(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=vr(l):(l=Wn(n)?no:An.current,l=Ia(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&G0(e,o,r,l),Wi=!1,p=e.memoizedState,o.state=p,Jh(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||zn.current||Wi?(typeof _=="function"&&($m(e,n,_,r),y=e.memoizedState),(c=Wi||K0(e,n,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Hm(t,e,n,r,s,i)}function Hm(t,e,n,r,i,s){GR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&U0(e,n,!1),Pi(t,e,s);r=e.stateNode,Ex.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Aa(e,t.child,null,s),e.child=Aa(e,null,a,s)):xn(t,e,a,s),e.memoizedState=r.state,i&&U0(e,n,!0),e.child}function QR(t){var e=t.stateNode;e.pendingContext?F0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&F0(t,e.context,!1),C_(t,e.containerInfo)}function tw(t,e,n,r,i){return Ca(),w_(i),e.flags|=256,xn(t,e,n,r),e.child}var qm={dehydrated:null,treeContext:null,retryLane:0};function Km(t){return{baseLanes:t,cachePool:null,transitions:null}}function YR(t,e,n){var r=e.pendingProps,i=At.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),lt(At,i&1),t===null)return Um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Xd(o,r,0,null),t=eo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Km(n),e.memoizedState=qm,t):L_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Tx(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ls(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ls(a,s):(s=eo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Km(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=qm,r}return s=t.child,t=s.sibling,r=ls(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function L_(t,e){return e=Xd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zc(t,e,n,r){return r!==null&&w_(r),Aa(e,t.child,null,n),t=L_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Pp(Error(Y(422))),Zc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Xd({mode:"visible",children:r.children},i,0,null),s=eo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Aa(e,t.child,null,o),e.child.memoizedState=Km(o),e.memoizedState=qm,s);if(!(e.mode&1))return Zc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=Pp(s,r,void 0),Zc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Un||a){if(r=nn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ai(t,i),Lr(r,t,i,-1))}return j_(),r=Pp(Error(Y(421))),Zc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ox.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,rr=is(i.nextSibling),sr=e,Et=!0,Nr=null,t!==null&&(fr[pr++]=mi,fr[pr++]=gi,fr[pr++]=ro,mi=t.id,gi=t.overflow,ro=e),e=L_(e,r.children),e.flags|=4096,e)}function nw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jm(t.return,e,n)}function kp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function XR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xn(t,e,r.children,n),r=At.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nw(t,n,e);else if(t.tag===19)nw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lt(At,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Zh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),kp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Zh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}kp(e,!0,n,null,s);break;case"together":kp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),so|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=ls(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ls(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Sx(t,e,n){switch(e.tag){case 3:QR(e),Ca();break;case 5:SR(e);break;case 1:Wn(e.type)&&Kh(e);break;case 4:C_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;lt(Yh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lt(At,At.current&1),e.flags|=128,null):n&e.child.childLanes?YR(t,e,n):(lt(At,At.current&1),t=Pi(t,e,n),t!==null?t.sibling:null);lt(At,At.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(At,At.current),r)break;return null;case 22:case 23:return e.lanes=0,KR(t,e,n)}return Pi(t,e,n)}var JR,Gm,ZR,eI;JR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gm=function(){};ZR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ks(Xr.current);var s=null;switch(n){case"input":i=gm(t,i),r=gm(t,r),s=[];break;case"select":i=kt({},i,{value:void 0}),r=kt({},r,{value:void 0}),s=[];break;case"textarea":i=vm(t,i),r=vm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hh)}Em(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(vu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(vu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ft("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};eI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rl(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Rx(t,e,n){var r=e.pendingProps;switch(v_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return Wn(e.type)&&qh(),vn(e),null;case 3:return r=e.stateNode,Pa(),_t(zn),_t(An),P_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nr!==null&&(ng(Nr),Nr=null))),Gm(t,e),vn(e),null;case 5:A_(e);var i=Ks(bu.current);if(n=e.type,t!==null&&e.stateNode!=null)ZR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return vn(e),null}if(t=Ks(Xr.current),Xc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[qr]=e,r[ku]=s,t=(e.mode&1)!==0,n){case"dialog":ft("cancel",r),ft("close",r);break;case"iframe":case"object":case"embed":ft("load",r);break;case"video":case"audio":for(i=0;i<Bl.length;i++)ft(Bl[i],r);break;case"source":ft("error",r);break;case"img":case"image":case"link":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"input":h0(r,s),ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ft("invalid",r);break;case"textarea":f0(r,s),ft("invalid",r)}Em(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yc(r.textContent,a,t),i=["children",""+a]):vu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ft("scroll",r)}switch(n){case"input":Bc(r),d0(r,s,!0);break;case"textarea":Bc(r),p0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Hh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qr]=e,t[ku]=r,JR(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tm(n,r),n){case"dialog":ft("cancel",t),ft("close",t),i=r;break;case"iframe":case"object":case"embed":ft("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bl.length;i++)ft(Bl[i],t);i=r;break;case"source":ft("error",t),i=r;break;case"img":case"image":case"link":ft("error",t),ft("load",t),i=r;break;case"details":ft("toggle",t),i=r;break;case"input":h0(t,r),i=gm(t,r),ft("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=kt({},r,{value:void 0}),ft("invalid",t);break;case"textarea":f0(t,r),i=vm(t,r),ft("invalid",t);break;default:i=r}Em(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?bS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wu(t,l):typeof l=="number"&&wu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(vu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ft("scroll",t):l!=null&&i_(t,s,l,o))}switch(n){case"input":Bc(t),d0(t,r,!1);break;case"textarea":Bc(t),p0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ps(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ha(t,!!r.multiple,s,!1):r.defaultValue!=null&&ha(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Hh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(t&&e.stateNode!=null)eI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Ks(bu.current),Ks(Xr.current),Xc(e)){if(r=e.stateNode,n=e.memoizedProps,r[qr]=e,(s=r.nodeValue!==n)&&(t=sr,t!==null))switch(t.tag){case 3:Yc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qr]=e,e.stateNode=r}return vn(e),null;case 13:if(_t(At),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&rr!==null&&e.mode&1&&!(e.flags&128))yR(),Ca(),e.flags|=98560,s=!1;else if(s=Xc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[qr]=e}else Ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),s=!1}else Nr!==null&&(ng(Nr),Nr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||At.current&1?Gt===0&&(Gt=3):j_())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return Pa(),Gm(t,e),t===null&&Au(e.stateNode.containerInfo),vn(e),null;case 10:return S_(e.type._context),vn(e),null;case 17:return Wn(e.type)&&qh(),vn(e),null;case 19:if(_t(At),s=e.memoizedState,s===null)return vn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Rl(s,!1);else{if(Gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zh(t),o!==null){for(e.flags|=128,Rl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(At,At.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ut()>Na&&(e.flags|=128,r=!0,Rl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Zh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Et)return vn(e),null}else 2*Ut()-s.renderingStartTime>Na&&n!==1073741824&&(e.flags|=128,r=!0,Rl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ut(),e.sibling=null,n=At.current,lt(At,r?n&1|2:n&1),e):(vn(e),null);case 22:case 23:return U_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tr&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Ix(t,e){switch(v_(e),e.tag){case 1:return Wn(e.type)&&qh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pa(),_t(zn),_t(An),P_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return A_(e),null;case 13:if(_t(At),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _t(At),null;case 4:return Pa(),null;case 10:return S_(e.type._context),null;case 22:case 23:return U_(),null;case 24:return null;default:return null}}var eh=!1,Tn=!1,Cx=typeof WeakSet=="function"?WeakSet:Set,ae=null;function oa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Dt(t,e,r)}else n.current=null}function Qm(t,e,n){try{n()}catch(r){Dt(t,e,r)}}var rw=!1;function Ax(t,e){if(xm=Bh,t=sR(),__(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var _;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(_=d.firstChild)!==null;)p=d,d=_;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(_=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dm={focusedElem:t,selectionRange:n},Bh=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,b=y.memoizedState,R=e.stateNode,g=R.getSnapshotBeforeUpdate(e.elementType===e.type?S:Ar(e.type,S),b);R.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(M){Dt(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return y=rw,rw=!1,y}function nu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qm(e,n,s)}i=i.next}while(i!==r)}}function Qd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ym(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tI(t){var e=t.alternate;e!==null&&(t.alternate=null,tI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qr],delete e[ku],delete e[Mm],delete e[ux],delete e[cx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nI(t){return t.tag===5||t.tag===3||t.tag===4}function iw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hh));else if(r!==4&&(t=t.child,t!==null))for(Xm(t,e,n),t=t.sibling;t!==null;)Xm(t,e,n),t=t.sibling}function Jm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jm(t,e,n),t=t.sibling;t!==null;)Jm(t,e,n),t=t.sibling}var an=null,Pr=!1;function ji(t,e,n){for(n=n.child;n!==null;)rI(t,e,n),n=n.sibling}function rI(t,e,n){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount($d,n)}catch{}switch(n.tag){case 5:Tn||oa(n,e);case 6:var r=an,i=Pr;an=null,ji(t,e,n),an=r,Pr=i,an!==null&&(Pr?(t=an,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):an.removeChild(n.stateNode));break;case 18:an!==null&&(Pr?(t=an,n=n.stateNode,t.nodeType===8?Tp(t.parentNode,n):t.nodeType===1&&Tp(t,n),Ru(t)):Tp(an,n.stateNode));break;case 4:r=an,i=Pr,an=n.stateNode.containerInfo,Pr=!0,ji(t,e,n),an=r,Pr=i;break;case 0:case 11:case 14:case 15:if(!Tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Qm(n,e,o),i=i.next}while(i!==r)}ji(t,e,n);break;case 1:if(!Tn&&(oa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Dt(n,e,a)}ji(t,e,n);break;case 21:ji(t,e,n);break;case 22:n.mode&1?(Tn=(r=Tn)||n.memoizedState!==null,ji(t,e,n),Tn=r):ji(t,e,n);break;default:ji(t,e,n)}}function sw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Cx),e.forEach(function(r){var i=Mx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:an=a.stateNode,Pr=!1;break e;case 3:an=a.stateNode.containerInfo,Pr=!0;break e;case 4:an=a.stateNode.containerInfo,Pr=!0;break e}a=a.return}if(an===null)throw Error(Y(160));rI(s,o,i),an=null,Pr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Dt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iI(e,t),e=e.sibling}function iI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ir(e,t),Wr(t),r&4){try{nu(3,t,t.return),Qd(3,t)}catch(S){Dt(t,t.return,S)}try{nu(5,t,t.return)}catch(S){Dt(t,t.return,S)}}break;case 1:Ir(e,t),Wr(t),r&512&&n!==null&&oa(n,n.return);break;case 5:if(Ir(e,t),Wr(t),r&512&&n!==null&&oa(n,n.return),t.flags&32){var i=t.stateNode;try{wu(i,"")}catch(S){Dt(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&CS(i,s),Tm(a,o);var c=Tm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?bS(i,d):h==="dangerouslySetInnerHTML"?kS(i,d):h==="children"?wu(i,d):i_(i,h,d,c)}switch(a){case"input":_m(i,s);break;case"textarea":AS(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?ha(i,!!s.multiple,_,!1):p!==!!s.multiple&&(s.defaultValue!=null?ha(i,!!s.multiple,s.defaultValue,!0):ha(i,!!s.multiple,s.multiple?[]:"",!1))}i[ku]=s}catch(S){Dt(t,t.return,S)}}break;case 6:if(Ir(e,t),Wr(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){Dt(t,t.return,S)}}break;case 3:if(Ir(e,t),Wr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ru(e.containerInfo)}catch(S){Dt(t,t.return,S)}break;case 4:Ir(e,t),Wr(t);break;case 13:Ir(e,t),Wr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(V_=Ut())),r&4&&sw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tn=(c=Tn)||h,Ir(e,t),Tn=c):Ir(e,t),Wr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(d=ae=h;ae!==null;){switch(p=ae,_=p.child,p.tag){case 0:case 11:case 14:case 15:nu(4,p,p.return);break;case 1:oa(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(S){Dt(r,n,S)}}break;case 5:oa(p,p.return);break;case 22:if(p.memoizedState!==null){aw(d);continue}}_!==null?(_.return=p,ae=_):aw(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NS("display",o))}catch(S){Dt(t,t.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(S){Dt(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ir(e,t),Wr(t),r&4&&sw(t);break;case 21:break;default:Ir(e,t),Wr(t)}}function Wr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nI(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wu(i,""),r.flags&=-33);var s=iw(t);Jm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=iw(t);Xm(t,a,o);break;default:throw Error(Y(161))}}catch(l){Dt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Px(t,e,n){ae=t,sI(t)}function sI(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||eh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tn;a=eh;var c=Tn;if(eh=o,(Tn=l)&&!c)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?lw(i):l!==null?(l.return=o,ae=l):lw(i);for(;s!==null;)ae=s,sI(s),s=s.sibling;ae=i,eh=a,Tn=c}ow(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):ow(t)}}function ow(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tn||Qd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ar(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&W0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}W0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ru(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Tn||e.flags&512&&Ym(e)}catch(p){Dt(e,e.return,p)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function aw(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function lw(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qd(4,e)}catch(l){Dt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dt(e,i,l)}}var s=e.return;try{Ym(e)}catch(l){Dt(e,s,l)}break;case 5:var o=e.return;try{Ym(e)}catch(l){Dt(e,o,l)}}}catch(l){Dt(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var kx=Math.ceil,nd=xi.ReactCurrentDispatcher,O_=xi.ReactCurrentOwner,_r=xi.ReactCurrentBatchConfig,Ge=0,nn=null,zt=null,cn=0,tr=0,aa=Ts(0),Gt=0,Ou=null,so=0,Yd=0,M_=0,ru=null,Vn=null,V_=0,Na=1/0,fi=null,rd=!1,Zm=null,os=null,th=!1,Zi=null,id=0,iu=0,eg=null,Rh=-1,Ih=0;function Dn(){return Ge&6?Ut():Rh!==-1?Rh:Rh=Ut()}function as(t){return t.mode&1?Ge&2&&cn!==0?cn&-cn:dx.transition!==null?(Ih===0&&(Ih=zS()),Ih):(t=nt,t!==0||(t=window.event,t=t===void 0?16:YS(t.type)),t):1}function Lr(t,e,n,r){if(50<iu)throw iu=0,eg=null,Error(Y(185));ec(t,n,r),(!(Ge&2)||t!==nn)&&(t===nn&&(!(Ge&2)&&(Yd|=n),Gt===4&&Ki(t,cn)),Hn(t,r),n===1&&Ge===0&&!(e.mode&1)&&(Na=Ut()+500,qd&&Ss()))}function Hn(t,e){var n=t.callbackNode;db(t,e);var r=$h(t,t===nn?cn:0);if(r===0)n!==null&&_0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_0(n),e===1)t.tag===0?hx(uw.bind(null,t)):mR(uw.bind(null,t)),ax(function(){!(Ge&6)&&Ss()}),n=null;else{switch(WS(r)){case 1:n=u_;break;case 4:n=$S;break;case 16:n=jh;break;case 536870912:n=BS;break;default:n=jh}n=fI(n,oI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oI(t,e){if(Rh=-1,Ih=0,Ge&6)throw Error(Y(327));var n=t.callbackNode;if(ga()&&t.callbackNode!==n)return null;var r=$h(t,t===nn?cn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sd(t,r);else{e=r;var i=Ge;Ge|=2;var s=lI();(nn!==t||cn!==e)&&(fi=null,Na=Ut()+500,Zs(t,e));do try{xx();break}catch(a){aI(t,a)}while(!0);T_(),nd.current=s,Ge=i,zt!==null?e=0:(nn=null,cn=0,e=Gt)}if(e!==0){if(e===2&&(i=Am(t),i!==0&&(r=i,e=tg(t,i))),e===1)throw n=Ou,Zs(t,0),Ki(t,r),Hn(t,Ut()),n;if(e===6)Ki(t,r);else{if(i=t.current.alternate,!(r&30)&&!Nx(i)&&(e=sd(t,r),e===2&&(s=Am(t),s!==0&&(r=s,e=tg(t,s))),e===1))throw n=Ou,Zs(t,0),Ki(t,r),Hn(t,Ut()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:js(t,Vn,fi);break;case 3:if(Ki(t,r),(r&130023424)===r&&(e=V_+500-Ut(),10<e)){if($h(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Dn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Om(js.bind(null,t,Vn,fi),e);break}js(t,Vn,fi);break;case 4:if(Ki(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Dr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kx(r/1960))-r,10<r){t.timeoutHandle=Om(js.bind(null,t,Vn,fi),r);break}js(t,Vn,fi);break;case 5:js(t,Vn,fi);break;default:throw Error(Y(329))}}}return Hn(t,Ut()),t.callbackNode===n?oI.bind(null,t):null}function tg(t,e){var n=ru;return t.current.memoizedState.isDehydrated&&(Zs(t,e).flags|=256),t=sd(t,e),t!==2&&(e=Vn,Vn=n,e!==null&&ng(e)),t}function ng(t){Vn===null?Vn=t:Vn.push.apply(Vn,t)}function Nx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Mr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ki(t,e){for(e&=~M_,e&=~Yd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dr(e),r=1<<n;t[n]=-1,e&=~r}}function uw(t){if(Ge&6)throw Error(Y(327));ga();var e=$h(t,0);if(!(e&1))return Hn(t,Ut()),null;var n=sd(t,e);if(t.tag!==0&&n===2){var r=Am(t);r!==0&&(e=r,n=tg(t,r))}if(n===1)throw n=Ou,Zs(t,0),Ki(t,e),Hn(t,Ut()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,js(t,Vn,fi),Hn(t,Ut()),null}function F_(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(Na=Ut()+500,qd&&Ss())}}function oo(t){Zi!==null&&Zi.tag===0&&!(Ge&6)&&ga();var e=Ge;Ge|=1;var n=_r.transition,r=nt;try{if(_r.transition=null,nt=1,t)return t()}finally{nt=r,_r.transition=n,Ge=e,!(Ge&6)&&Ss()}}function U_(){tr=aa.current,_t(aa)}function Zs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ox(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(v_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qh();break;case 3:Pa(),_t(zn),_t(An),P_();break;case 5:A_(r);break;case 4:Pa();break;case 13:_t(At);break;case 19:_t(At);break;case 10:S_(r.type._context);break;case 22:case 23:U_()}n=n.return}if(nn=t,zt=t=ls(t.current,null),cn=tr=e,Gt=0,Ou=null,M_=Yd=so=0,Vn=ru=null,qs!==null){for(e=0;e<qs.length;e++)if(n=qs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}qs=null}return t}function aI(t,e){do{var n=zt;try{if(T_(),Eh.current=td,ed){for(var r=Pt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ed=!1}if(io=0,Zt=qt=Pt=null,tu=!1,xu=0,O_.current=null,n===null||n.return===null){Gt=1,Ou=e,zt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=cn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Y0(o);if(_!==null){_.flags&=-257,X0(_,o,a,s,e),_.mode&1&&Q0(s,c,e),e=_,l=c;var y=e.updateQueue;if(y===null){var S=new Set;S.add(l),e.updateQueue=S}else y.add(l);break e}else{if(!(e&1)){Q0(s,c,e),j_();break e}l=Error(Y(426))}}else if(Et&&a.mode&1){var b=Y0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),X0(b,o,a,s,e),w_(ka(l,a));break e}}s=l=ka(l,a),Gt!==4&&(Gt=2),ru===null?ru=[s]:ru.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var R=WR(s,l,e);z0(s,R);break e;case 1:a=l;var g=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(os===null||!os.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=HR(s,a,e);z0(s,M);break e}}s=s.return}while(s!==null)}cI(n)}catch(z){e=z,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function lI(){var t=nd.current;return nd.current=td,t===null?td:t}function j_(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),nn===null||!(so&268435455)&&!(Yd&268435455)||Ki(nn,cn)}function sd(t,e){var n=Ge;Ge|=2;var r=lI();(nn!==t||cn!==e)&&(fi=null,Zs(t,e));do try{bx();break}catch(i){aI(t,i)}while(!0);if(T_(),Ge=n,nd.current=r,zt!==null)throw Error(Y(261));return nn=null,cn=0,Gt}function bx(){for(;zt!==null;)uI(zt)}function xx(){for(;zt!==null&&!rb();)uI(zt)}function uI(t){var e=dI(t.alternate,t,tr);t.memoizedProps=t.pendingProps,e===null?cI(t):zt=e,O_.current=null}function cI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ix(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Gt=6,zt=null;return}}else if(n=Rx(n,e,tr),n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Gt===0&&(Gt=5)}function js(t,e,n){var r=nt,i=_r.transition;try{_r.transition=null,nt=1,Dx(t,e,n,r)}finally{_r.transition=i,nt=r}return null}function Dx(t,e,n,r){do ga();while(Zi!==null);if(Ge&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(fb(t,s),t===nn&&(zt=nn=null,cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||th||(th=!0,fI(jh,function(){return ga(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_r.transition,_r.transition=null;var o=nt;nt=1;var a=Ge;Ge|=4,O_.current=null,Ax(t,n),iI(n,t),Zb(Dm),Bh=!!xm,Dm=xm=null,t.current=n,Px(n),ib(),Ge=a,nt=o,_r.transition=s}else t.current=n;if(th&&(th=!1,Zi=t,id=i),s=t.pendingLanes,s===0&&(os=null),ab(n.stateNode),Hn(t,Ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(rd)throw rd=!1,t=Zm,Zm=null,t;return id&1&&t.tag!==0&&ga(),s=t.pendingLanes,s&1?t===eg?iu++:(iu=0,eg=t):iu=0,Ss(),null}function ga(){if(Zi!==null){var t=WS(id),e=_r.transition,n=nt;try{if(_r.transition=null,nt=16>t?16:t,Zi===null)var r=!1;else{if(t=Zi,Zi=null,id=0,Ge&6)throw Error(Y(331));var i=Ge;for(Ge|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ae=c;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:nu(8,h,s)}var d=h.child;if(d!==null)d.return=h,ae=d;else for(;ae!==null;){h=ae;var p=h.sibling,_=h.return;if(tI(h),h===c){ae=null;break}if(p!==null){p.return=_,ae=p;break}ae=_}}}var y=s.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var b=S.sibling;S.sibling=null,S=b}while(S!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nu(9,s,s.return)}var R=s.sibling;if(R!==null){R.return=s.return,ae=R;break e}ae=s.return}}var g=t.current;for(ae=g;ae!==null;){o=ae;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ae=I;else e:for(o=g;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qd(9,a)}}catch(z){Dt(a,a.return,z)}if(a===o){ae=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,ae=M;break e}ae=a.return}}if(Ge=i,Ss(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot($d,t)}catch{}r=!0}return r}finally{nt=n,_r.transition=e}}return!1}function cw(t,e,n){e=ka(n,e),e=WR(t,e,1),t=ss(t,e,1),e=Dn(),t!==null&&(ec(t,1,e),Hn(t,e))}function Dt(t,e,n){if(t.tag===3)cw(t,t,n);else for(;e!==null;){if(e.tag===3){cw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))){t=ka(n,t),t=HR(e,t,1),e=ss(e,t,1),t=Dn(),e!==null&&(ec(e,1,t),Hn(e,t));break}}e=e.return}}function Lx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dn(),t.pingedLanes|=t.suspendedLanes&n,nn===t&&(cn&n)===n&&(Gt===4||Gt===3&&(cn&130023424)===cn&&500>Ut()-V_?Zs(t,0):M_|=n),Hn(t,e)}function hI(t,e){e===0&&(t.mode&1?(e=Hc,Hc<<=1,!(Hc&130023424)&&(Hc=4194304)):e=1);var n=Dn();t=Ai(t,e),t!==null&&(ec(t,e,n),Hn(t,n))}function Ox(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hI(t,n)}function Mx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),hI(t,n)}var dI;dI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zn.current)Un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Un=!1,Sx(t,e,n);Un=!!(t.flags&131072)}else Un=!1,Et&&e.flags&1048576&&gR(e,Qh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sh(t,e),t=e.pendingProps;var i=Ia(e,An.current);ma(e,n),i=N_(null,e,r,t,i,n);var s=b_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wn(r)?(s=!0,Kh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,I_(e),i.updater=Gd,e.stateNode=i,i._reactInternals=e,Bm(e,r,t,n),e=Hm(null,e,r,!0,s,n)):(e.tag=0,Et&&s&&y_(e),xn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Fx(r),t=Ar(r,t),i){case 0:e=Wm(null,e,r,t,n);break e;case 1:e=ew(null,e,r,t,n);break e;case 11:e=J0(null,e,r,t,n);break e;case 14:e=Z0(null,e,r,Ar(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),Wm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),ew(t,e,r,i,n);case 3:e:{if(QR(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,TR(t,e),Jh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ka(Error(Y(423)),e),e=tw(t,e,r,n,i);break e}else if(r!==i){i=ka(Error(Y(424)),e),e=tw(t,e,r,n,i);break e}else for(rr=is(e.stateNode.containerInfo.firstChild),sr=e,Et=!0,Nr=null,n=wR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ca(),r===i){e=Pi(t,e,n);break e}xn(t,e,r,n)}e=e.child}return e;case 5:return SR(e),t===null&&Um(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Lm(r,i)?o=null:s!==null&&Lm(r,s)&&(e.flags|=32),GR(t,e),xn(t,e,o,n),e.child;case 6:return t===null&&Um(e),null;case 13:return YR(t,e,n);case 4:return C_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Aa(e,null,r,n):xn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),J0(t,e,r,i,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,lt(Yh,r._currentValue),r._currentValue=o,s!==null)if(Mr(s.value,o)){if(s.children===i.children&&!zn.current){e=Pi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ei(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ma(e,n),i=vr(i),r=r(i),e.flags|=1,xn(t,e,r,n),e.child;case 14:return r=e.type,i=Ar(r,e.pendingProps),i=Ar(r.type,i),Z0(t,e,r,i,n);case 15:return qR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),Sh(t,e),e.tag=1,Wn(r)?(t=!0,Kh(e)):t=!1,ma(e,n),zR(e,r,i),Bm(e,r,i,n),Hm(null,e,r,!0,t,n);case 19:return XR(t,e,n);case 22:return KR(t,e,n)}throw Error(Y(156,e.tag))};function fI(t,e){return jS(t,e)}function Vx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,e,n,r){return new Vx(t,e,n,r)}function $_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fx(t){if(typeof t=="function")return $_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===o_)return 11;if(t===a_)return 14}return 2}function ls(t,e){var n=t.alternate;return n===null?(n=mr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ch(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")$_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xo:return eo(n.children,i,s,e);case s_:o=8,i|=8;break;case dm:return t=mr(12,n,e,i|2),t.elementType=dm,t.lanes=s,t;case fm:return t=mr(13,n,e,i),t.elementType=fm,t.lanes=s,t;case pm:return t=mr(19,n,e,i),t.elementType=pm,t.lanes=s,t;case SS:return Xd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ES:o=10;break e;case TS:o=9;break e;case o_:o=11;break e;case a_:o=14;break e;case zi:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=mr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function eo(t,e,n,r){return t=mr(7,t,r,e),t.lanes=n,t}function Xd(t,e,n,r){return t=mr(22,t,r,e),t.elementType=SS,t.lanes=n,t.stateNode={isHidden:!1},t}function Np(t,e,n){return t=mr(6,t,null,e),t.lanes=n,t}function bp(t,e,n){return e=mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ux(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hp(0),this.expirationTimes=hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function B_(t,e,n,r,i,s,o,a,l){return t=new Ux(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},I_(s),t}function jx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pI(t){if(!t)return ms;t=t._reactInternals;e:{if(Io(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Wn(n))return pR(t,n,e)}return e}function mI(t,e,n,r,i,s,o,a,l){return t=B_(n,r,!0,t,i,s,o,a,l),t.context=pI(null),n=t.current,r=Dn(),i=as(n),s=Ei(r,i),s.callback=e??null,ss(n,s,i),t.current.lanes=i,ec(t,i,r),Hn(t,r),t}function Jd(t,e,n,r){var i=e.current,s=Dn(),o=as(i);return n=pI(n),e.context===null?e.context=n:e.pendingContext=n,e=Ei(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ss(i,e,o),t!==null&&(Lr(t,i,o,s),wh(t,i,o)),o}function od(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function z_(t,e){hw(t,e),(t=t.alternate)&&hw(t,e)}function $x(){return null}var gI=typeof reportError=="function"?reportError:function(t){console.error(t)};function W_(t){this._internalRoot=t}Zd.prototype.render=W_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Jd(t,e,null,null)};Zd.prototype.unmount=W_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oo(function(){Jd(null,t,null,null)}),e[Ci]=null}};function Zd(t){this._internalRoot=t}Zd.prototype.unstable_scheduleHydration=function(t){if(t){var e=KS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qi.length&&e!==0&&e<qi[n].priority;n++);qi.splice(n,0,t),n===0&&QS(t)}};function H_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ef(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dw(){}function Bx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=od(o);s.call(c)}}var o=mI(e,r,t,0,null,!1,!1,"",dw);return t._reactRootContainer=o,t[Ci]=o.current,Au(t.nodeType===8?t.parentNode:t),oo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=od(l);a.call(c)}}var l=B_(t,0,!1,null,null,!1,!1,"",dw);return t._reactRootContainer=l,t[Ci]=l.current,Au(t.nodeType===8?t.parentNode:t),oo(function(){Jd(e,l,n,r)}),l}function tf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=od(o);a.call(l)}}Jd(e,o,t,i)}else o=Bx(n,e,t,i,r);return od(o)}HS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$l(e.pendingLanes);n!==0&&(c_(e,n|1),Hn(e,Ut()),!(Ge&6)&&(Na=Ut()+500,Ss()))}break;case 13:oo(function(){var r=Ai(t,1);if(r!==null){var i=Dn();Lr(r,t,1,i)}}),z_(t,1)}};h_=function(t){if(t.tag===13){var e=Ai(t,134217728);if(e!==null){var n=Dn();Lr(e,t,134217728,n)}z_(t,134217728)}};qS=function(t){if(t.tag===13){var e=as(t),n=Ai(t,e);if(n!==null){var r=Dn();Lr(n,t,e,r)}z_(t,e)}};KS=function(){return nt};GS=function(t,e){var n=nt;try{return nt=t,e()}finally{nt=n}};Rm=function(t,e,n){switch(e){case"input":if(_m(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hd(r);if(!i)throw Error(Y(90));IS(r),_m(r,i)}}}break;case"textarea":AS(t,n);break;case"select":e=n.value,e!=null&&ha(t,!!n.multiple,e,!1)}};LS=F_;OS=oo;var zx={usingClientEntryPoint:!1,Events:[nc,ta,Hd,xS,DS,F_]},Il={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wx={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FS(t),t===null?null:t.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||$x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{$d=nh.inject(Wx),Yr=nh}catch{}}ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zx;ur.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H_(e))throw Error(Y(200));return jx(t,e,null,n)};ur.createRoot=function(t,e){if(!H_(t))throw Error(Y(299));var n=!1,r="",i=gI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=B_(t,1,!1,null,null,n,!1,r,i),t[Ci]=e.current,Au(t.nodeType===8?t.parentNode:t),new W_(e)};ur.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=FS(e),t=t===null?null:t.stateNode,t};ur.flushSync=function(t){return oo(t)};ur.hydrate=function(t,e,n){if(!ef(e))throw Error(Y(200));return tf(null,t,e,!0,n)};ur.hydrateRoot=function(t,e,n){if(!H_(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=gI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mI(e,null,t,1,n??null,i,!1,s,o),t[Ci]=e.current,Au(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zd(e)};ur.render=function(t,e,n){if(!ef(e))throw Error(Y(200));return tf(null,t,e,!1,n)};ur.unmountComponentAtNode=function(t){if(!ef(t))throw Error(Y(40));return t._reactRootContainer?(oo(function(){tf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ci]=null})}),!0):!1};ur.unstable_batchedUpdates=F_;ur.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ef(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return tf(t,e,n,!1,r)};ur.version="18.3.1-next-f1338f8080-20240426";function _I(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_I)}catch(t){console.error(t)}}_I(),_S.exports=ur;var q_=_S.exports;const yI=sS(q_),Hx=iS({__proto__:null,default:yI},[q_]);var fw=q_;cm.createRoot=fw.createRoot,cm.hydrateRoot=fw.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ct(){return Ct=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ct.apply(this,arguments)}var $t;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($t||($t={}));const pw="popstate";function qx(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Mu("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ao(i)}return Gx(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ba(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kx(){return Math.random().toString(36).substr(2,8)}function mw(t,e){return{usr:t.state,key:t.key,idx:e}}function Mu(t,e,n,r){return n===void 0&&(n=null),Ct({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Rs(e):e,{state:n,key:e&&e.key||r||Kx()})}function ao(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Rs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Gx(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=$t.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ct({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=$t.Pop;let b=h(),R=b==null?null:b-c;c=b,l&&l({action:a,location:S.location,delta:R})}function p(b,R){a=$t.Push;let g=Mu(S.location,b,R);c=h()+1;let I=mw(g,c),M=S.createHref(g);try{o.pushState(I,"",M)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(M)}s&&l&&l({action:a,location:S.location,delta:1})}function _(b,R){a=$t.Replace;let g=Mu(S.location,b,R);c=h();let I=mw(g,c),M=S.createHref(g);o.replaceState(I,"",M),s&&l&&l({action:a,location:S.location,delta:0})}function y(b){let R=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof b=="string"?b:ao(b);return g=g.replace(/ $/,"%20"),Me(R,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,R)}let S={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(pw,d),l=b,()=>{i.removeEventListener(pw,d),l=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let R=y(b);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:p,replace:_,go(b){return o.go(b)}};return S}var at;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(at||(at={}));const Qx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Yx(t){return t.index===!0}function Vu(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(Me(i.index!==!0||!i.children,"Cannot specify children on an index route"),Me(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Yx(i)){let l=Ct({},i,e(i),{id:a});return r[a]=l,l}else{let l=Ct({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Vu(i.children,e,o,r)),l}})}function zs(t,e,n){return n===void 0&&(n="/"),Ah(t,e,n,!1)}function Ah(t,e,n,r){let i=typeof e=="string"?Rs(e):e,s=Xa(i.pathname||"/",n);if(s==null)return null;let o=vI(t);Jx(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=uD(s);a=aD(o[l],c,r)}return a}function Xx(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function vI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ti([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vI(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:sD(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of wI(s.path))i(s,o,l)}),e}function wI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=wI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Jx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Zx=/^:[\w-]+$/,eD=3,tD=2,nD=1,rD=10,iD=-2,gw=t=>t==="*";function sD(t,e){let n=t.split("/"),r=n.length;return n.some(gw)&&(r+=iD),e&&(r+=tD),n.filter(i=>!gw(i)).reduce((i,s)=>i+(Zx.test(s)?eD:s===""?nD:rD),r)}function oD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function aD(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=_w({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=_w({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ti([s,d.pathname]),pathnameBase:dD(Ti([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=Ti([s,d.pathnameBase]))}return o}function _w(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lD(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:_}=h;if(p==="*"){let S=a[d]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const y=a[d];return _&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function lD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ba(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ba(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cD(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Rs(t):t;return{pathname:n?n.startsWith("/")?n:hD(n,e):e,search:fD(r),hash:pD(i)}}function hD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function xp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function K_(t,e){let n=EI(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function G_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Rs(t):(i=Ct({},t),Me(!i.pathname||!i.pathname.includes("?"),xp("?","pathname","search",i)),Me(!i.pathname||!i.pathname.includes("#"),xp("#","pathname","hash",i)),Me(!i.search||!i.search.includes("#"),xp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=cD(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Ti=t=>t.join("/").replace(/\/\/+/g,"/"),dD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Q_{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function nf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TI=["post","put","patch","delete"],mD=new Set(TI),gD=["get",...TI],_D=new Set(gD),yD=new Set([301,302,303,307,308]),vD=new Set([307,308]),Dp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Cl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Y_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ED=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),SI="remix-router-transitions";function TD(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Me(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let N=t.detectErrorBoundary;i=x=>({hasErrorBoundary:N(x)})}else i=ED;let s={},o=Vu(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||AD,h=t.unstable_patchRoutesOnMiss,d=Ct({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),p=null,_=new Set,y=null,S=null,b=null,R=t.hydrationData!=null,g=zs(o,t.history.location,l),I=null;if(g==null&&!h){let N=bn(404,{pathname:t.history.location.pathname}),{matches:x,route:j}=Aw(o);g=x,I={[j.id]:N}}g&&h&&bt(g,o,t.history.location.pathname).active&&(g=null);let M;if(!g)M=!1,g=[];else if(g.some(N=>N.route.lazy))M=!1;else if(!g.some(N=>N.route.loader))M=!0;else if(d.v7_partialHydration){let N=t.hydrationData?t.hydrationData.loaderData:null,x=t.hydrationData?t.hydrationData.errors:null,j=W=>W.route.loader?typeof W.route.loader=="function"&&W.route.loader.hydrate===!0?!1:N&&N[W.route.id]!==void 0||x&&x[W.route.id]!==void 0:!0;if(x){let W=g.findIndex(re=>x[re.route.id]!==void 0);M=g.slice(0,W+1).every(j)}else M=g.every(j)}else M=t.hydrationData!=null;let z,k={historyAction:t.history.action,location:t.history.location,matches:g,initialized:M,navigation:Dp,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||I,fetchers:new Map,blockers:new Map},T=$t.Pop,v=!1,E,A=!1,P=new Map,D=null,C=!1,Ae=!1,Nt=[],St=[],Le=new Map,J=0,de=-1,Z=new Map,le=new Set,O=new Map,H=new Map,Q=new Set,ce=new Map,ie=new Map,Te=new Map,Ne=!1;function ge(){if(p=t.history.listen(N=>{let{action:x,location:j,delta:W}=N;if(Ne){Ne=!1;return}ba(ie.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let re=oe({currentLocation:k.location,nextLocation:j,historyAction:x});if(re&&W!=null){Ne=!0,t.history.go(W*-1),ee(re,{state:"blocked",location:j,proceed(){ee(re,{state:"proceeding",proceed:void 0,reset:void 0,location:j}),t.history.go(W)},reset(){let he=new Map(k.blockers);he.set(re,Cl),Se({blockers:he})}});return}return Rt(x,j)}),n){jD(e,P);let N=()=>$D(e,P);e.addEventListener("pagehide",N),D=()=>e.removeEventListener("pagehide",N)}return k.initialized||Rt($t.Pop,k.location,{initialHydration:!0}),z}function Ye(){p&&p(),D&&D(),_.clear(),E&&E.abort(),k.fetchers.forEach((N,x)=>Oi(x)),k.blockers.forEach((N,x)=>ne(x))}function ot(N){return _.add(N),()=>_.delete(N)}function Se(N,x){x===void 0&&(x={}),k=Ct({},k,N);let j=[],W=[];d.v7_fetcherPersist&&k.fetchers.forEach((re,he)=>{re.state==="idle"&&(Q.has(he)?W.push(he):j.push(he))}),[..._].forEach(re=>re(k,{deletedFetchers:W,unstable_viewTransitionOpts:x.viewTransitionOpts,unstable_flushSync:x.flushSync===!0})),d.v7_fetcherPersist&&(j.forEach(re=>k.fetchers.delete(re)),W.forEach(re=>Oi(re)))}function Be(N,x,j){var W,re;let{flushSync:he}=j===void 0?{}:j,Ee=k.actionData!=null&&k.navigation.formMethod!=null&&kr(k.navigation.formMethod)&&k.navigation.state==="loading"&&((W=N.state)==null?void 0:W._isRedirect)!==!0,X;x.actionData?Object.keys(x.actionData).length>0?X=x.actionData:X=null:Ee?X=k.actionData:X=null;let Pe=x.loaderData?Iw(k.loaderData,x.loaderData,x.matches||[],x.errors):k.loaderData,ye=k.blockers;ye.size>0&&(ye=new Map(ye),ye.forEach((ze,Ze)=>ye.set(Ze,Cl)));let me=v===!0||k.navigation.formMethod!=null&&kr(k.navigation.formMethod)&&((re=N.state)==null?void 0:re._isRedirect)!==!0;a&&(o=a,a=void 0),C||T===$t.Pop||(T===$t.Push?t.history.push(N,N.state):T===$t.Replace&&t.history.replace(N,N.state));let Ve;if(T===$t.Pop){let ze=P.get(k.location.pathname);ze&&ze.has(N.pathname)?Ve={currentLocation:k.location,nextLocation:N}:P.has(N.pathname)&&(Ve={currentLocation:N,nextLocation:k.location})}else if(A){let ze=P.get(k.location.pathname);ze?ze.add(N.pathname):(ze=new Set([N.pathname]),P.set(k.location.pathname,ze)),Ve={currentLocation:k.location,nextLocation:N}}Se(Ct({},x,{actionData:X,loaderData:Pe,historyAction:T,location:N,initialized:!0,navigation:Dp,revalidation:"idle",restoreScrollPosition:vt(N,x.matches||k.matches),preventScrollReset:me,blockers:ye}),{viewTransitionOpts:Ve,flushSync:he===!0}),T=$t.Pop,v=!1,A=!1,C=!1,Ae=!1,Nt=[],St=[]}async function Yt(N,x){if(typeof N=="number"){t.history.go(N);return}let j=rg(k.location,k.matches,l,d.v7_prependBasename,N,d.v7_relativeSplatPath,x==null?void 0:x.fromRouteId,x==null?void 0:x.relative),{path:W,submission:re,error:he}=yw(d.v7_normalizeFormMethod,!1,j,x),Ee=k.location,X=Mu(k.location,W,x&&x.state);X=Ct({},X,t.history.encodeLocation(X));let Pe=x&&x.replace!=null?x.replace:void 0,ye=$t.Push;Pe===!0?ye=$t.Replace:Pe===!1||re!=null&&kr(re.formMethod)&&re.formAction===k.location.pathname+k.location.search&&(ye=$t.Replace);let me=x&&"preventScrollReset"in x?x.preventScrollReset===!0:void 0,Ve=(x&&x.unstable_flushSync)===!0,ze=oe({currentLocation:Ee,nextLocation:X,historyAction:ye});if(ze){ee(ze,{state:"blocked",location:X,proceed(){ee(ze,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),Yt(N,x)},reset(){let Ze=new Map(k.blockers);Ze.set(ze,Cl),Se({blockers:Ze})}});return}return await Rt(ye,X,{submission:re,pendingError:he,preventScrollReset:me,replace:x&&x.replace,enableViewTransition:x&&x.unstable_viewTransition,flushSync:Ve})}function Yn(){if(Mt(),Se({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Rt(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Rt(T||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation})}}async function Rt(N,x,j){E&&E.abort(),E=null,T=N,C=(j&&j.startUninterruptedRevalidation)===!0,Vt(k.location,k.matches),v=(j&&j.preventScrollReset)===!0,A=(j&&j.enableViewTransition)===!0;let W=a||o,re=j&&j.overrideNavigation,he=zs(W,x,l),Ee=(j&&j.flushSync)===!0,X=bt(he,W,x.pathname);if(X.active&&X.matches&&(he=X.matches),!he){let{error:We,notFoundMatches:Ft,route:It}=fe(x.pathname);Be(x,{matches:Ft,loaderData:{},errors:{[It.id]:We}},{flushSync:Ee});return}if(k.initialized&&!Ae&&DD(k.location,x)&&!(j&&j.submission&&kr(j.submission.formMethod))){Be(x,{matches:he},{flushSync:Ee});return}E=new AbortController;let Pe=Wo(t.history,x,E.signal,j&&j.submission),ye;if(j&&j.pendingError)ye=[su(he).route.id,{type:at.error,error:j.pendingError}];else if(j&&j.submission&&kr(j.submission.formMethod)){let We=await sn(Pe,x,j.submission,he,X.active,{replace:j.replace,flushSync:Ee});if(We.shortCircuited)return;if(We.pendingActionResult){let[Ft,It]=We.pendingActionResult;if(nr(It)&&nf(It.error)&&It.error.status===404){E=null,Be(x,{matches:We.matches,loaderData:{},errors:{[Ft]:It.error}});return}}he=We.matches||he,ye=We.pendingActionResult,re=Lp(x,j.submission),Ee=!1,X.active=!1,Pe=Wo(t.history,Pe.url,Pe.signal)}let{shortCircuited:me,matches:Ve,loaderData:ze,errors:Ze}=await Vo(Pe,x,he,X.active,re,j&&j.submission,j&&j.fetcherSubmission,j&&j.replace,j&&j.initialHydration===!0,Ee,ye);me||(E=null,Be(x,Ct({matches:Ve||he},Cw(ye),{loaderData:ze,errors:Ze})))}async function sn(N,x,j,W,re,he){he===void 0&&(he={}),Mt();let Ee=FD(x,j);if(Se({navigation:Ee},{flushSync:he.flushSync===!0}),re){let ye=await Ht(W,x.pathname,N.signal);if(ye.type==="aborted")return{shortCircuited:!0};if(ye.type==="error"){let{error:me,notFoundMatches:Ve,route:ze}=pe(x.pathname,ye);return{matches:Ve,pendingActionResult:[ze.id,{type:at.error,error:me}]}}else if(ye.matches)W=ye.matches;else{let{notFoundMatches:me,error:Ve,route:ze}=fe(x.pathname);return{matches:me,pendingActionResult:[ze.id,{type:at.error,error:Ve}]}}}let X,Pe=zl(W,x);if(!Pe.route.action&&!Pe.route.lazy)X={type:at.error,error:bn(405,{method:N.method,pathname:x.pathname,routeId:Pe.route.id})};else if(X=(await hr("action",N,[Pe],W))[0],N.signal.aborted)return{shortCircuited:!0};if(Qs(X)){let ye;return he&&he.replace!=null?ye=he.replace:ye=Tw(X.response.headers.get("Location"),new URL(N.url),l)===k.location.pathname+k.location.search,await Xn(N,X,{submission:j,replace:ye}),{shortCircuited:!0}}if(Gs(X))throw bn(400,{type:"defer-action"});if(nr(X)){let ye=su(W,Pe.route.id);return(he&&he.replace)!==!0&&(T=$t.Push),{matches:W,pendingActionResult:[ye.route.id,X]}}return{matches:W,pendingActionResult:[Pe.route.id,X]}}async function Vo(N,x,j,W,re,he,Ee,X,Pe,ye,me){let Ve=re||Lp(x,he),ze=he||Ee||Nw(Ve),Ze=!C&&(!d.v7_partialHydration||!Pe);if(W){if(Ze){let ht=xs(me);Se(Ct({navigation:Ve},ht!==void 0?{actionData:ht}:{}),{flushSync:ye})}let xe=await Ht(j,x.pathname,N.signal);if(xe.type==="aborted")return{shortCircuited:!0};if(xe.type==="error"){let{error:ht,notFoundMatches:mn,route:et}=pe(x.pathname,xe);return{matches:mn,loaderData:{},errors:{[et.id]:ht}}}else if(xe.matches)j=xe.matches;else{let{error:ht,notFoundMatches:mn,route:et}=fe(x.pathname);return{matches:mn,loaderData:{},errors:{[et.id]:ht}}}}let We=a||o,[Ft,It]=vw(t.history,k,j,ze,x,d.v7_partialHydration&&Pe===!0,d.unstable_skipActionErrorRevalidation,Ae,Nt,St,Q,O,le,We,l,me);if(_e(xe=>!(j&&j.some(ht=>ht.route.id===xe))||Ft&&Ft.some(ht=>ht.route.id===xe)),de=++J,Ft.length===0&&It.length===0){let xe=F();return Be(x,Ct({matches:j,loaderData:{},errors:me&&nr(me[1])?{[me[0]]:me[1].error}:null},Cw(me),xe?{fetchers:new Map(k.fetchers)}:{}),{flushSync:ye}),{shortCircuited:!0}}if(Ze){let xe={};if(!W){xe.navigation=Ve;let ht=xs(me);ht!==void 0&&(xe.actionData=ht)}It.length>0&&(xe.fetchers=ai(It)),Se(xe,{flushSync:ye})}It.forEach(xe=>{Le.has(xe.key)&&Jn(xe.key),xe.controller&&Le.set(xe.key,xe.controller)});let Mi=()=>It.forEach(xe=>Jn(xe.key));E&&E.signal.addEventListener("abort",Mi);let{loaderResults:Br,fetcherResults:Sr}=await Ot(k.matches,j,Ft,It,N);if(N.signal.aborted)return{shortCircuited:!0};E&&E.signal.removeEventListener("abort",Mi),It.forEach(xe=>Le.delete(xe.key));let ui=Pw([...Br,...Sr]);if(ui){if(ui.idx>=Ft.length){let xe=It[ui.idx-Ft.length].key;le.add(xe)}return await Xn(N,ui.result,{replace:X}),{shortCircuited:!0}}let{loaderData:zr,errors:pn}=Rw(k,j,Ft,Br,me,It,Sr,ce);ce.forEach((xe,ht)=>{xe.subscribe(mn=>{(mn||xe.done)&&ce.delete(ht)})}),d.v7_partialHydration&&Pe&&k.errors&&Object.entries(k.errors).filter(xe=>{let[ht]=xe;return!Ft.some(mn=>mn.route.id===ht)}).forEach(xe=>{let[ht,mn]=xe;pn=Object.assign(pn||{},{[ht]:mn})});let dr=F(),Vi=L(de),Uo=dr||Vi||It.length>0;return Ct({matches:j,loaderData:zr,errors:pn},Uo?{fetchers:new Map(k.fetchers)}:{})}function xs(N){if(N&&!nr(N[1]))return{[N[0]]:N[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function ai(N){return N.forEach(x=>{let j=k.fetchers.get(x.key),W=Al(void 0,j?j.data:void 0);k.fetchers.set(x.key,W)}),new Map(k.fetchers)}function Ds(N,x,j,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Le.has(N)&&Jn(N);let re=(W&&W.unstable_flushSync)===!0,he=a||o,Ee=rg(k.location,k.matches,l,d.v7_prependBasename,j,d.v7_relativeSplatPath,x,W==null?void 0:W.relative),X=zs(he,Ee,l),Pe=bt(X,he,Ee);if(Pe.active&&Pe.matches&&(X=Pe.matches),!X){Mn(N,x,bn(404,{pathname:Ee}),{flushSync:re});return}let{path:ye,submission:me,error:Ve}=yw(d.v7_normalizeFormMethod,!0,Ee,W);if(Ve){Mn(N,x,Ve,{flushSync:re});return}let ze=zl(X,ye);if(v=(W&&W.preventScrollReset)===!0,me&&kr(me.formMethod)){Fo(N,x,ye,ze,X,Pe.active,re,me);return}O.set(N,{routeId:x,path:ye}),Ls(N,x,ye,ze,X,Pe.active,re,me)}async function Fo(N,x,j,W,re,he,Ee,X){Mt(),O.delete(N);function Pe(et){if(!et.route.action&&!et.route.lazy){let Zn=bn(405,{method:X.formMethod,pathname:j,routeId:x});return Mn(N,x,Zn,{flushSync:Ee}),!0}return!1}if(!he&&Pe(W))return;let ye=k.fetchers.get(N);Nn(N,UD(X,ye),{flushSync:Ee});let me=new AbortController,Ve=Wo(t.history,j,me.signal,X);if(he){let et=await Ht(re,j,Ve.signal);if(et.type==="aborted")return;if(et.type==="error"){let{error:Zn}=pe(j,et);Mn(N,x,Zn,{flushSync:Ee});return}else if(et.matches){if(re=et.matches,W=zl(re,j),Pe(W))return}else{Mn(N,x,bn(404,{pathname:j}),{flushSync:Ee});return}}Le.set(N,me);let ze=J,We=(await hr("action",Ve,[W],re))[0];if(Ve.signal.aborted){Le.get(N)===me&&Le.delete(N);return}if(d.v7_fetcherPersist&&Q.has(N)){if(Qs(We)||nr(We)){Nn(N,Bi(void 0));return}}else{if(Qs(We))if(Le.delete(N),de>ze){Nn(N,Bi(void 0));return}else return le.add(N),Nn(N,Al(X)),Xn(Ve,We,{fetcherSubmission:X});if(nr(We)){Mn(N,x,We.error);return}}if(Gs(We))throw bn(400,{type:"defer-action"});let Ft=k.navigation.location||k.location,It=Wo(t.history,Ft,me.signal),Mi=a||o,Br=k.navigation.state!=="idle"?zs(Mi,k.navigation.location,l):k.matches;Me(Br,"Didn't find any matches after fetcher action");let Sr=++J;Z.set(N,Sr);let ui=Al(X,We.data);k.fetchers.set(N,ui);let[zr,pn]=vw(t.history,k,Br,X,Ft,!1,d.unstable_skipActionErrorRevalidation,Ae,Nt,St,Q,O,le,Mi,l,[W.route.id,We]);pn.filter(et=>et.key!==N).forEach(et=>{let Zn=et.key,ul=k.fetchers.get(Zn),kc=Al(void 0,ul?ul.data:void 0);k.fetchers.set(Zn,kc),Le.has(Zn)&&Jn(Zn),et.controller&&Le.set(Zn,et.controller)}),Se({fetchers:new Map(k.fetchers)});let dr=()=>pn.forEach(et=>Jn(et.key));me.signal.addEventListener("abort",dr);let{loaderResults:Vi,fetcherResults:Uo}=await Ot(k.matches,Br,zr,pn,It);if(me.signal.aborted)return;me.signal.removeEventListener("abort",dr),Z.delete(N),Le.delete(N),pn.forEach(et=>Le.delete(et.key));let xe=Pw([...Vi,...Uo]);if(xe){if(xe.idx>=zr.length){let et=pn[xe.idx-zr.length].key;le.add(et)}return Xn(It,xe.result)}let{loaderData:ht,errors:mn}=Rw(k,k.matches,zr,Vi,void 0,pn,Uo,ce);if(k.fetchers.has(N)){let et=Bi(We.data);k.fetchers.set(N,et)}L(Sr),k.navigation.state==="loading"&&Sr>de?(Me(T,"Expected pending action"),E&&E.abort(),Be(k.navigation.location,{matches:Br,loaderData:ht,errors:mn,fetchers:new Map(k.fetchers)})):(Se({errors:mn,loaderData:Iw(k.loaderData,ht,Br,mn),fetchers:new Map(k.fetchers)}),Ae=!1)}async function Ls(N,x,j,W,re,he,Ee,X){let Pe=k.fetchers.get(N);Nn(N,Al(X,Pe?Pe.data:void 0),{flushSync:Ee});let ye=new AbortController,me=Wo(t.history,j,ye.signal);if(he){let We=await Ht(re,j,me.signal);if(We.type==="aborted")return;if(We.type==="error"){let{error:Ft}=pe(j,We);Mn(N,x,Ft,{flushSync:Ee});return}else if(We.matches)re=We.matches,W=zl(re,j);else{Mn(N,x,bn(404,{pathname:j}),{flushSync:Ee});return}}Le.set(N,ye);let Ve=J,Ze=(await hr("loader",me,[W],re))[0];if(Gs(Ze)&&(Ze=await PI(Ze,me.signal,!0)||Ze),Le.get(N)===ye&&Le.delete(N),!me.signal.aborted){if(Q.has(N)){Nn(N,Bi(void 0));return}if(Qs(Ze))if(de>Ve){Nn(N,Bi(void 0));return}else{le.add(N),await Xn(me,Ze);return}if(nr(Ze)){Mn(N,x,Ze.error);return}Me(!Gs(Ze),"Unhandled fetcher deferred data"),Nn(N,Bi(Ze.data))}}async function Xn(N,x,j){let{submission:W,fetcherSubmission:re,replace:he}=j===void 0?{}:j;x.response.headers.has("X-Remix-Revalidate")&&(Ae=!0);let Ee=x.response.headers.get("Location");Me(Ee,"Expected a Location header on the redirect Response"),Ee=Tw(Ee,new URL(N.url),l);let X=Mu(k.location,Ee,{_isRedirect:!0});if(n){let Ze=!1;if(x.response.headers.has("X-Remix-Reload-Document"))Ze=!0;else if(Y_.test(Ee)){const We=t.history.createURL(Ee);Ze=We.origin!==e.location.origin||Xa(We.pathname,l)==null}if(Ze){he?e.location.replace(Ee):e.location.assign(Ee);return}}E=null;let Pe=he===!0?$t.Replace:$t.Push,{formMethod:ye,formAction:me,formEncType:Ve}=k.navigation;!W&&!re&&ye&&me&&Ve&&(W=Nw(k.navigation));let ze=W||re;if(vD.has(x.response.status)&&ze&&kr(ze.formMethod))await Rt(Pe,X,{submission:Ct({},ze,{formAction:Ee}),preventScrollReset:v});else{let Ze=Lp(X,W);await Rt(Pe,X,{overrideNavigation:Ze,fetcherSubmission:re,preventScrollReset:v})}}async function hr(N,x,j,W){try{let re=await PD(c,N,x,j,W,s,i);return await Promise.all(re.map((he,Ee)=>{if(OD(he)){let X=he.result;return{type:at.redirect,response:bD(X,x,j[Ee].route.id,W,l,d.v7_relativeSplatPath)}}return ND(he)}))}catch(re){return j.map(()=>({type:at.error,error:re}))}}async function Ot(N,x,j,W,re){let[he,...Ee]=await Promise.all([j.length?hr("loader",re,j,x):[],...W.map(X=>{if(X.matches&&X.match&&X.controller){let Pe=Wo(t.history,X.path,X.controller.signal);return hr("loader",Pe,[X.match],X.matches).then(ye=>ye[0])}else return Promise.resolve({type:at.error,error:bn(404,{pathname:X.path})})})]);return await Promise.all([kw(N,j,he,he.map(()=>re.signal),!1,k.loaderData),kw(N,W.map(X=>X.match),Ee,W.map(X=>X.controller?X.controller.signal:null),!0)]),{loaderResults:he,fetcherResults:Ee}}function Mt(){Ae=!0,Nt.push(..._e()),O.forEach((N,x)=>{Le.has(x)&&(St.push(x),Jn(x))})}function Nn(N,x,j){j===void 0&&(j={}),k.fetchers.set(N,x),Se({fetchers:new Map(k.fetchers)},{flushSync:(j&&j.flushSync)===!0})}function Mn(N,x,j,W){W===void 0&&(W={});let re=su(k.matches,x);Oi(N),Se({errors:{[re.route.id]:j},fetchers:new Map(k.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Os(N){return d.v7_fetcherPersist&&(H.set(N,(H.get(N)||0)+1),Q.has(N)&&Q.delete(N)),k.fetchers.get(N)||wD}function Oi(N){let x=k.fetchers.get(N);Le.has(N)&&!(x&&x.state==="loading"&&Z.has(N))&&Jn(N),O.delete(N),Z.delete(N),le.delete(N),Q.delete(N),k.fetchers.delete(N)}function $r(N){if(d.v7_fetcherPersist){let x=(H.get(N)||0)-1;x<=0?(H.delete(N),Q.add(N)):H.set(N,x)}else Oi(N);Se({fetchers:new Map(k.fetchers)})}function Jn(N){let x=Le.get(N);Me(x,"Expected fetch controller: "+N),x.abort(),Le.delete(N)}function Ms(N){for(let x of N){let j=Os(x),W=Bi(j.data);k.fetchers.set(x,W)}}function F(){let N=[],x=!1;for(let j of le){let W=k.fetchers.get(j);Me(W,"Expected fetcher: "+j),W.state==="loading"&&(le.delete(j),N.push(j),x=!0)}return Ms(N),x}function L(N){let x=[];for(let[j,W]of Z)if(W<N){let re=k.fetchers.get(j);Me(re,"Expected fetcher: "+j),re.state==="loading"&&(Jn(j),Z.delete(j),x.push(j))}return Ms(x),x.length>0}function q(N,x){let j=k.blockers.get(N)||Cl;return ie.get(N)!==x&&ie.set(N,x),j}function ne(N){k.blockers.delete(N),ie.delete(N)}function ee(N,x){let j=k.blockers.get(N)||Cl;Me(j.state==="unblocked"&&x.state==="blocked"||j.state==="blocked"&&x.state==="blocked"||j.state==="blocked"&&x.state==="proceeding"||j.state==="blocked"&&x.state==="unblocked"||j.state==="proceeding"&&x.state==="unblocked","Invalid blocker state transition: "+j.state+" -> "+x.state);let W=new Map(k.blockers);W.set(N,x),Se({blockers:W})}function oe(N){let{currentLocation:x,nextLocation:j,historyAction:W}=N;if(ie.size===0)return;ie.size>1&&ba(!1,"A router only supports one blocker at a time");let re=Array.from(ie.entries()),[he,Ee]=re[re.length-1],X=k.blockers.get(he);if(!(X&&X.state==="proceeding")&&Ee({currentLocation:x,nextLocation:j,historyAction:W}))return he}function fe(N){let x=bn(404,{pathname:N}),j=a||o,{matches:W,route:re}=Aw(j);return _e(),{notFoundMatches:W,route:re,error:x}}function pe(N,x){let j=x.partialMatches,W=j[j.length-1].route,re=bn(400,{type:"route-discovery",routeId:W.id,pathname:N,message:x.error!=null&&"message"in x.error?x.error:String(x.error)});return{notFoundMatches:j,route:W,error:re}}function _e(N){let x=[];return ce.forEach((j,W)=>{(!N||N(W))&&(j.cancel(),x.push(W),ce.delete(W))}),x}function Re(N,x,j){if(y=N,b=x,S=j||null,!R&&k.navigation===Dp){R=!0;let W=vt(k.location,k.matches);W!=null&&Se({restoreScrollPosition:W})}return()=>{y=null,b=null,S=null}}function Je(N,x){return S&&S(N,x.map(W=>Xx(W,k.loaderData)))||N.key}function Vt(N,x){if(y&&b){let j=Je(N,x);y[j]=b()}}function vt(N,x){if(y){let j=Je(N,x),W=y[j];if(typeof W=="number")return W}return null}function bt(N,x,j){if(h)if(N){let W=N[N.length-1].route;if(W.path&&(W.path==="*"||W.path.endsWith("/*")))return{active:!0,matches:Ah(x,j,l,!0)}}else return{active:!0,matches:Ah(x,j,l,!0)||[]};return{active:!1,matches:null}}async function Ht(N,x,j){let W=N,re=W.length>0?W[W.length-1].route:null;for(;;){let he=a==null,Ee=a||o;try{await CD(h,x,W,Ee,s,i,Te,j)}catch(me){return{type:"error",error:me,partialMatches:W}}finally{he&&(o=[...o])}if(j.aborted)return{type:"aborted"};let X=zs(Ee,x,l),Pe=!1;if(X){let me=X[X.length-1].route;if(me.index)return{type:"success",matches:X};if(me.path&&me.path.length>0)if(me.path==="*")Pe=!0;else return{type:"success",matches:X}}let ye=Ah(Ee,x,l,!0);if(!ye||W.map(me=>me.route.id).join("-")===ye.map(me=>me.route.id).join("-"))return{type:"success",matches:Pe?X:null};if(W=ye,re=W[W.length-1].route,re.path==="*")return{type:"success",matches:W}}}function wt(N){s={},a=Vu(N,i,void 0,s)}function li(N,x){let j=a==null;II(N,x,a||o,s,i),j&&(o=[...o],Se({}))}return z={get basename(){return l},get future(){return d},get state(){return k},get routes(){return o},get window(){return e},initialize:ge,subscribe:ot,enableScrollRestoration:Re,navigate:Yt,fetch:Ds,revalidate:Yn,createHref:N=>t.history.createHref(N),encodeLocation:N=>t.history.encodeLocation(N),getFetcher:Os,deleteFetcher:$r,dispose:Ye,getBlocker:q,deleteBlocker:ne,patchRoutes:li,_internalFetchControllers:Le,_internalActiveDeferreds:ce,_internalSetRoutes:wt},z}function SD(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function rg(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let h=G_(i||".",K_(l,s),Xa(t.pathname,n)||t.pathname,a==="path");return i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!X_(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Ti([n,h.pathname])),ao(h)}function yw(t,e,n,r){if(!r||!SD(r))return{path:n};if(r.formMethod&&!VD(r.formMethod))return{path:n,error:bn(405,{method:r.formMethod})};let i=()=>({path:n,error:bn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=CI(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!kr(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,y)=>{let[S,b]=y;return""+_+S+"="+b+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!kr(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}Me(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=ig(r.formData),c=r.formData;else if(r.body instanceof FormData)l=ig(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=Sw(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=Sw(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(kr(h.formMethod))return{path:n,submission:h};let d=Rs(n);return e&&d.search&&X_(d.search)&&l.append("index",""),d.search="?"+l,{path:ao(d),submission:h}}function RD(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function vw(t,e,n,r,i,s,o,a,l,c,h,d,p,_,y,S){let b=S?nr(S[1])?S[1].error:S[1].data:void 0,R=t.createURL(e.location),g=t.createURL(i),I=S&&nr(S[1])?S[0]:void 0,M=I?RD(n,I):n,z=S?S[1].statusCode:void 0,k=o&&z&&z>=400,T=M.filter((E,A)=>{let{route:P}=E;if(P.lazy)return!0;if(P.loader==null)return!1;if(s)return typeof P.loader!="function"||P.loader.hydrate?!0:e.loaderData[P.id]===void 0&&(!e.errors||e.errors[P.id]===void 0);if(ID(e.loaderData,e.matches[A],E)||l.some(Ae=>Ae===E.route.id))return!0;let D=e.matches[A],C=E;return ww(E,Ct({currentUrl:R,currentParams:D.params,nextUrl:g,nextParams:C.params},r,{actionResult:b,unstable_actionStatus:z,defaultShouldRevalidate:k?!1:a||R.pathname+R.search===g.pathname+g.search||R.search!==g.search||RI(D,C)}))}),v=[];return d.forEach((E,A)=>{if(s||!n.some(Nt=>Nt.route.id===E.routeId)||h.has(A))return;let P=zs(_,E.path,y);if(!P){v.push({key:A,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let D=e.fetchers.get(A),C=zl(P,E.path),Ae=!1;p.has(A)?Ae=!1:c.includes(A)?Ae=!0:D&&D.state!=="idle"&&D.data===void 0?Ae=a:Ae=ww(C,Ct({currentUrl:R,currentParams:e.matches[e.matches.length-1].params,nextUrl:g,nextParams:n[n.length-1].params},r,{actionResult:b,unstable_actionStatus:z,defaultShouldRevalidate:k?!1:a})),Ae&&v.push({key:A,routeId:E.routeId,path:E.path,matches:P,match:C,controller:new AbortController})}),[T,v]}function ID(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function RI(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function ww(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function CD(t,e,n,r,i,s,o,a){let l=[e,...n.map(c=>c.route.id)].join("-");try{let c=o.get(l);c||(c=t({path:e,matches:n,patch:(h,d)=>{a.aborted||II(h,d,r,i,s)}}),o.set(l,c)),c&&LD(c)&&await c}finally{o.delete(l)}}function II(t,e,n,r,i){if(t){var s;let o=r[t];Me(o,"No route found to patch children into: routeId = "+t);let a=Vu(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=Vu(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function Ew(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Me(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";ba(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Qx.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Ct({},e(i),{lazy:void 0}))}function AD(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function PD(t,e,n,r,i,s,o,a){let l=r.reduce((d,p)=>d.add(p.route.id),new Set),c=new Set,h=await t({matches:i.map(d=>{let p=l.has(d.route.id);return Ct({},d,{shouldLoad:p,resolve:y=>(c.add(d.route.id),p?kD(e,n,d,s,o,y,a):Promise.resolve({type:at.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(d=>Me(c.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((d,p)=>l.has(i[p].route.id))}async function kD(t,e,n,r,i,s,o){let a,l,c=h=>{let d,p=new Promise((S,b)=>d=b);l=()=>d(),e.signal.addEventListener("abort",l);let _=S=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...S!==void 0?[S]:[]),y;return s?y=s(S=>_(S)):y=(async()=>{try{return{type:"data",result:await _()}}catch(S){return{type:"error",result:S}}})(),Promise.race([y,p])};try{let h=n.route[t];if(n.route.lazy)if(h){let d,[p]=await Promise.all([c(h).catch(_=>{d=_}),Ew(n.route,i,r)]);if(d!==void 0)throw d;a=p}else if(await Ew(n.route,i,r),h=n.route[t],h)a=await c(h);else if(t==="action"){let d=new URL(e.url),p=d.pathname+d.search;throw bn(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:at.data,result:void 0};else if(h)a=await c(h);else{let d=new URL(e.url),p=d.pathname+d.search;throw bn(404,{pathname:p})}Me(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:at.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function ND(t){let{result:e,type:n,status:r}=t;if(AI(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:at.error,error:a}}return n===at.error?{type:at.error,error:new Q_(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:at.data,data:o,statusCode:e.status,headers:e.headers}}if(n===at.error)return{type:at.error,error:e,statusCode:nf(e)?e.status:r};if(MD(e)){var i,s;return{type:at.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:at.data,data:e,statusCode:r}}function bD(t,e,n,r,i,s){let o=t.headers.get("Location");if(Me(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Y_.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=rg(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function Tw(t,e,n){if(Y_.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Xa(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Wo(t,e,n,r){let i=t.createURL(CI(e)).toString(),s={signal:n};if(r&&kr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=ig(r.formData):s.body=r.formData}return new Request(i,s)}function ig(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Sw(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function xD(t,e,n,r,i,s){let o={},a=null,l,c=!1,h={},d=r&&nr(r[1])?r[1].error:void 0;return n.forEach((p,_)=>{let y=e[_].route.id;if(Me(!Qs(p),"Cannot handle redirect results in processLoaderData"),nr(p)){let S=p.error;d!==void 0&&(S=d,d=void 0),a=a||{};{let b=su(t,y);a[b.route.id]==null&&(a[b.route.id]=S)}o[y]=void 0,c||(c=!0,l=nf(p.error)?p.error.status:500),p.headers&&(h[y]=p.headers)}else Gs(p)?(i.set(y,p.deferredData),o[y]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[y]=p.headers)):(o[y]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[y]=p.headers))}),d!==void 0&&r&&(a={[r[0]]:d},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function Rw(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=xD(e,n,r,i,a);for(let h=0;h<s.length;h++){let{key:d,match:p,controller:_}=s[h];Me(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let y=o[h];if(!(_&&_.signal.aborted))if(nr(y)){let S=su(t.matches,p==null?void 0:p.route.id);c&&c[S.route.id]||(c=Ct({},c,{[S.route.id]:y.error})),t.fetchers.delete(d)}else if(Qs(y))Me(!1,"Unhandled fetcher revalidation redirect");else if(Gs(y))Me(!1,"Unhandled fetcher deferred data");else{let S=Bi(y.data);t.fetchers.set(d,S)}}return{loaderData:l,errors:c}}function Iw(t,e,n,r){let i=Ct({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function Cw(t){return t?nr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function su(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Aw(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function bn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+n+'" - the `children()` function for '+("route `"+r+"` threw the following error:\n"+o):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Q_(t||500,a,new Error(l),!0)}function Pw(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Qs(n))return{result:n,idx:e}}}function CI(t){let e=typeof t=="string"?Rs(t):t;return ao(Ct({},e,{hash:""}))}function DD(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function LD(t){return typeof t=="object"&&t!=null&&"then"in t}function OD(t){return AI(t.result)&&yD.has(t.result.status)}function Gs(t){return t.type===at.deferred}function nr(t){return t.type===at.error}function Qs(t){return(t&&t.type)===at.redirect}function MD(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function AI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function VD(t){return _D.has(t.toLowerCase())}function kr(t){return mD.has(t.toLowerCase())}async function kw(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),h=c!=null&&!RI(c,l)&&(s&&s[l.route.id])!==void 0;if(Gs(a)&&(i||h)){let d=r[o];Me(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await PI(a,d,i).then(p=>{p&&(n[o]=p||n[o])})}}}async function PI(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:at.data,data:t.deferredData.unwrappedData}}catch(i){return{type:at.error,error:i}}return{type:at.data,data:t.deferredData.data}}}function X_(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function zl(t,e){let n=typeof e=="string"?Rs(e).search:e.search;if(t[t.length-1].route.index&&X_(n||""))return t[t.length-1];let r=EI(t);return r[r.length-1]}function Nw(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Lp(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function FD(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Al(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function UD(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Bi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function jD(t,e){try{let n=t.sessionStorage.getItem(SI);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function $D(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(SI,JSON.stringify(n))}catch(r){ba(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ad.apply(this,arguments)}const rf=B.createContext(null),kI=B.createContext(null),Co=B.createContext(null),J_=B.createContext(null),Is=B.createContext({outlet:null,matches:[],isDataRoute:!1}),NI=B.createContext(null);function BD(t,e){let{relative:n}=e===void 0?{}:e;ic()||Me(!1);let{basename:r,navigator:i}=B.useContext(Co),{hash:s,pathname:o,search:a}=xI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ti([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ic(){return B.useContext(J_)!=null}function sf(){return ic()||Me(!1),B.useContext(J_).location}function bI(t){B.useContext(Co).static||B.useLayoutEffect(t)}function Cs(){let{isDataRoute:t}=B.useContext(Is);return t?nL():zD()}function zD(){ic()||Me(!1);let t=B.useContext(rf),{basename:e,future:n,navigator:r}=B.useContext(Co),{matches:i}=B.useContext(Is),{pathname:s}=sf(),o=JSON.stringify(K_(i,n.v7_relativeSplatPath)),a=B.useRef(!1);return bI(()=>{a.current=!0}),B.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=G_(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ti([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}const WD=B.createContext(null);function HD(t){let e=B.useContext(Is).outlet;return e&&B.createElement(WD.Provider,{value:t},e)}function xI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=B.useContext(Co),{matches:i}=B.useContext(Is),{pathname:s}=sf(),o=JSON.stringify(K_(i,r.v7_relativeSplatPath));return B.useMemo(()=>G_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function qD(t,e,n,r){ic()||Me(!1);let{navigator:i}=B.useContext(Co),{matches:s}=B.useContext(Is),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=sf(),h;h=c;let d=h.pathname||"/",p=d;if(l!=="/"){let S=l.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=zs(t,{pathname:p});return XD(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Ti([l,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:Ti([l,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r)}function KD(){let t=tL(),e=nf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),n?B.createElement("pre",{style:i},n):null,null)}const GD=B.createElement(KD,null);class QD extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?B.createElement(Is.Provider,{value:this.props.routeContext},B.createElement(NI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YD(t){let{routeContext:e,match:n,children:r}=t,i=B.useContext(rf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),B.createElement(Is.Provider,{value:e},r)}function XD(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:_}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!_||_[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let _,y=!1,S=null,b=null;n&&(_=a&&d.route.id?a[d.route.id]:void 0,S=d.route.errorElement||GD,l&&(c<0&&p===0?(rL("route-fallback"),y=!0,b=null):c===p&&(y=!0,b=d.route.hydrateFallbackElement||null)));let R=e.concat(o.slice(0,p+1)),g=()=>{let I;return _?I=S:y?I=b:d.route.Component?I=B.createElement(d.route.Component,null):d.route.element?I=d.route.element:I=h,B.createElement(YD,{match:d,routeContext:{outlet:h,matches:R,isDataRoute:n!=null},children:I})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?B.createElement(QD,{location:n.location,revalidation:n.revalidation,component:S,error:_,children:g(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):g()},null)}var DI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(DI||{}),ld=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ld||{});function JD(t){let e=B.useContext(rf);return e||Me(!1),e}function ZD(t){let e=B.useContext(kI);return e||Me(!1),e}function eL(t){let e=B.useContext(Is);return e||Me(!1),e}function LI(t){let e=eL(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function tL(){var t;let e=B.useContext(NI),n=ZD(ld.UseRouteError),r=LI(ld.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nL(){let{router:t}=JD(DI.UseNavigateStable),e=LI(ld.UseNavigateStable),n=B.useRef(!1);return bI(()=>{n.current=!0}),B.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ad({fromRouteId:e},s)))},[t,e])}const bw={};function rL(t,e,n){bw[t]||(bw[t]=!0)}function iL(t){return HD(t.context)}function sL(t){let{basename:e="/",children:n=null,location:r,navigationType:i=$t.Pop,navigator:s,static:o=!1,future:a}=t;ic()&&Me(!1);let l=e.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:l,navigator:s,static:o,future:ad({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Rs(r));let{pathname:h="/",search:d="",hash:p="",state:_=null,key:y="default"}=r,S=B.useMemo(()=>{let b=Xa(h,l);return b==null?null:{location:{pathname:b,search:d,hash:p,state:_,key:y},navigationType:i}},[l,h,d,p,_,y,i]);return S==null?null:B.createElement(Co.Provider,{value:c},B.createElement(J_.Provider,{children:n,value:S}))}new Promise(()=>{});function oL(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:B.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:B.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:B.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fu.apply(this,arguments)}function aL(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function lL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uL(t,e){return t.button===0&&(!e||e==="_self")&&!lL(t)}const cL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],hL="6";try{window.__reactRouterVersion=hL}catch{}function dL(t,e){return TD({basename:void 0,future:Fu({},void 0,{v7_prependBasename:!0}),history:qx({window:void 0}),hydrationData:fL(),routes:t,mapRouteProperties:oL,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function fL(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Fu({},e,{errors:pL(e.errors)})),e}function pL(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Q_(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const mL=B.createContext({isTransitioning:!1}),gL=B.createContext(new Map),_L="startTransition",xw=LN[_L],yL="flushSync",Dw=Hx[yL];function vL(t){xw?xw(t):t()}function Pl(t){Dw?Dw(t):t()}let wL=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function EL(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=B.useState(n.state),[o,a]=B.useState(),[l,c]=B.useState({isTransitioning:!1}),[h,d]=B.useState(),[p,_]=B.useState(),[y,S]=B.useState(),b=B.useRef(new Map),{v7_startTransition:R}=r||{},g=B.useCallback(T=>{R?vL(T):T()},[R]),I=B.useCallback((T,v)=>{let{deletedFetchers:E,unstable_flushSync:A,unstable_viewTransitionOpts:P}=v;E.forEach(C=>b.current.delete(C)),T.fetchers.forEach((C,Ae)=>{C.data!==void 0&&b.current.set(Ae,C.data)});let D=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!P||D){A?Pl(()=>s(T)):g(()=>s(T));return}if(A){Pl(()=>{p&&(h&&h.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let C=n.window.document.startViewTransition(()=>{Pl(()=>s(T))});C.finished.finally(()=>{Pl(()=>{d(void 0),_(void 0),a(void 0),c({isTransitioning:!1})})}),Pl(()=>_(C));return}p?(h&&h.resolve(),p.skipTransition(),S({state:T,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(a(T),c({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[n.window,p,h,b,g]);B.useLayoutEffect(()=>n.subscribe(I),[n,I]),B.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new wL)},[l]),B.useEffect(()=>{if(h&&o&&n.window){let T=o,v=h.promise,E=n.window.document.startViewTransition(async()=>{g(()=>s(T)),await v});E.finished.finally(()=>{d(void 0),_(void 0),a(void 0),c({isTransitioning:!1})}),_(E)}},[g,o,h,n.window]),B.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,p,i.location,o]),B.useEffect(()=>{!l.isTransitioning&&y&&(a(y.state),c({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),S(void 0))},[l.isTransitioning,y]),B.useEffect(()=>{},[]);let M=B.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,v,E)=>n.navigate(T,{state:v,preventScrollReset:E==null?void 0:E.preventScrollReset}),replace:(T,v,E)=>n.navigate(T,{replace:!0,state:v,preventScrollReset:E==null?void 0:E.preventScrollReset})}),[n]),z=n.basename||"/",k=B.useMemo(()=>({router:n,navigator:M,static:!1,basename:z}),[n,M,z]);return B.createElement(B.Fragment,null,B.createElement(rf.Provider,{value:k},B.createElement(kI.Provider,{value:i},B.createElement(gL.Provider,{value:b.current},B.createElement(mL.Provider,{value:l},B.createElement(sL,{basename:z,location:i.location,navigationType:i.historyAction,navigator:M,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?B.createElement(TL,{routes:n.routes,future:n.future,state:i}):e))))),null)}function TL(t){let{routes:e,future:n,state:r}=t;return qD(e,void 0,r,n)}const SL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xa=B.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,p=aL(e,cL),{basename:_}=B.useContext(Co),y,S=!1;if(typeof c=="string"&&RL.test(c)&&(y=c,SL))try{let I=new URL(window.location.href),M=c.startsWith("//")?new URL(I.protocol+c):new URL(c),z=Xa(M.pathname,_);M.origin===I.origin&&z!=null?c=z+M.search+M.hash:S=!0}catch{}let b=BD(c,{relative:i}),R=IL(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:d});function g(I){r&&r(I),I.defaultPrevented||R(I)}return B.createElement("a",Fu({},p,{href:y||b,onClick:S||s?r:g,ref:n,target:l}))});var Lw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Lw||(Lw={}));var Ow;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ow||(Ow={}));function IL(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Cs(),c=sf(),h=xI(t,{relative:o});return B.useCallback(d=>{if(uL(d,n)){d.preventDefault();let p=r!==void 0?r:ao(c)===ao(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}var Mw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se=function(t,e){if(!t)throw Ja(e)},Ja=function(t){return new Error("Firebase Database ("+OI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},CL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Z_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(p=64)),r.push(n[h],n[d],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new AL;const p=s<<2|a>>4;if(r.push(p),c!==64){const _=a<<4&240|c>>2;if(r.push(_),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VI=function(t){const e=MI(t);return Z_.encodeByteArray(e,!0)},ud=function(t){return VI(t).replace(/\./g,"")},cd=function(t){try{return Z_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t){return FI(void 0,t)}function FI(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!kL(n)||(t[n]=FI(t[n],e[n]));return t}function kL(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=()=>NL().__FIREBASE_DEFAULTS__,xL=()=>{if(typeof process>"u"||typeof Mw>"u")return;const t=Mw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cd(t[1]);return e&&JSON.parse(e)},of=()=>{try{return bL()||xL()||DL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UI=t=>{var e,n;return(n=(e=of())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},LL=t=>{const e=UI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},jI=()=>{var t;return(t=of())===null||t===void 0?void 0:t.config},$I=t=>{var e;return(e=of())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ud(JSON.stringify(n)),ud(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ty(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function ML(){var t;const e=(t=of())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VL(){const t=fn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function WI(){return OI.NODE_ADMIN===!0}function FL(){return!ML()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HI(){try{return typeof indexedDB=="object"}catch{return!1}}function qI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function UL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="FirebaseError";class jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jL,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$L(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jr(i,a,r)}}function $L(t,e){return t.replace(BL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const BL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){return JSON.parse(t)}function ln(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Uu(cd(s[0])||""),n=Uu(cd(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},zL=function(t){const e=KI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},WL=function(t){const e=KI(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Da(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function sg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hd(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function dd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Vw(s)&&Vw(o)){if(!dd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Vw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Hl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const p=(i<<5|i>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function qL(t,e){const n=new KL(t,e);return n.subscribe.bind(n)}class KL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");GL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Op),i.error===void 0&&(i.error=Op),i.complete===void 0&&(i.complete=Op);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Op(){}function QL(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,se(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},af=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=1e3,JL=2,ZL=4*60*60*1e3,eO=.5;function Fw(t,e=XL,n=JL){const r=e*Math.pow(n,t),i=Math.round(eO*r*(Math.random()-.5)*2);return Math.min(ZL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t){return t&&t._delegate?t._delegate:t}class Er{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ey;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rO(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nO(t){return t===$s?void 0:t}function rO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ue||(Ue={}));const sO={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},oO=Ue.INFO,aO={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},lO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=aO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sc{constructor(e){this.name=e,this._logLevel=oO,this._logHandler=lO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const uO=(t,e)=>e.some(n=>t instanceof n);let Uw,jw;function cO(){return Uw||(Uw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hO(){return jw||(jw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GI=new WeakMap,og=new WeakMap,QI=new WeakMap,Mp=new WeakMap,ny=new WeakMap;function dO(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(us(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GI.set(n,t)}).catch(()=>{}),ny.set(e,t),e}function fO(t){if(og.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});og.set(t,e)}let ag={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return og.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pO(t){ag=t(ag)}function mO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vp(this),e,...n);return QI.set(r,e.sort?e.sort():[e]),us(r)}:hO().includes(t)?function(...e){return t.apply(Vp(this),e),us(GI.get(this))}:function(...e){return us(t.apply(Vp(this),e))}}function gO(t){return typeof t=="function"?mO(t):(t instanceof IDBTransaction&&fO(t),uO(t,cO())?new Proxy(t,ag):t)}function us(t){if(t instanceof IDBRequest)return dO(t);if(Mp.has(t))return Mp.get(t);const e=gO(t);return e!==t&&(Mp.set(t,e),ny.set(e,t)),e}const Vp=t=>ny.get(t);function YI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=us(o);return r&&o.addEventListener("upgradeneeded",l=>{r(us(o.result),l.oldVersion,l.newVersion,us(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const _O=["get","getKey","getAll","getAllKeys","count"],yO=["put","add","delete","clear"],Fp=new Map;function $w(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fp.get(e))return Fp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=yO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_O.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Fp.set(e,s),s}pO(t=>({...t,get:(e,n,r)=>$w(e,n)||t.get(e,n,r),has:(e,n)=>!!$w(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function wO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lg="@firebase/app",Bw="0.10.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new sc("@firebase/app"),EO="@firebase/app-compat",TO="@firebase/analytics-compat",SO="@firebase/analytics",RO="@firebase/app-check-compat",IO="@firebase/app-check",CO="@firebase/auth",AO="@firebase/auth-compat",PO="@firebase/database",kO="@firebase/database-compat",NO="@firebase/functions",bO="@firebase/functions-compat",xO="@firebase/installations",DO="@firebase/installations-compat",LO="@firebase/messaging",OO="@firebase/messaging-compat",MO="@firebase/performance",VO="@firebase/performance-compat",FO="@firebase/remote-config",UO="@firebase/remote-config-compat",jO="@firebase/storage",$O="@firebase/storage-compat",BO="@firebase/firestore",zO="@firebase/vertexai-preview",WO="@firebase/firestore-compat",HO="firebase",qO="10.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="[DEFAULT]",KO={[lg]:"fire-core",[EO]:"fire-core-compat",[SO]:"fire-analytics",[TO]:"fire-analytics-compat",[IO]:"fire-app-check",[RO]:"fire-app-check-compat",[CO]:"fire-auth",[AO]:"fire-auth-compat",[PO]:"fire-rtdb",[kO]:"fire-rtdb-compat",[NO]:"fire-fn",[bO]:"fire-fn-compat",[xO]:"fire-iid",[DO]:"fire-iid-compat",[LO]:"fire-fcm",[OO]:"fire-fcm-compat",[MO]:"fire-perf",[VO]:"fire-perf-compat",[FO]:"fire-rc",[UO]:"fire-rc-compat",[jO]:"fire-gcs",[$O]:"fire-gcs-compat",[BO]:"fire-fst",[WO]:"fire-fst-compat",[zO]:"fire-vertex","fire-js":"fire-js",[HO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new Map,GO=new Map,cg=new Map;function zw(t,e){try{t.container.addComponent(e)}catch(n){lo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vr(t){const e=t.name;if(cg.has(e))return lo.debug(`There were multiple attempts to register component ${e}.`),!1;cg.set(e,t);for(const n of fd.values())zw(n,t);for(const n of GO.values())zw(n,t);return!0}function oc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new Ao("app","Firebase",QO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=qO;function XI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ug,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw cs.create("bad-app-name",{appName:String(i)});if(n||(n=jI()),!n)throw cs.create("no-options");const s=fd.get(i);if(s){if(dd(n,s.options)&&dd(r,s.config))return s;throw cs.create("duplicate-app",{appName:i})}const o=new iO(i);for(const l of cg.values())o.addComponent(l);const a=new YO(n,r,o);return fd.set(i,a),a}function JI(t=ug){const e=fd.get(t);if(!e&&t===ug&&jI())return XI();if(!e)throw cs.create("no-app",{appName:t});return e}function qn(t,e,n){var r;let i=(r=KO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lo.warn(a.join(" "));return}Vr(new Er(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO="firebase-heartbeat-database",JO=1,ju="firebase-heartbeat-store";let Up=null;function ZI(){return Up||(Up=YI(XO,JO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ju)}catch(n){console.warn(n)}}}}).catch(t=>{throw cs.create("idb-open",{originalErrorMessage:t.message})})),Up}async function ZO(t){try{const n=(await ZI()).transaction(ju),r=await n.objectStore(ju).get(eC(t));return await n.done,r}catch(e){if(e instanceof jr)lo.warn(e.message);else{const n=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lo.warn(n.message)}}}async function Ww(t,e){try{const r=(await ZI()).transaction(ju,"readwrite");await r.objectStore(ju).put(e,eC(t)),await r.done}catch(n){if(n instanceof jr)lo.warn(n.message);else{const r=cs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lo.warn(r.message)}}}function eC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=1024,tM=30*24*60*60*1e3;class nM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Hw();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=tM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Hw(),{heartbeatsToSend:r,unsentEntries:i}=rM(this._heartbeatsCache.heartbeats),s=ud(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Hw(){return new Date().toISOString().substring(0,10)}function rM(t,e=eM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),qw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HI()?qI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ww(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ww(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qw(t){return ud(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){Vr(new Er("platform-logger",e=>new vO(e),"PRIVATE")),Vr(new Er("heartbeat",e=>new nM(e),"PRIVATE")),qn(lg,Bw,t),qn(lg,Bw,"esm2017"),qn("fire-js","")}sM("");var oM="firebase",aM="10.12.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(oM,aM,"app");const tC="@firebase/installations",ry="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=1e4,rC=`w:${ry}`,iC="FIS_v2",lM="https://firebaseinstallations.googleapis.com/v1",uM=60*60*1e3,cM="installations",hM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},uo=new Ao(cM,hM,dM);function sC(t){return t instanceof jr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC({projectId:t}){return`${lM}/projects/${t}/installations`}function aC(t){return{token:t.token,requestStatus:2,expiresIn:pM(t.expiresIn),creationTime:Date.now()}}async function lC(t,e){const r=(await e.json()).error;return uo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function uC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function fM(t,{refreshToken:e}){const n=uC(t);return n.append("Authorization",mM(e)),n}async function cC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function pM(t){return Number(t.replace("s","000"))}function mM(t){return`${iC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=oC(t),i=uC(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:iC,appId:t.appId,sdkVersion:rC},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await cC(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:aC(c.authToken)}}else throw await lC("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=/^[cdef][\w-]{21}$/,hg="";function vM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=wM(t);return yM.test(n)?n:hg}catch{return hg}}function wM(t){return _M(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=new Map;function fC(t,e){const n=lf(t);pC(n,e),EM(n,e)}function pC(t,e){const n=dC.get(t);if(n)for(const r of n)r(e)}function EM(t,e){const n=TM();n&&n.postMessage({key:t,fid:e}),SM()}let Ys=null;function TM(){return!Ys&&"BroadcastChannel"in self&&(Ys=new BroadcastChannel("[Firebase] FID Change"),Ys.onmessage=t=>{pC(t.data.key,t.data.fid)}),Ys}function SM(){dC.size===0&&Ys&&(Ys.close(),Ys=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="firebase-installations-database",IM=1,co="firebase-installations-store";let jp=null;function iy(){return jp||(jp=YI(RM,IM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(co)}}})),jp}async function pd(t,e){const n=lf(t),i=(await iy()).transaction(co,"readwrite"),s=i.objectStore(co),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&fC(t,e.fid),e}async function mC(t){const e=lf(t),r=(await iy()).transaction(co,"readwrite");await r.objectStore(co).delete(e),await r.done}async function uf(t,e){const n=lf(t),i=(await iy()).transaction(co,"readwrite"),s=i.objectStore(co),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&fC(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sy(t){let e;const n=await uf(t.appConfig,r=>{const i=CM(r),s=AM(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===hg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function CM(t){const e=t||{fid:vM(),registrationStatus:0};return gC(e)}function AM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(uo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=PM(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:kM(t)}:{installationEntry:e}}async function PM(t,e){try{const n=await gM(t,e);return pd(t.appConfig,n)}catch(n){throw sC(n)&&n.customData.serverCode===409?await mC(t.appConfig):await pd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function kM(t){let e=await Kw(t.appConfig);for(;e.registrationStatus===1;)await hC(100),e=await Kw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await sy(t);return r||n}return e}function Kw(t){return uf(t,e=>{if(!e)throw uo.create("installation-not-found");return gC(e)})}function gC(t){return NM(t)?{fid:t.fid,registrationStatus:0}:t}function NM(t){return t.registrationStatus===1&&t.registrationTime+nC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM({appConfig:t,heartbeatServiceProvider:e},n){const r=xM(t,n),i=fM(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:rC,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await cC(()=>fetch(r,a));if(l.ok){const c=await l.json();return aC(c)}else throw await lC("Generate Auth Token",l)}function xM(t,{fid:e}){return`${oC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oy(t,e=!1){let n;const r=await uf(t.appConfig,s=>{if(!_C(s))throw uo.create("not-registered");const o=s.authToken;if(!e&&OM(o))return s;if(o.requestStatus===1)return n=DM(t,e),s;{if(!navigator.onLine)throw uo.create("app-offline");const a=VM(s);return n=LM(t,a),a}});return n?await n:r.authToken}async function DM(t,e){let n=await Gw(t.appConfig);for(;n.authToken.requestStatus===1;)await hC(100),n=await Gw(t.appConfig);const r=n.authToken;return r.requestStatus===0?oy(t,e):r}function Gw(t){return uf(t,e=>{if(!_C(e))throw uo.create("not-registered");const n=e.authToken;return FM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function LM(t,e){try{const n=await bM(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await pd(t.appConfig,r),n}catch(n){if(sC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await mC(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await pd(t.appConfig,r)}throw n}}function _C(t){return t!==void 0&&t.registrationStatus===2}function OM(t){return t.requestStatus===2&&!MM(t)}function MM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+uM}function VM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function FM(t){return t.requestStatus===1&&t.requestTime+nC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(t){const e=t,{installationEntry:n,registrationPromise:r}=await sy(e);return r?r.catch(console.error):oy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(t,e=!1){const n=t;return await $M(n),(await oy(n,e)).token}async function $M(t){const{registrationPromise:e}=await sy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t){if(!t||!t.options)throw $p("App Configuration");if(!t.name)throw $p("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw $p(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function $p(t){return uo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="installations",zM="installations-internal",WM=t=>{const e=t.getProvider("app").getImmediate(),n=BM(e),r=oc(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},HM=t=>{const e=t.getProvider("app").getImmediate(),n=oc(e,yC).getImmediate();return{getId:()=>UM(n),getToken:i=>jM(n,i)}};function qM(){Vr(new Er(yC,WM,"PUBLIC")),Vr(new Er(zM,HM,"PRIVATE"))}qM();qn(tC,ry);qn(tC,ry,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="analytics",KM="firebase_id",GM="origin",QM=60*1e3,YM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ay="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new sc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},yr=new Ao("analytics","Analytics",XM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){if(!t.startsWith(ay)){const e=yr.create("invalid-gtag-resource",{gtagURL:t});return Kn.warn(e.message),""}return t}function vC(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function ZM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function e2(t,e){const n=ZM("firebase-js-sdk-policy",{createScriptURL:JM}),r=document.createElement("script"),i=`${ay}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function t2(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function n2(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await vC(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Kn.error(a)}t("config",i,s)}async function r2(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await vC(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Kn.error(s)}}function i2(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await r2(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await n2(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Kn.error(a)}}return i}function s2(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=i2(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function o2(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ay)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=30,l2=1e3;class u2{constructor(e={},n=l2){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wC=new u2;function c2(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function h2(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:c2(r)},s=YM.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw yr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function d2(t,e=wC,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw yr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw yr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new m2;return setTimeout(async()=>{a.abort()},QM),EC({appId:r,apiKey:i,measurementId:s},o,a,e)}async function EC(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=wC){var s;const{appId:o,measurementId:a}=t;try{await f2(r,e)}catch(l){if(a)return Kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await h2(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!p2(c)){if(i.deleteThrottleMetadata(o),a)return Kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?Fw(n,i.intervalMillis,a2):Fw(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,d),Kn.debug(`Calling attemptFetch again in ${h} millis`),EC(t,d,r,i)}}function f2(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(yr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function p2(t){if(!(t instanceof jr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class m2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function g2(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(){if(HI())try{await qI()}catch(t){return Kn.warn(yr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Kn.warn(yr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function y2(t,e,n,r,i,s,o){var a;const l=d2(t);l.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&Kn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Kn.error(_)),e.push(l);const c=_2().then(_=>{if(_)return r.getId()}),[h,d]=await Promise.all([l,c]);o2(s)||e2(s,h.measurementId),i("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[GM]="firebase",p.update=!0,d!=null&&(p[KM]=d),i("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.app=e}_delete(){return delete ou[this.app.options.appId],Promise.resolve()}}let ou={},Yw=[];const Xw={};let Bp="dataLayer",w2="gtag",Jw,TC,Zw=!1;function E2(){const t=[];if(BI()&&t.push("This is a browser extension environment."),UL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=yr.create("invalid-analytics-context",{errorInfo:e});Kn.warn(n.message)}}function T2(t,e,n){E2();const r=t.options.appId;if(!r)throw yr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw yr.create("no-api-key");if(ou[r]!=null)throw yr.create("already-exists",{id:r});if(!Zw){t2(Bp);const{wrappedGtag:s,gtagCore:o}=s2(ou,Yw,Xw,Bp,w2);TC=s,Jw=o,Zw=!0}return ou[r]=y2(t,Yw,Xw,e,Jw,Bp,n),new v2(t)}function S2(t,e,n,r){t=Pn(t),g2(TC,ou[t.app.options.appId],e,n,r).catch(i=>Kn.error(i))}const eE="@firebase/analytics",tE="0.10.5";function R2(){Vr(new Er(Qw,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return T2(r,i,n)},"PUBLIC")),Vr(new Er("analytics-internal",t,"PRIVATE")),qn(eE,tE),qn(eE,tE,"esm2017");function t(e){try{const n=e.getProvider(Qw).getImmediate();return{logEvent:(r,i,s)=>S2(n,r,i,s)}}catch(n){throw yr.create("interop-component-reg-failed",{reason:n})}}}R2();function ly(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function SC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const I2=SC,RC=new Ao("auth","Firebase",SC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new sc("@firebase/auth");function C2(t,...e){md.logLevel<=Ue.WARN&&md.warn(`Auth (${Po}): ${t}`,...e)}function Ph(t,...e){md.logLevel<=Ue.ERROR&&md.error(`Auth (${Po}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,...e){throw uy(t,...e)}function Jr(t,...e){return uy(t,...e)}function IC(t,e,n){const r=Object.assign(Object.assign({},I2()),{[e]:n});return new Ao("auth","Firebase",r).create(e,{appName:t.name})}function Si(t){return IC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return RC.create(t,...e)}function Ie(t,e,...n){if(!t)throw uy(e,...n)}function _i(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ph(e),new Error(e)}function ki(t,e){t||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function A2(){return nE()==="http:"||nE()==="https:"}function nE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A2()||BI()||"connection"in navigator)?navigator.onLine:!0}function k2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,ki(n>e,"Short delay should be less than long delay!"),this.isMobile=ty()||zI()}get(){return P2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e){ki(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new ac(3e4,6e4);function As(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ps(t,e,n,r,i={}){return AC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Za(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),CC.fetch()(PC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function AC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},N2),e);try{const i=new D2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw rh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw rh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw rh(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw IC(t,h,c);Fr(t,h)}}catch(i){if(i instanceof jr)throw i;Fr(t,"network-request-failed",{message:String(i)})}}async function lc(t,e,n,r,i={}){const s=await Ps(t,e,n,r,i);return"mfaPendingCredential"in s&&Fr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function PC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?cy(t.config,i):`${t.config.apiScheme}://${i}`}function x2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class D2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jr(this.auth,"network-request-failed")),b2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Jr(t,e,r);return i.customData._tokenResponse=n,i}function rE(t){return t!==void 0&&t.enterprise!==void 0}class L2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return x2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function O2(t,e){return Ps(t,"GET","/v2/recaptchaConfig",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(t,e){return Ps(t,"POST","/v1/accounts:delete",e)}async function kC(t,e){return Ps(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V2(t,e=!1){const n=Pn(t),r=await n.getIdToken(e),i=hy(r);Ie(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:au(zp(i.auth_time)),issuedAtTime:au(zp(i.iat)),expirationTime:au(zp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zp(t){return Number(t)*1e3}function hy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ph("JWT malformed, contained fewer than 3 sections"),null;try{const i=cd(n);return i?JSON.parse(i):(Ph("Failed to decode base64 JWT payload"),null)}catch(i){return Ph("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iE(t){const e=hy(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jr&&F2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function F2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await $u(t,kC(n,{idToken:r}));Ie(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?NC(s.providerUserInfo):[],a=$2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fg(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function j2(t){const e=Pn(t);await gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NC(t){return t.map(e=>{var{providerId:n}=e,r=ly(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(t,e){const n=await AC(t,{},async()=>{const r=Za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=PC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",CC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function z2(t,e){return Ps(t,"POST","/v2/accounts:revokeToken",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=iE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await B2(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new _a;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _a,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ly(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new U2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await $u(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return V2(this,e)}reload(){return j2(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kr(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await $u(this,M2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,R=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:M,isAnonymous:z,providerData:k,stsTokenManager:T}=n;Ie(I&&T,e,"internal-error");const v=_a.fromJSON(this.name,T);Ie(typeof I=="string",e,"internal-error"),$i(d,e.name),$i(p,e.name),Ie(typeof M=="boolean",e,"internal-error"),Ie(typeof z=="boolean",e,"internal-error"),$i(_,e.name),$i(y,e.name),$i(S,e.name),$i(b,e.name),$i(R,e.name),$i(g,e.name);const E=new yi({uid:I,auth:e,email:p,emailVerified:M,displayName:d,isAnonymous:z,photoURL:y,phoneNumber:_,tenantId:S,stsTokenManager:v,createdAt:R,lastLoginAt:g});return k&&Array.isArray(k)&&(E.providerData=k.map(A=>Object.assign({},A))),b&&(E._redirectEventId=b),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new _a;i.updateFromServerResponse(n);const s=new yi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await gd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ie(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?NC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new _a;a.updateFromIdToken(r);const l=new yi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new fg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;function vi(t){ki(t instanceof Function,"Expected a class definition");let e=sE.get(t);return e?(ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bC.type="NONE";const oE=bC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t,e,n){return`firebase:${t}:${e}:${n}`}class ya{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=kh(this.userKey,i.apiKey,s),this.fullPersistenceKey=kh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?yi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ya(vi(oE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||vi(oE);const o=kh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=yi._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ya(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ya(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MC(e))return"Blackberry";if(VC(e))return"Webos";if(dy(e))return"Safari";if((e.includes("chrome/")||DC(e))&&!e.includes("edge/"))return"Chrome";if(OC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xC(t=fn()){return/firefox\//i.test(t)}function dy(t=fn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DC(t=fn()){return/crios\//i.test(t)}function LC(t=fn()){return/iemobile/i.test(t)}function OC(t=fn()){return/android/i.test(t)}function MC(t=fn()){return/blackberry/i.test(t)}function VC(t=fn()){return/webos/i.test(t)}function cf(t=fn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function W2(t=fn()){var e;return cf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function H2(){return VL()&&document.documentMode===10}function FC(t=fn()){return cf(t)||OC(t)||VC(t)||MC(t)||/windows phone/i.test(t)||LC(t)}function q2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t,e=[]){let n;switch(t){case"Browser":n=aE(fn());break;case"Worker":n=`${aE(fn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(t,e={}){return Ps(t,"GET","/v2/passwordPolicy",As(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=6;class Y2{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Q2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lE(this),this.idTokenSubscription=new lE(this),this.beforeStateQueue=new K2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ya.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kC(this,{idToken:e}),r=await yi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=k2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kr(this.app))return Promise.reject(Si(this));const n=e?Pn(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kr(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kr(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await G2(this),n=new Y2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await z2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vi(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await ya.create(this,[vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&C2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ko(t){return Pn(t)}class lE{constructor(e){this.auth=e,this.observer=null,this.addObserver=qL(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function J2(t){hf=t}function jC(t){return hf.loadJS(t)}function Z2(){return hf.recaptchaEnterpriseScript}function eV(){return hf.gapiScript}function tV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const nV="recaptcha-enterprise",rV="NO_RECAPTCHA";class iV{constructor(e){this.type=nV,this.auth=ko(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{O2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new L2(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;rE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(rV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&rE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Z2();l.length!==0&&(l+=a),jC(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function uE(t,e,n,r=!1){const i=new iV(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function pg(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await uE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await uE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t,e){const n=oc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(dd(s,e??{}))return i;Fr(i,"already-initialized")}return n.initialize({options:e})}function oV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aV(t,e,n){const r=ko(t);Ie(r._canInitEmulator,r,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=$C(e),{host:o,port:a}=lV(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),uV()}function $C(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lV(t){const e=$C(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:cE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:cE(o)}}}function cE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,n){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function cV(t,e){return Ps(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hV(t,e){return lc(t,"POST","/v1/accounts:signInWithPassword",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(t,e){return lc(t,"POST","/v1/accounts:signInWithEmailLink",As(t,e))}async function fV(t,e){return lc(t,"POST","/v1/accounts:signInWithEmailLink",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends fy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Bu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pg(e,n,"signInWithPassword",hV);case"emailLink":return dV(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pg(e,r,"signUpPassword",cV);case"emailLink":return fV(e,{idToken:n,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t,e){return lc(t,"POST","/v1/accounts:signInWithIdp",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="http://localhost";class ho extends fy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ly(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ho(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return va(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,va(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,va(e,n)}buildRequest(){const e={requestUri:pV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Za(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gV(t){const e=Wl(Hl(t)).link,n=e?Wl(Hl(e)).deep_link_id:null,r=Wl(Hl(t)).deep_link_id;return(r?Wl(Hl(r)).link:null)||r||n||e||t}class py{constructor(e){var n,r,i,s,o,a;const l=Wl(Hl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=mV((i=l.mode)!==null&&i!==void 0?i:null);Ie(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=gV(e);try{return new py(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.providerId=el.PROVIDER_ID}static credential(e,n){return Bu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=py.parseLink(n);return Ie(r,"argument-error"),Bu._fromEmailAndCode(e,r.code,r.tenantId)}}el.PROVIDER_ID="password";el.EMAIL_PASSWORD_SIGN_IN_METHOD="password";el.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends BC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends uc{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ho._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Qi.credential(n,r)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends uc{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.GITHUB_SIGN_IN_METHOD="github.com";Yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends uc{constructor(){super("twitter.com")}static credential(e,n){return ho._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xi.credential(n,r)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(t,e){return lc(t,"POST","/v1/accounts:signUp",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await yi._fromIdTokenResponse(e,r,i),o=hE(r);return new fo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=hE(r);return new fo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function hE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends jr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_d.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _d(e,n,r,i)}}function zC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_d._fromErrorAndOperation(t,s,e,r):s})}async function yV(t,e,n=!1){const r=await $u(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(t,e,n=!1){const{auth:r}=t;if(Kr(r.app))return Promise.reject(Si(r));const i="reauthenticate";try{const s=await $u(t,zC(r,i,e,t),n);Ie(s.idToken,r,"internal-error");const o=hy(s.idToken);Ie(o,r,"internal-error");const{sub:a}=o;return Ie(t.uid===a,r,"user-mismatch"),fo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(t,e,n=!1){if(Kr(t.app))return Promise.reject(Si(t));const r="signIn",i=await zC(t,r,e),s=await fo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function wV(t,e){return WC(ko(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(t){const e=ko(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EV(t,e,n){if(Kr(t.app))return Promise.reject(Si(t));const r=ko(t),o=await pg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_V).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&HC(t),l}),a=await fo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function TV(t,e,n){return Kr(t.app)?Promise.reject(Si(t)):wV(Pn(t),el.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&HC(t),r})}function SV(t,e,n,r){return Pn(t).onIdTokenChanged(e,n,r)}function RV(t,e,n){return Pn(t).beforeAuthStateChanged(e,n)}const yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yd,"1"),this.storage.removeItem(yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(){const t=fn();return dy(t)||cf(t)}const CV=1e3,AV=10;class KC extends qC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=IV()&&q2(),this.fallbackToPolling=FC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);H2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,AV):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KC.type="LOCAL";const PV=KC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC extends qC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GC.type="SESSION";const QC=GC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new df(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await kV(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=my("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return window}function bV(t){Zr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(){return typeof Zr().WorkerGlobalScope<"u"&&typeof Zr().importScripts=="function"}async function xV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LV(){return YC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="firebaseLocalStorageDb",OV=1,vd="firebaseLocalStorage",JC="fbase_key";class cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ff(t,e){return t.transaction([vd],e?"readwrite":"readonly").objectStore(vd)}function MV(){const t=indexedDB.deleteDatabase(XC);return new cc(t).toPromise()}function mg(){const t=indexedDB.open(XC,OV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vd,{keyPath:JC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vd)?e(r):(r.close(),await MV(),e(await mg()))})})}async function dE(t,e,n){const r=ff(t,!0).put({[JC]:e,value:n});return new cc(r).toPromise()}async function VV(t,e){const n=ff(t,!1).get(e),r=await new cc(n).toPromise();return r===void 0?null:r.value}function fE(t,e){const n=ff(t,!0).delete(e);return new cc(n).toPromise()}const FV=800,UV=3;class ZC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>UV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=df._getInstance(LV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xV(),!this.activeServiceWorker)return;this.sender=new NV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mg();return await dE(e,yd,"1"),await fE(e,yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>VV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ff(i,!1).getAll();return new cc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZC.type="LOCAL";const jV=ZC;new ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t,e){return e?vi(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy extends fy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return va(e,this._buildIdpRequest())}_linkToIdToken(e,n){return va(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return va(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BV(t){return WC(t.auth,new gy(t),t.bypassAuthState)}function zV(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),vV(n,new gy(t),t.bypassAuthState)}async function WV(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),yV(n,new gy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BV;case"linkViaPopup":case"linkViaRedirect":return WV;case"reauthViaPopup":case"reauthViaRedirect":return zV;default:Fr(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=new ac(2e3,1e4);class la extends eA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=my();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HV.get())};e()}}la.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="pendingRedirect",Nh=new Map;class KV extends eA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nh.get(this.auth._key());if(!e){try{const r=await GV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nh.set(this.auth._key(),e)}return this.bypassAuthState||Nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GV(t,e){const n=XV(e),r=YV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function QV(t,e){Nh.set(t._key(),e)}function YV(t){return vi(t._redirectPersistence)}function XV(t){return kh(qV,t.config.apiKey,t.name)}async function JV(t,e,n=!1){if(Kr(t.app))return Promise.reject(Si(t));const r=ko(t),i=$V(r,e),o=await new KV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=10*60*1e3;class eF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZV&&this.cachedEventUids.clear(),this.cachedEventUids.has(pE(e))}saveEventToCache(e){this.cachedEventUids.add(pE(e)),this.lastProcessedEventTime=Date.now()}}function pE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(t,e={}){return Ps(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iF=/^https?/;async function sF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nF(t);for(const n of e)try{if(oF(n))return}catch{}Fr(t,"unauthorized-domain")}function oF(t){const e=dg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iF.test(n))return!1;if(rF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=new ac(3e4,6e4);function mE(){const t=Zr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lF(t){return new Promise((e,n)=>{var r,i,s;function o(){mE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mE(),n(Jr(t,"network-request-failed"))},timeout:aF.get()})}if(!((i=(r=Zr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Zr().gapi)===null||s===void 0)&&s.load)o();else{const a=tV("iframefcb");return Zr()[a]=()=>{gapi.load?o():n(Jr(t,"network-request-failed"))},jC(`${eV()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw bh=null,e})}let bh=null;function uF(t){return bh=bh||lF(t),bh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=new ac(5e3,15e3),hF="__/auth/iframe",dF="emulator/auth/iframe",fF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mF(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cy(e,dF):`https://${t.config.authDomain}/${hF}`,r={apiKey:e.apiKey,appName:t.name,v:Po},i=pF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Za(r).slice(1)}`}async function gF(t){const e=await uF(t),n=Zr().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:mF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Jr(t,"network-request-failed"),a=Zr().setTimeout(()=>{s(o)},cF.get());function l(){Zr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yF=500,vF=600,wF="_blank",EF="http://localhost";class gE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TF(t,e,n,r=yF,i=vF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},_F),{width:r.toString(),height:i.toString(),top:s,left:o}),c=fn().toLowerCase();n&&(a=DC(c)?wF:n),xC(c)&&(e=e||EF,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[_,y])=>`${p}${_}=${y},`,"");if(W2(c)&&a!=="_self")return SF(e||"",a),new gE(null);const d=window.open(e||"",a,h);Ie(d,t,"popup-blocked");try{d.focus()}catch{}return new gE(d)}function SF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="__/auth/handler",IF="emulator/auth/handler",CF=encodeURIComponent("fac");async function _E(t,e,n,r,i,s){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Po,eventId:i};if(e instanceof BC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof uc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${CF}=${encodeURIComponent(l)}`:"";return`${AF(t)}?${Za(a).slice(1)}${c}`}function AF({config:t}){return t.emulator?cy(t,IF):`https://${t.authDomain}/${RF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="webStorageSupport";class PF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QC,this._completeRedirectFn=JV,this._overrideRedirectResult=QV}async _openPopup(e,n,r,i){var s;ki((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await _E(e,n,r,dg(),i);return TF(e,o,my())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await _E(e,n,r,dg(),i);return bV(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ki(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gF(e),r=new eF(e);return n.register("authEvent",i=>(Ie(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wp,{type:Wp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Wp];o!==void 0&&n(!!o),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return FC()||dy()||cf()}}const kF=PF;var yE="@firebase/auth",vE="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xF(t){Vr(new Er("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UC(t)},c=new X2(r,i,s,l);return oV(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vr(new Er("auth-internal",e=>{const n=ko(e.getProvider("auth").getImmediate());return(r=>new NF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(yE,vE,bF(t)),qn(yE,vE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=5*60,LF=$I("authIdTokenMaxAge")||DF;let wE=null;const OF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LF)return;const i=n==null?void 0:n.token;wE!==i&&(wE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function MF(t=JI()){const e=oc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sV(t,{popupRedirectResolver:kF,persistence:[jV,PV,QC]}),r=$I("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=OF(s.toString());RV(n,o,()=>o(n.currentUser)),SV(n,a=>o(a))}}const i=UI("auth");return i&&aV(n,`http://${i}`),n}function VF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}J2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Jr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",VF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xF("Browser");var EE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var to,nA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(A,P,D){for(var C=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)C[Ae-2]=arguments[Ae];return v.prototype[P].apply(A,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var A=Array(16);if(typeof v=="string")for(var P=0;16>P;++P)A[P]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(P=0;16>P;++P)A[P]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],P=T.g[2];var D=T.g[3],C=v+(D^E&(P^D))+A[0]+3614090360&4294967295;v=E+(C<<7&4294967295|C>>>25),C=D+(P^v&(E^P))+A[1]+3905402710&4294967295,D=v+(C<<12&4294967295|C>>>20),C=P+(E^D&(v^E))+A[2]+606105819&4294967295,P=D+(C<<17&4294967295|C>>>15),C=E+(v^P&(D^v))+A[3]+3250441966&4294967295,E=P+(C<<22&4294967295|C>>>10),C=v+(D^E&(P^D))+A[4]+4118548399&4294967295,v=E+(C<<7&4294967295|C>>>25),C=D+(P^v&(E^P))+A[5]+1200080426&4294967295,D=v+(C<<12&4294967295|C>>>20),C=P+(E^D&(v^E))+A[6]+2821735955&4294967295,P=D+(C<<17&4294967295|C>>>15),C=E+(v^P&(D^v))+A[7]+4249261313&4294967295,E=P+(C<<22&4294967295|C>>>10),C=v+(D^E&(P^D))+A[8]+1770035416&4294967295,v=E+(C<<7&4294967295|C>>>25),C=D+(P^v&(E^P))+A[9]+2336552879&4294967295,D=v+(C<<12&4294967295|C>>>20),C=P+(E^D&(v^E))+A[10]+4294925233&4294967295,P=D+(C<<17&4294967295|C>>>15),C=E+(v^P&(D^v))+A[11]+2304563134&4294967295,E=P+(C<<22&4294967295|C>>>10),C=v+(D^E&(P^D))+A[12]+1804603682&4294967295,v=E+(C<<7&4294967295|C>>>25),C=D+(P^v&(E^P))+A[13]+4254626195&4294967295,D=v+(C<<12&4294967295|C>>>20),C=P+(E^D&(v^E))+A[14]+2792965006&4294967295,P=D+(C<<17&4294967295|C>>>15),C=E+(v^P&(D^v))+A[15]+1236535329&4294967295,E=P+(C<<22&4294967295|C>>>10),C=v+(P^D&(E^P))+A[1]+4129170786&4294967295,v=E+(C<<5&4294967295|C>>>27),C=D+(E^P&(v^E))+A[6]+3225465664&4294967295,D=v+(C<<9&4294967295|C>>>23),C=P+(v^E&(D^v))+A[11]+643717713&4294967295,P=D+(C<<14&4294967295|C>>>18),C=E+(D^v&(P^D))+A[0]+3921069994&4294967295,E=P+(C<<20&4294967295|C>>>12),C=v+(P^D&(E^P))+A[5]+3593408605&4294967295,v=E+(C<<5&4294967295|C>>>27),C=D+(E^P&(v^E))+A[10]+38016083&4294967295,D=v+(C<<9&4294967295|C>>>23),C=P+(v^E&(D^v))+A[15]+3634488961&4294967295,P=D+(C<<14&4294967295|C>>>18),C=E+(D^v&(P^D))+A[4]+3889429448&4294967295,E=P+(C<<20&4294967295|C>>>12),C=v+(P^D&(E^P))+A[9]+568446438&4294967295,v=E+(C<<5&4294967295|C>>>27),C=D+(E^P&(v^E))+A[14]+3275163606&4294967295,D=v+(C<<9&4294967295|C>>>23),C=P+(v^E&(D^v))+A[3]+4107603335&4294967295,P=D+(C<<14&4294967295|C>>>18),C=E+(D^v&(P^D))+A[8]+1163531501&4294967295,E=P+(C<<20&4294967295|C>>>12),C=v+(P^D&(E^P))+A[13]+2850285829&4294967295,v=E+(C<<5&4294967295|C>>>27),C=D+(E^P&(v^E))+A[2]+4243563512&4294967295,D=v+(C<<9&4294967295|C>>>23),C=P+(v^E&(D^v))+A[7]+1735328473&4294967295,P=D+(C<<14&4294967295|C>>>18),C=E+(D^v&(P^D))+A[12]+2368359562&4294967295,E=P+(C<<20&4294967295|C>>>12),C=v+(E^P^D)+A[5]+4294588738&4294967295,v=E+(C<<4&4294967295|C>>>28),C=D+(v^E^P)+A[8]+2272392833&4294967295,D=v+(C<<11&4294967295|C>>>21),C=P+(D^v^E)+A[11]+1839030562&4294967295,P=D+(C<<16&4294967295|C>>>16),C=E+(P^D^v)+A[14]+4259657740&4294967295,E=P+(C<<23&4294967295|C>>>9),C=v+(E^P^D)+A[1]+2763975236&4294967295,v=E+(C<<4&4294967295|C>>>28),C=D+(v^E^P)+A[4]+1272893353&4294967295,D=v+(C<<11&4294967295|C>>>21),C=P+(D^v^E)+A[7]+4139469664&4294967295,P=D+(C<<16&4294967295|C>>>16),C=E+(P^D^v)+A[10]+3200236656&4294967295,E=P+(C<<23&4294967295|C>>>9),C=v+(E^P^D)+A[13]+681279174&4294967295,v=E+(C<<4&4294967295|C>>>28),C=D+(v^E^P)+A[0]+3936430074&4294967295,D=v+(C<<11&4294967295|C>>>21),C=P+(D^v^E)+A[3]+3572445317&4294967295,P=D+(C<<16&4294967295|C>>>16),C=E+(P^D^v)+A[6]+76029189&4294967295,E=P+(C<<23&4294967295|C>>>9),C=v+(E^P^D)+A[9]+3654602809&4294967295,v=E+(C<<4&4294967295|C>>>28),C=D+(v^E^P)+A[12]+3873151461&4294967295,D=v+(C<<11&4294967295|C>>>21),C=P+(D^v^E)+A[15]+530742520&4294967295,P=D+(C<<16&4294967295|C>>>16),C=E+(P^D^v)+A[2]+3299628645&4294967295,E=P+(C<<23&4294967295|C>>>9),C=v+(P^(E|~D))+A[0]+4096336452&4294967295,v=E+(C<<6&4294967295|C>>>26),C=D+(E^(v|~P))+A[7]+1126891415&4294967295,D=v+(C<<10&4294967295|C>>>22),C=P+(v^(D|~E))+A[14]+2878612391&4294967295,P=D+(C<<15&4294967295|C>>>17),C=E+(D^(P|~v))+A[5]+4237533241&4294967295,E=P+(C<<21&4294967295|C>>>11),C=v+(P^(E|~D))+A[12]+1700485571&4294967295,v=E+(C<<6&4294967295|C>>>26),C=D+(E^(v|~P))+A[3]+2399980690&4294967295,D=v+(C<<10&4294967295|C>>>22),C=P+(v^(D|~E))+A[10]+4293915773&4294967295,P=D+(C<<15&4294967295|C>>>17),C=E+(D^(P|~v))+A[1]+2240044497&4294967295,E=P+(C<<21&4294967295|C>>>11),C=v+(P^(E|~D))+A[8]+1873313359&4294967295,v=E+(C<<6&4294967295|C>>>26),C=D+(E^(v|~P))+A[15]+4264355552&4294967295,D=v+(C<<10&4294967295|C>>>22),C=P+(v^(D|~E))+A[6]+2734768916&4294967295,P=D+(C<<15&4294967295|C>>>17),C=E+(D^(P|~v))+A[13]+1309151649&4294967295,E=P+(C<<21&4294967295|C>>>11),C=v+(P^(E|~D))+A[4]+4149444226&4294967295,v=E+(C<<6&4294967295|C>>>26),C=D+(E^(v|~P))+A[11]+3174756917&4294967295,D=v+(C<<10&4294967295|C>>>22),C=P+(v^(D|~E))+A[2]+718787259&4294967295,P=D+(C<<15&4294967295|C>>>17),C=E+(D^(P|~v))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+D&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,A=this.B,P=this.h,D=0;D<v;){if(P==0)for(;D<=E;)i(this,T,D),D+=this.blockSize;if(typeof T=="string"){for(;D<v;)if(A[P++]=T.charCodeAt(D++),P==this.blockSize){i(this,A),P=0;break}}else for(;D<v;)if(A[P++]=T[D++],P==this.blockSize){i(this,A),P=0;break}}this.h=P,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var A=0;32>A;A+=8)T[E++]=this.g[v]>>>A&255;return T};function s(T,v){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function o(T,v){this.h=v;for(var E=[],A=!0,P=T.length-1;0<=P;P--){var D=T[P]|0;A&&D==v||(E[P]=D,A=!1)}this.g=E}var a={};function l(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return b(c(-T));for(var v=[],E=1,A=0;T>=E;A++)v[A]=T/E|0,E*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return b(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(v,8)),A=d,P=0;P<T.length;P+=8){var D=Math.min(8,T.length-P),C=parseInt(T.substring(P,P+D),v);8>D?(D=c(Math.pow(v,D)),A=A.j(D).add(c(C))):(A=A.j(E),A=A.add(c(C)))}return A}var d=l(0),p=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-b(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var A=this.i(E);T+=(0<=A?A:4294967296+A)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(S(this))return"-"+b(this).toString(T);for(var v=c(Math.pow(T,6)),E=this,A="";;){var P=M(E,v).g;E=R(E,P.j(v));var D=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=P,y(E))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function S(T){return T.h==-1}t.l=function(T){return T=R(this,T),S(T)?-1:y(T)?0:1};function b(T){for(var v=T.g.length,E=[],A=0;A<v;A++)E[A]=~T.g[A];return new o(E,~T.h).add(p)}t.abs=function(){return S(this)?b(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],A=0,P=0;P<=v;P++){var D=A+(this.i(P)&65535)+(T.i(P)&65535),C=(D>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);A=C>>>16,D&=65535,C&=65535,E[P]=C<<16|D}return new o(E,E[E.length-1]&-2147483648?-1:0)};function R(T,v){return T.add(b(v))}t.j=function(T){if(y(this)||y(T))return d;if(S(this))return S(T)?b(this).j(b(T)):b(b(this).j(T));if(S(T))return b(this.j(b(T)));if(0>this.l(_)&&0>T.l(_))return c(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],A=0;A<2*v;A++)E[A]=0;for(A=0;A<this.g.length;A++)for(var P=0;P<T.g.length;P++){var D=this.i(A)>>>16,C=this.i(A)&65535,Ae=T.i(P)>>>16,Nt=T.i(P)&65535;E[2*A+2*P]+=C*Nt,g(E,2*A+2*P),E[2*A+2*P+1]+=D*Nt,g(E,2*A+2*P+1),E[2*A+2*P+1]+=C*Ae,g(E,2*A+2*P+1),E[2*A+2*P+2]+=D*Ae,g(E,2*A+2*P+2)}for(A=0;A<v;A++)E[A]=E[2*A+1]<<16|E[2*A];for(A=v;A<2*v;A++)E[A]=0;return new o(E,0)};function g(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function I(T,v){this.g=T,this.h=v}function M(T,v){if(y(v))throw Error("division by zero");if(y(T))return new I(d,d);if(S(T))return v=M(b(T),v),new I(b(v.g),b(v.h));if(S(v))return v=M(T,b(v)),new I(b(v.g),v.h);if(30<T.g.length){if(S(T)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var E=p,A=v;0>=A.l(T);)E=z(E),A=z(A);var P=k(E,1),D=k(A,1);for(A=k(A,2),E=k(E,2);!y(A);){var C=D.add(A);0>=C.l(T)&&(P=P.add(E),D=C),A=k(A,1),E=k(E,1)}return v=R(T,P.j(v)),new I(P,v)}for(P=d;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),A=Math.ceil(Math.log(E)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=c(E),C=D.j(v);S(C)||0<C.l(T);)E-=A,D=c(E),C=D.j(v);y(D)&&(D=p),P=P.add(D),T=R(T,C)}return new I(P,T)}t.A=function(T){return M(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],A=0;A<v;A++)E[A]=this.i(A)&T.i(A);return new o(E,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],A=0;A<v;A++)E[A]=this.i(A)|T.i(A);return new o(E,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],A=0;A<v;A++)E[A]=this.i(A)^T.i(A);return new o(E,this.h^T.h)};function z(T){for(var v=T.g.length+1,E=[],A=0;A<v;A++)E[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(E,T.h)}function k(T,v){var E=v>>5;v%=32;for(var A=T.g.length-E,P=[],D=0;D<A;D++)P[D]=0<v?T.i(D+E)>>>v|T.i(D+E+1)<<32-v:T.i(D+E);return new o(P,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,to=o}).apply(typeof EE<"u"?EE:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rA,iA,ql,sA,xh,gg,oA,aA,lA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var V=u[w];if(!(V in m))break e;m=m[V]}u=u[u.length-1],w=m[u],f=f(w),f!=w&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,w=!1,V={next:function(){if(!w&&m<u.length){var $=m++;return{value:f($,u[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,w),u.apply(f,V)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function _(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(w,V,$){for(var te=Array(arguments.length-2),it=2;it<arguments.length;it++)te[it-2]=arguments[it];return f.prototype[V].apply(w,te)}}function S(u){const f=u.length;if(0<f){const m=Array(f);for(let w=0;w<f;w++)m[w]=u[w];return m}return[]}function b(u,f){for(let m=1;m<arguments.length;m++){const w=arguments[m];if(l(w)){const V=u.length||0,$=w.length||0;u.length=V+$;for(let te=0;te<$;te++)u[V+te]=w[te]}else u.push(w)}}class R{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function g(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function M(u){return M[" "](u),u}M[" "]=function(){};var z=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function k(u,f,m){for(const w in u)f.call(m,u[w],w,u)}function T(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function v(u){const f={};for(const m in u)f[m]=u[m];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let m,w;for(let V=1;V<arguments.length;V++){w=arguments[V];for(m in w)u[m]=w[m];for(let $=0;$<E.length;$++)m=E[$],Object.prototype.hasOwnProperty.call(w,m)&&(u[m]=w[m])}}function P(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function D(u){a.setTimeout(()=>{throw u},0)}function C(){var u=de;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Ae{constructor(){this.h=this.g=null}add(f,m){const w=Nt.get();w.set(f,m),this.h?this.h.next=w:this.g=w,this.h=w}}var Nt=new R(()=>new St,u=>u.reset());class St{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,J=!1,de=new Ae,Z=()=>{const u=a.Promise.resolve(void 0);Le=()=>{u.then(le)}};var le=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){D(m)}var f=Nt;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}J=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function ce(u,f){if(H.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(z){e:{try{M(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ie[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ce.aa.h.call(this)}}y(ce,H);var ie={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function ge(u,f,m,w,V){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!w,this.ha=V,this.key=++Ne,this.da=this.fa=!1}function Ye(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ot(u){this.src=u,this.g={},this.h=0}ot.prototype.add=function(u,f,m,w,V){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var te=Be(u,f,w,V);return-1<te?(f=u[te],m||(f.fa=!1)):(f=new ge(f,this.src,$,!!w,V),f.fa=m,u.push(f)),f};function Se(u,f){var m=f.type;if(m in u.g){var w=u.g[m],V=Array.prototype.indexOf.call(w,f,void 0),$;($=0<=V)&&Array.prototype.splice.call(w,V,1),$&&(Ye(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Be(u,f,m,w){for(var V=0;V<u.length;++V){var $=u[V];if(!$.da&&$.listener==f&&$.capture==!!m&&$.ha==w)return V}return-1}var Yt="closure_lm_"+(1e6*Math.random()|0),Yn={};function Rt(u,f,m,w,V){if(Array.isArray(f)){for(var $=0;$<f.length;$++)Rt(u,f[$],m,w,V);return null}return m=hr(m),u&&u[Te]?u.K(f,m,c(w)?!!w.capture:!!w,V):sn(u,f,m,!1,w,V)}function sn(u,f,m,w,V,$){if(!f)throw Error("Invalid event type");var te=c(V)?!!V.capture:!!V,it=Ls(u);if(it||(u[Yt]=it=new ot(u)),m=it.add(f,m,w,te,$),m.proxy)return m;if(w=Vo(),m.proxy=w,w.src=u,w.listener=m,u.addEventListener)Q||(V=te),V===void 0&&(V=!1),u.addEventListener(f.toString(),w,V);else if(u.attachEvent)u.attachEvent(Ds(f.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Vo(){function u(m){return f.call(u.src,u.listener,m)}const f=Fo;return u}function xs(u,f,m,w,V){if(Array.isArray(f))for(var $=0;$<f.length;$++)xs(u,f[$],m,w,V);else w=c(w)?!!w.capture:!!w,m=hr(m),u&&u[Te]?(u=u.i,f=String(f).toString(),f in u.g&&($=u.g[f],m=Be($,m,w,V),-1<m&&(Ye($[m]),Array.prototype.splice.call($,m,1),$.length==0&&(delete u.g[f],u.h--)))):u&&(u=Ls(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Be(f,m,w,V)),(m=-1<u?f[u]:null)&&ai(m))}function ai(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Te])Se(f.i,u);else{var m=u.type,w=u.proxy;f.removeEventListener?f.removeEventListener(m,w,u.capture):f.detachEvent?f.detachEvent(Ds(m),w):f.addListener&&f.removeListener&&f.removeListener(w),(m=Ls(f))?(Se(m,u),m.h==0&&(m.src=null,f[Yt]=null)):Ye(u)}}}function Ds(u){return u in Yn?Yn[u]:Yn[u]="on"+u}function Fo(u,f){if(u.da)u=!0;else{f=new ce(f,this);var m=u.listener,w=u.ha||u.src;u.fa&&ai(u),u=m.call(w,f)}return u}function Ls(u){return u=u[Yt],u instanceof ot?u:null}var Xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function hr(u){return typeof u=="function"?u:(u[Xn]||(u[Xn]=function(f){return u.handleEvent(f)}),u[Xn])}function Ot(){O.call(this),this.i=new ot(this),this.M=this,this.F=null}y(Ot,O),Ot.prototype[Te]=!0,Ot.prototype.removeEventListener=function(u,f,m,w){xs(this,u,f,m,w)};function Mt(u,f){var m,w=u.F;if(w)for(m=[];w;w=w.F)m.push(w);if(u=u.M,w=f.type||f,typeof f=="string")f=new H(f,u);else if(f instanceof H)f.target=f.target||u;else{var V=f;f=new H(w,u),A(f,V)}if(V=!0,m)for(var $=m.length-1;0<=$;$--){var te=f.g=m[$];V=Nn(te,w,!0,f)&&V}if(te=f.g=u,V=Nn(te,w,!0,f)&&V,V=Nn(te,w,!1,f)&&V,m)for($=0;$<m.length;$++)te=f.g=m[$],V=Nn(te,w,!1,f)&&V}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],w=0;w<m.length;w++)Ye(m[w]);delete u.g[f],u.h--}}this.F=null},Ot.prototype.K=function(u,f,m,w){return this.i.add(String(u),f,!1,m,w)},Ot.prototype.L=function(u,f,m,w){return this.i.add(String(u),f,!0,m,w)};function Nn(u,f,m,w){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,$=0;$<f.length;++$){var te=f[$];if(te&&!te.da&&te.capture==m){var it=te.listener,on=te.ha||te.src;te.fa&&Se(u.i,te),V=it.call(on,w)!==!1&&V}}return V&&!w.defaultPrevented}function Mn(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Os(u){u.g=Mn(()=>{u.g=null,u.i&&(u.i=!1,Os(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Oi extends O{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Os(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(u){O.call(this),this.h=u,this.g={}}y($r,O);var Jn=[];function Ms(u){k(u.g,function(f,m){this.g.hasOwnProperty(m)&&ai(f)},u),u.g={}}$r.prototype.N=function(){$r.aa.N.call(this),Ms(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var F=a.JSON.stringify,L=a.JSON.parse,q=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ne(){}ne.prototype.h=null;function ee(u){return u.h||(u.h=u.i())}function oe(){}var fe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pe(){H.call(this,"d")}y(pe,H);function _e(){H.call(this,"c")}y(_e,H);var Re={},Je=null;function Vt(){return Je=Je||new Ot}Re.La="serverreachability";function vt(u){H.call(this,Re.La,u)}y(vt,H);function bt(u){const f=Vt();Mt(f,new vt(f))}Re.STAT_EVENT="statevent";function Ht(u,f){H.call(this,Re.STAT_EVENT,u),this.stat=f}y(Ht,H);function wt(u){const f=Vt();Mt(f,new Ht(f,u))}Re.Ma="timingevent";function li(u,f){H.call(this,Re.Ma,u),this.size=f}y(li,H);function N(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function x(){this.g=!0}x.prototype.xa=function(){this.g=!1};function j(u,f,m,w,V,$){u.info(function(){if(u.g)if($)for(var te="",it=$.split("&"),on=0;on<it.length;on++){var Qe=it[on].split("=");if(1<Qe.length){var gn=Qe[0];Qe=Qe[1];var _n=gn.split("_");te=2<=_n.length&&_n[1]=="type"?te+(gn+"="+Qe+"&"):te+(gn+"=redacted&")}}else te=null;else te=$;return"XMLHTTP REQ ("+w+") [attempt "+V+"]: "+f+`
`+m+`
`+te})}function W(u,f,m,w,V,$,te){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+V+"]: "+f+`
`+m+`
`+$+" "+te})}function re(u,f,m,w){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ee(u,m)+(w?" "+w:"")})}function he(u,f){u.info(function(){return"TIMEOUT: "+f})}x.prototype.info=function(){};function Ee(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var w=m[u];if(!(2>w.length)){var V=w[1];if(Array.isArray(V)&&!(1>V.length)){var $=V[0];if($!="noop"&&$!="stop"&&$!="close")for(var te=1;te<V.length;te++)V[te]=""}}}}return F(m)}catch{return f}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ye;function me(){}y(me,ne),me.prototype.g=function(){return new XMLHttpRequest},me.prototype.i=function(){return{}},ye=new me;function Ve(u,f,m,w){this.j=u,this.i=f,this.l=m,this.R=w||1,this.U=new $r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ze}function ze(){this.i=null,this.g="",this.h=!1}var Ze={},We={};function Ft(u,f,m){u.L=1,u.v=xc(ci(f)),u.m=m,u.P=!0,It(u,null)}function It(u,f){u.F=Date.now(),Sr(u),u.A=ci(u.v);var m=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Vv(m.i,"t",w),u.C=0,m=u.j.J,u.h=new ze,u.g=t0(u.j,m?f:null,!u.m),0<u.O&&(u.M=new Oi(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,w=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(Jn[0]=V.toString()),V=Jn);for(var $=0;$<V.length;$++){var te=Rt(m,V[$],w||f.handleEvent,!1,f.h||f);if(!te)break;f.g[te.key]=te}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),bt(),j(u.i,u.u,u.A,u.l,u.R,u.m)}Ve.prototype.ca=function(u){u=u.target;const f=this.M;f&&hi(u)==3?f.j():this.Y(u)},Ve.prototype.Y=function(u){try{if(u==this.g)e:{const _n=hi(this.g);var f=this.g.Ba();const Bo=this.g.Z();if(!(3>_n)&&(_n!=3||this.g&&(this.h.h||this.g.oa()||Wv(this.g)))){this.J||_n!=4||f==7||(f==8||0>=Bo?bt(3):bt(2)),zr(this);var m=this.g.Z();this.X=m;t:if(Mi(this)){var w=Wv(this.g);u="";var V=w.length,$=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dr(this),pn(this);var te="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,u+=this.h.i.decode(w[f],{stream:!($&&f==V-1)});w.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=m==200,W(this.i,this.u,this.A,this.l,this.R,_n,m),this.o){if(this.T&&!this.K){t:{if(this.g){var it,on=this.g;if((it=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(it)){var Qe=it;break t}}Qe=null}if(m=Qe)re(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vi(this,m);else{this.o=!1,this.s=3,wt(12),dr(this),pn(this);break e}}if(this.P){m=!0;let Rr;for(;!this.J&&this.C<te.length;)if(Rr=Br(this,te),Rr==We){_n==4&&(this.s=4,wt(14),m=!1),re(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==Ze){this.s=4,wt(15),re(this.i,this.l,te,"[Invalid Chunk]"),m=!1;break}else re(this.i,this.l,Rr,null),Vi(this,Rr);if(Mi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||te.length!=0||this.h.h||(this.s=1,wt(16),m=!1),this.o=this.o&&m,!m)re(this.i,this.l,te,"[Invalid Chunked Response]"),dr(this),pn(this);else if(0<te.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),ip(gn),gn.M=!0,wt(11))}}else re(this.i,this.l,te,null),Vi(this,te);_n==4&&dr(this),this.o&&!this.J&&(_n==4?Xv(this.j,this):(this.o=!1,Sr(this)))}else _N(this.g),m==400&&0<te.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),dr(this),pn(this)}}}catch{}finally{}};function Mi(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Br(u,f){var m=u.C,w=f.indexOf(`
`,m);return w==-1?We:(m=Number(f.substring(m,w)),isNaN(m)?Ze:(w+=1,w+m>f.length?We:(f=f.slice(w,w+m),u.C=w+m,f)))}Ve.prototype.cancel=function(){this.J=!0,dr(this)};function Sr(u){u.S=Date.now()+u.I,ui(u,u.I)}function ui(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=N(p(u.ba,u),f)}function zr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ve.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(he(this.i,this.A),this.L!=2&&(bt(),wt(17)),dr(this),this.s=2,pn(this)):ui(this,this.S-u)};function pn(u){u.j.G==0||u.J||Xv(u.j,u)}function dr(u){zr(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Ms(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Vi(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||et(m.h,u))){if(!u.K&&et(m.h,u)&&m.G==3){try{var w=m.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var V=w;if(V[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Vc(m),Oc(m);else break e;rp(m),wt(18)}}else m.za=V[1],0<m.za-m.T&&37500>V[2]&&m.F&&m.v==0&&!m.C&&(m.C=N(p(m.Za,m),6e3));if(1>=mn(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Fs(m,11)}else if((u.K||m.g==u)&&Vc(m),!g(f))for(V=m.Da.g.parse(f),f=0;f<V.length;f++){let Qe=V[f];if(m.T=Qe[0],Qe=Qe[1],m.G==2)if(Qe[0]=="c"){m.K=Qe[1],m.ia=Qe[2];const gn=Qe[3];gn!=null&&(m.la=gn,m.j.info("VER="+m.la));const _n=Qe[4];_n!=null&&(m.Aa=_n,m.j.info("SVER="+m.Aa));const Bo=Qe[5];Bo!=null&&typeof Bo=="number"&&0<Bo&&(w=1.5*Bo,m.L=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const Rr=u.g;if(Rr){const Uc=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uc){var $=w.h;$.g||Uc.indexOf("spdy")==-1&&Uc.indexOf("quic")==-1&&Uc.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Zn($,$.h),$.h=null))}if(w.D){const sp=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;sp&&(w.ya=sp,dt(w.I,w.D,sp))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),w=m;var te=u;if(w.qa=e0(w,w.J?w.ia:null,w.W),te.K){ul(w.h,te);var it=te,on=w.L;on&&(it.I=on),it.B&&(zr(it),Sr(it)),w.g=te}else Qv(w);0<m.i.length&&Mc(m)}else Qe[0]!="stop"&&Qe[0]!="close"||Fs(m,7);else m.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Fs(m,7):np(m):Qe[0]!="noop"&&m.l&&m.l.ta(Qe),m.v=0)}}bt(4)}catch{}}var Uo=class{constructor(u,f){this.g=u,this.map=f}};function xe(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ht(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function mn(u){return u.h?1:u.g?u.g.size:0}function et(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Zn(u,f){u.g?u.g.add(f):u.h=f}function ul(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}xe.prototype.cancel=function(){if(this.i=kc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function kc(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return S(u.i)}function nN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,w=0;w<m;w++)f.push(u[w]);return f}f=[],m=0;for(w in u)f[m++]=u[w];return f}function rN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const w in u)f[m++]=w;return f}}}function bv(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=rN(u),w=nN(u),V=w.length,$=0;$<V;$++)f.call(void 0,w[$],m&&m[$],u)}var xv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iN(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var w=u[m].indexOf("="),V=null;if(0<=w){var $=u[m].substring(0,w);V=u[m].substring(w+1)}else $=u[m];f($,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Vs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Vs){this.h=u.h,Nc(this,u.j),this.o=u.o,this.g=u.g,bc(this,u.s),this.l=u.l;var f=u.i,m=new dl;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Dv(this,m),this.m=u.m}else u&&(f=String(u).match(xv))?(this.h=!1,Nc(this,f[1]||"",!0),this.o=cl(f[2]||""),this.g=cl(f[3]||"",!0),bc(this,f[4]),this.l=cl(f[5]||"",!0),Dv(this,f[6]||"",!0),this.m=cl(f[7]||"")):(this.h=!1,this.i=new dl(null,this.h))}Vs.prototype.toString=function(){var u=[],f=this.j;f&&u.push(hl(f,Lv,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(hl(f,Lv,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(hl(m,m.charAt(0)=="/"?aN:oN,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",hl(m,uN)),u.join("")};function ci(u){return new Vs(u)}function Nc(u,f,m){u.j=m?cl(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function bc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Dv(u,f,m){f instanceof dl?(u.i=f,cN(u.i,u.h)):(m||(f=hl(f,lN)),u.i=new dl(f,u.h))}function dt(u,f,m){u.i.set(f,m)}function xc(u){return dt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function cl(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function hl(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,sN),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function sN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Lv=/[#\/\?@]/g,oN=/[#\?:]/g,aN=/[#\?]/g,lN=/[#\?@]/g,uN=/#/g;function dl(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Fi(u){u.g||(u.g=new Map,u.h=0,u.i&&iN(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=dl.prototype,t.add=function(u,f){Fi(this),this.i=null,u=jo(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Ov(u,f){Fi(u),f=jo(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Mv(u,f){return Fi(u),f=jo(u,f),u.g.has(f)}t.forEach=function(u,f){Fi(this),this.g.forEach(function(m,w){m.forEach(function(V){u.call(f,V,w,this)},this)},this)},t.na=function(){Fi(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let w=0;w<f.length;w++){const V=u[w];for(let $=0;$<V.length;$++)m.push(f[w])}return m},t.V=function(u){Fi(this);let f=[];if(typeof u=="string")Mv(this,u)&&(f=f.concat(this.g.get(jo(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return Fi(this),this.i=null,u=jo(this,u),Mv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Vv(u,f,m){Ov(u,f),0<m.length&&(u.i=null,u.g.set(jo(u,f),S(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var w=f[m];const $=encodeURIComponent(String(w)),te=this.V(w);for(w=0;w<te.length;w++){var V=$;te[w]!==""&&(V+="="+encodeURIComponent(String(te[w]))),u.push(V)}}return this.i=u.join("&")};function jo(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function cN(u,f){f&&!u.j&&(Fi(u),u.i=null,u.g.forEach(function(m,w){var V=w.toLowerCase();w!=V&&(Ov(this,w),Vv(this,V,m))},u)),u.j=f}function hN(u,f){const m=new x;if(a.Image){const w=new Image;w.onload=_(Ui,m,"TestLoadImage: loaded",!0,f,w),w.onerror=_(Ui,m,"TestLoadImage: error",!1,f,w),w.onabort=_(Ui,m,"TestLoadImage: abort",!1,f,w),w.ontimeout=_(Ui,m,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else f(!1)}function dN(u,f){const m=new x,w=new AbortController,V=setTimeout(()=>{w.abort(),Ui(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:w.signal}).then($=>{clearTimeout(V),$.ok?Ui(m,"TestPingServer: ok",!0,f):Ui(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),Ui(m,"TestPingServer: error",!1,f)})}function Ui(u,f,m,w,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),w(m)}catch{}}function fN(){this.g=new q}function pN(u,f,m){const w=m||"";try{bv(u,function(V,$){let te=V;c(V)&&(te=F(V)),f.push(w+$+"="+encodeURIComponent(te))})}catch(V){throw f.push(w+"type="+encodeURIComponent("_badmap")),V}}function fl(u){this.l=u.Ub||null,this.j=u.eb||!1}y(fl,ne),fl.prototype.g=function(){return new Dc(this.l,this.j)},fl.prototype.i=function(u){return function(){return u}}({});function Dc(u,f){Ot.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Dc,Ot),t=Dc.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,ml(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ml(this)),this.g&&(this.readyState=3,ml(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?pl(this):ml(this),this.readyState==3&&Fv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,pl(this))},t.Qa=function(u){this.g&&(this.response=u,pl(this))},t.ga=function(){this.g&&pl(this)};function pl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ml(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function ml(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Dc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Uv(u){let f="";return k(u,function(m,w){f+=w,f+=":",f+=m,f+=`\r
`}),f}function tp(u,f,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=Uv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):dt(u,f,m))}function xt(u){Ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(xt,Ot);var mN=/^https?$/i,gN=["POST","PUT"];t=xt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ye.g(),this.v=this.o?ee(this.o):ee(ye),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch($){jv(this,$);return}if(u=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var V in w)m.set(V,w[V]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())m.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find($=>$.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gN,f,void 0))||w||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,te]of m)this.g.setRequestHeader($,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zv(this),this.u=!0,this.g.send(u),this.u=!1}catch($){jv(this,$)}};function jv(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,$v(u),Lc(u)}function $v(u){u.A||(u.A=!0,Mt(u,"complete"),Mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Mt(this,"complete"),Mt(this,"abort"),Lc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lc(this,!0)),xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Bv(this):this.bb())},t.bb=function(){Bv(this)};function Bv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||hi(u)!=4||u.Z()!=2)){if(u.u&&hi(u)==4)Mn(u.Ea,0,u);else if(Mt(u,"readystatechange"),hi(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var w;if(w=te===0){var V=String(u.D).match(xv)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),w=!mN.test(V?V.toLowerCase():"")}m=w}if(m)Mt(u,"complete"),Mt(u,"success");else{u.m=6;try{var $=2<hi(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",$v(u)}}finally{Lc(u)}}}}function Lc(u,f){if(u.g){zv(u);const m=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Mt(u,"ready");try{m.onreadystatechange=w}catch{}}}function zv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function hi(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),L(f)}};function Wv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _N(u){const f={};u=(u.g&&2<=hi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(g(u[w]))continue;var m=P(u[w]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const $=f[V]||[];f[V]=$,$.push(m)}T(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gl(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Hv(u){this.Aa=0,this.i=[],this.j=new x,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gl("baseRetryDelayMs",5e3,u),this.cb=gl("retryDelaySeedMs",1e4,u),this.Wa=gl("forwardChannelMaxRetries",2,u),this.wa=gl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new xe(u&&u.concurrentRequestLimit),this.Da=new fN,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hv.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,w){wt(0),this.W=u,this.H=f||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.I=e0(this,null,this.W),Mc(this)};function np(u){if(qv(u),u.G==3){var f=u.U++,m=ci(u.I);if(dt(m,"SID",u.K),dt(m,"RID",f),dt(m,"TYPE","terminate"),_l(u,m),f=new Ve(u,u.j,f),f.L=2,f.v=xc(ci(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=t0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Sr(f)}Zv(u)}function Oc(u){u.g&&(ip(u),u.g.cancel(),u.g=null)}function qv(u){Oc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Vc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Mc(u){if(!ht(u.h)&&!u.s){u.s=!0;var f=u.Ga;Le||Z(),J||(Le(),J=!0),de.add(f,u),u.B=0}}function yN(u,f){return mn(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=N(p(u.Ga,u,f),Jv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new Ve(this,this.j,u);let $=this.o;if(this.S&&($?($=v($),A($,this.S)):$=this.S),this.m!==null||this.O||(V.H=$,$=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Gv(this,V,f),m=ci(this.I),dt(m,"RID",u),dt(m,"CVER",22),this.D&&dt(m,"X-HTTP-Session-Id",this.D),_l(this,m),$&&(this.O?f="headers="+encodeURIComponent(String(Uv($)))+"&"+f:this.m&&tp(m,this.m,$)),Zn(this.h,V),this.Ua&&dt(m,"TYPE","init"),this.P?(dt(m,"$req",f),dt(m,"SID","null"),V.T=!0,Ft(V,m,null)):Ft(V,m,f),this.G=2}}else this.G==3&&(u?Kv(this,u):this.i.length==0||ht(this.h)||Kv(this))};function Kv(u,f){var m;f?m=f.l:m=u.U++;const w=ci(u.I);dt(w,"SID",u.K),dt(w,"RID",m),dt(w,"AID",u.T),_l(u,w),u.m&&u.o&&tp(w,u.m,u.o),m=new Ve(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Gv(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Zn(u.h,m),Ft(m,w,f)}function _l(u,f){u.H&&k(u.H,function(m,w){dt(f,w,m)}),u.l&&bv({},function(m,w){dt(f,w,m)})}function Gv(u,f,m){m=Math.min(u.i.length,m);var w=u.l?p(u.l.Na,u.l,u):null;e:{var V=u.i;let $=-1;for(;;){const te=["count="+m];$==-1?0<m?($=V[0].g,te.push("ofs="+$)):$=0:te.push("ofs="+$);let it=!0;for(let on=0;on<m;on++){let Qe=V[on].g;const gn=V[on].map;if(Qe-=$,0>Qe)$=Math.max(0,V[on].g-100),it=!1;else try{pN(gn,te,"req"+Qe+"_")}catch{w&&w(gn)}}if(it){w=te.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,w}function Qv(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Le||Z(),J||(Le(),J=!0),de.add(f,u),u.v=0}}function rp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=N(p(u.Fa,u),Jv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Yv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=N(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Oc(this),Yv(this))};function ip(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Yv(u){u.g=new Ve(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=ci(u.qa);dt(f,"RID","rpc"),dt(f,"SID",u.K),dt(f,"AID",u.T),dt(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&dt(f,"TO",u.ja),dt(f,"TYPE","xmlhttp"),_l(u,f),u.m&&u.o&&tp(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=xc(ci(f)),m.m=null,m.P=!0,It(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Oc(this),rp(this),wt(19))};function Vc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Xv(u,f){var m=null;if(u.g==f){Vc(u),ip(u),u.g=null;var w=2}else if(et(u.h,f))m=f.D,ul(u.h,f),w=1;else return;if(u.G!=0){if(f.o)if(w==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var V=u.B;w=Vt(),Mt(w,new li(w,m)),Mc(u)}else Qv(u);else if(V=f.s,V==3||V==0&&0<f.X||!(w==1&&yN(u,f)||w==2&&rp(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),V){case 1:Fs(u,5);break;case 4:Fs(u,10);break;case 3:Fs(u,6);break;default:Fs(u,2)}}}function Jv(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Fs(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),w=u.Xa;const V=!w;w=new Vs(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Nc(w,"https"),xc(w),V?hN(w.toString(),m):dN(w.toString(),m)}else wt(2);u.G=0,u.l&&u.l.sa(f),Zv(u),qv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Zv(u){if(u.G=0,u.ka=[],u.l){const f=kc(u.h);(f.length!=0||u.i.length!=0)&&(b(u.ka,f),b(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function e0(u,f,m){var w=m instanceof Vs?ci(m):new Vs(m);if(w.g!="")f&&(w.g=f+"."+w.g),bc(w,w.s);else{var V=a.location;w=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var $=new Vs(null);w&&Nc($,w),f&&($.g=f),V&&bc($,V),m&&($.l=m),w=$}return m=u.D,f=u.ya,m&&f&&dt(w,m,f),dt(w,"VER",u.la),_l(u,w),w}function t0(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new xt(new fl({eb:m})):new xt(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function n0(){}t=n0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fc(){}Fc.prototype.g=function(u,f){return new er(u,f)};function er(u,f){Ot.call(this),this.g=new Hv(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!g(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!g(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new $o(this)}y(er,Ot),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){np(this.g)},er.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=F(u),u=m);f.i.push(new Uo(f.Ya++,u)),f.G==3&&Mc(f)},er.prototype.N=function(){this.g.l=null,delete this.j,np(this.g),delete this.g,er.aa.N.call(this)};function r0(u){pe.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(r0,pe);function i0(){_e.call(this),this.status=1}y(i0,_e);function $o(u){this.g=u}y($o,n0),$o.prototype.ua=function(){Mt(this.g,"a")},$o.prototype.ta=function(u){Mt(this.g,new r0(u))},$o.prototype.sa=function(u){Mt(this.g,new i0)},$o.prototype.ra=function(){Mt(this.g,"b")},Fc.prototype.createWebChannel=Fc.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,lA=function(){return new Fc},aA=function(){return Vt()},oA=Re,gg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,xh=X,Pe.COMPLETE="complete",sA=Pe,oe.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,ql=oe,iA=fl,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,rA=xt}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const TE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new sc("@firebase/firestore");function kl(){return po.logLevel}function ue(t,...e){if(po.logLevel<=Ue.DEBUG){const n=e.map(_y);po.debug(`Firestore (${tl}): ${t}`,...n)}}function Ni(t,...e){if(po.logLevel<=Ue.ERROR){const n=e.map(_y);po.error(`Firestore (${tl}): ${t}`,...n)}}function La(t,...e){if(po.logLevel<=Ue.WARN){const n=e.map(_y);po.warn(`Firestore (${tl}): ${t}`,...n)}}function _y(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t="Unexpected state"){const e=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: `+t;throw Ni(e),new Error(e)}function ct(t,e){t||Ce()}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class UF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class jF{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hs,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new uA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new En(e)}}class $F{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class BF{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $F(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WF{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string"),this.R=n.token,new zF(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=HF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Xe(t,e){return t<e?-1:t>e?1:0}function Oa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ve(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Qt(0,0))}static max(){return new ke(new Qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(),r===void 0?r=e.length-n:r>e.length-n&&Ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Lt extends zu{construct(e,n,r){return new Lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Lt(n)}static emptyPath(){return new Lt([])}}const qF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends zu{construct(e,n,r){return new un(e,n,r)}static isValidIdentifier(e){return qF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ve(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ve(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ve(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(Lt.fromString(e))}static fromName(e){return new we(Lt.fromString(e).popFirst(5))}static empty(){return new we(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Lt(e.slice()))}}function KF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new Qt(n+1,0):new Qt(n,r));return new gs(i,we.empty(),e)}function GF(t){return new gs(t.readTime,t.key,-1)}class gs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gs(ke.min(),we.empty(),-1)}static max(){return new gs(ke.max(),we.empty(),-1)}}function QF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==YF)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(i=>i?K.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new K((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new K((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function JF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}yy.oe=-1;function pf(t){return t==null}function wd(t){return t===0&&1/t==-1/0}function ZF(t){return typeof t=="number"&&Number.isInteger(t)&&!wd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function No(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wt=class _g{constructor(e,n){this.comparator=e,this.root=n||ds.EMPTY}insert(e,n){return new _g(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new _g(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}},sh=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ds=class di{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??di.RED,this.left=i??di.EMPTY,this.right=s??di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new di(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}};ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1;ds.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ds(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new RE(this.data.getIterator())}getIteratorFrom(e){return new RE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new hn(this.comparator);return n.data=e,n}}class RE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new ir([])}unionWith(e){let n=new hn(un.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ir(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dA("Invalid base64 string: "+s):s}}(e);return new kn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const eU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(t){if(ct(!!t),typeof t=="string"){let e=0;const n=eU.exec(t);if(ct(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mo(t){return typeof t=="string"?kn.fromBase64String(t):kn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wy(t){const e=t.mapValue.fields.__previous_value__;return vy(e)?wy(e):e}function Wu(t){const e=_s(t.mapValue.fields.__local_write_time__.timestampValue);return new Qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Hu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Hu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function go(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vy(t)?4:nU(t)?9007199254740991:10:Ce()}function ri(t,e){if(t===e)return!0;const n=go(t);if(n!==go(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=_s(i.timestampValue),a=_s(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return mo(i.bytesValue).isEqual(mo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Bt(i.geoPointValue.latitude)===Bt(s.geoPointValue.latitude)&&Bt(i.geoPointValue.longitude)===Bt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Bt(i.integerValue)===Bt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Bt(i.doubleValue),a=Bt(s.doubleValue);return o===a?wd(o)===wd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Oa(t.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(SE(o)!==SE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ri(o[l],a[l])))return!1;return!0}(t,e);default:return Ce()}}function qu(t,e){return(t.values||[]).find(n=>ri(n,e))!==void 0}function Ma(t,e){if(t===e)return 0;const n=go(t),r=go(e);if(n!==r)return Xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Bt(s.integerValue||s.doubleValue),l=Bt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return IE(t.timestampValue,e.timestampValue);case 4:return IE(Wu(t),Wu(e));case 5:return Xe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=mo(s),l=mo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Xe(a[c],l[c]);if(h!==0)return h}return Xe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Xe(Bt(s.latitude),Bt(o.latitude));return a!==0?a:Xe(Bt(s.longitude),Bt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=Ma(a[c],l[c]);if(h)return h}return Xe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===oh.mapValue&&o===oh.mapValue)return 0;if(s===oh.mapValue)return 1;if(o===oh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Xe(l[d],h[d]);if(p!==0)return p;const _=Ma(a[l[d]],c[h[d]]);if(_!==0)return _}return Xe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Ce()}}function IE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=_s(t),r=_s(e),i=Xe(n.seconds,r.seconds);return i!==0?i:Xe(n.nanos,r.nanos)}function Va(t){return yg(t)}function yg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_s(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return we.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=yg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${yg(n.fields[o])}`;return i+"}"}(t.mapValue):Ce()}function vg(t){return!!t&&"integerValue"in t}function Ey(t){return!!t&&"arrayValue"in t}function CE(t){return!!t&&"nullValue"in t}function AE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dh(t){return!!t&&"mapValue"in t}function lu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return No(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=lu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(n)}setAll(e){let n=un.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=lu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Dh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Dh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){No(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Fn(lu(this.value))}}function fA(t){const e=[];return No(t.fields,(n,r)=>{const i=new un([n]);if(Dh(r)){const s=fA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Sn(e,0,ke.min(),ke.min(),ke.min(),Fn.empty(),0)}static newFoundDocument(e,n,r,i){return new Sn(e,1,n,ke.min(),r,i,0)}static newNoDocument(e,n){return new Sn(e,2,n,ke.min(),ke.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new Sn(e,3,n,ke.min(),ke.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n){this.position=e,this.inclusive=n}}function PE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=we.comparator(we.fromName(o.referenceValue),n.key):r=Ma(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function kE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ri(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n="asc"){this.field=e,this.dir=n}}function rU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{}class Kt extends pA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sU(e,n,r):n==="array-contains"?new lU(e,r):n==="in"?new uU(e,r):n==="not-in"?new cU(e,r):n==="array-contains-any"?new hU(e,r):new Kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new oU(e,r):new aU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ma(n,this.value)):n!==null&&go(this.value)===go(n)&&this.matchesComparison(Ma(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends pA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ii(e,n)}matches(e){return mA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function mA(t){return t.op==="and"}function gA(t){return iU(t)&&mA(t)}function iU(t){for(const e of t.filters)if(e instanceof ii)return!1;return!0}function wg(t){if(t instanceof Kt)return t.field.canonicalString()+t.op.toString()+Va(t.value);if(gA(t))return t.filters.map(e=>wg(e)).join(",");{const e=t.filters.map(n=>wg(n)).join(",");return`${t.op}(${e})`}}function _A(t,e){return t instanceof Kt?function(r,i){return i instanceof Kt&&r.op===i.op&&r.field.isEqual(i.field)&&ri(r.value,i.value)}(t,e):t instanceof ii?function(r,i){return i instanceof ii&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&_A(o,i.filters[a]),!0):!1}(t,e):void Ce()}function yA(t){return t instanceof Kt?function(n){return`${n.field.canonicalString()} ${n.op} ${Va(n.value)}`}(t):t instanceof ii?function(n){return n.op.toString()+" {"+n.getFilters().map(yA).join(" ,")+"}"}(t):"Filter"}class sU extends Kt{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class oU extends Kt{constructor(e,n){super(e,"in",n),this.keys=vA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aU extends Kt{constructor(e,n){super(e,"not-in",n),this.keys=vA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>we.fromName(r.referenceValue))}class lU extends Kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ey(n)&&qu(n.arrayValue,this.value)}}class uU extends Kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qu(this.value.arrayValue,n)}}class cU extends Kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qu(this.value.arrayValue,n)}}class hU extends Kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ey(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function NE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new dU(t,e,n,r,i,s,o)}function Ty(t){const e=be(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Va(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Va(r)).join(",")),e.ue=n}return e.ue}function Sy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_A(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kE(t.startAt,e.startAt)&&kE(t.endAt,e.endAt)}function Eg(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fU(t,e,n,r,i,s,o,a){return new mf(t,e,n,r,i,s,o,a)}function Ry(t){return new mf(t)}function bE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pU(t){return t.collectionGroup!==null}function uu(t){const e=be(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new hn(un.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Td(s,r))}),n.has(un.keyField().canonicalString())||e.ce.push(new Td(un.keyField(),r))}return e.ce}function ei(t){const e=be(t);return e.le||(e.le=mU(e,uu(t))),e.le}function mU(t,e){if(t.limitType==="F")return NE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Td(i.field,s)});const n=t.endAt?new Ed(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ed(t.startAt.position,t.startAt.inclusive):null;return NE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Tg(t,e,n){return new mf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gf(t,e){return Sy(ei(t),ei(e))&&t.limitType===e.limitType}function wA(t){return`${Ty(ei(t))}|lt:${t.limitType}`}function Ko(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yA(i)).join(", ")}]`),pf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Va(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Va(i)).join(",")),`Target(${r})`}(ei(t))}; limitType=${t.limitType})`}function _f(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):we.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of uu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=PE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,uu(r),i)||r.endAt&&!function(o,a,l){const c=PE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,uu(r),i))}(t,e)}function gU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EA(t){return(e,n)=>{let r=!1;for(const i of uu(t)){const s=_U(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _U(t,e,n){const r=t.field.isKeyField()?we.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ma(l,c):Ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){No(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return hA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=new Wt(we.comparator);function bi(){return yU}const TA=new Wt(we.comparator);function Kl(...t){let e=TA;for(const n of t)e=e.insert(n.key,n);return e}function SA(t){let e=TA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xs(){return cu()}function RA(){return cu()}function cu(){return new nl(t=>t.toString(),(t,e)=>t.isEqual(e))}const vU=new Wt(we.comparator),wU=new hn(we.comparator);function je(...t){let e=wU;for(const n of t)e=e.add(n);return e}const EU=new hn(Xe);function TU(){return EU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wd(e)?"-0":e}}function CA(t){return{integerValue:""+t}}function SU(t,e){return ZF(e)?CA(e):IA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function RU(t,e,n){return t instanceof Sd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vy(s)&&(s=wy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ku?PA(t,e):t instanceof Gu?kA(t,e):function(i,s){const o=AA(i,s),a=xE(o)+xE(i.Pe);return vg(o)&&vg(i.Pe)?CA(a):IA(i.serializer,a)}(t,e)}function IU(t,e,n){return t instanceof Ku?PA(t,e):t instanceof Gu?kA(t,e):n}function AA(t,e){return t instanceof Rd?function(r){return vg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Sd extends yf{}class Ku extends yf{constructor(e){super(),this.elements=e}}function PA(t,e){const n=NA(e);for(const r of t.elements)n.some(i=>ri(i,r))||n.push(r);return{arrayValue:{values:n}}}class Gu extends yf{constructor(e){super(),this.elements=e}}function kA(t,e){let n=NA(e);for(const r of t.elements)n=n.filter(i=>!ri(i,r));return{arrayValue:{values:n}}}class Rd extends yf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function xE(t){return Bt(t.integerValue||t.doubleValue)}function NA(t){return Ey(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ku&&i instanceof Ku||r instanceof Gu&&i instanceof Gu?Oa(r.elements,i.elements,ri):r instanceof Rd&&i instanceof Rd?ri(r.Pe,i.Pe):r instanceof Sd&&i instanceof Sd}(t.transform,e.transform)}class AU{constructor(e,n){this.version=e,this.transformResults=n}}class ti{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ti}static exists(e){return new ti(void 0,e)}static updateTime(e){return new ti(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vf{}function bA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new DA(t.key,ti.none()):new fc(t.key,t.data,ti.none());{const n=t.data,r=Fn.empty();let i=new hn(un.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ks(t.key,r,new ir(i.toArray()),ti.none())}}function PU(t,e,n){t instanceof fc?function(i,s,o){const a=i.value.clone(),l=LE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ks?function(i,s,o){if(!Lh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=LE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(xA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function hu(t,e,n,r){return t instanceof fc?function(s,o,a,l){if(!Lh(s.precondition,o))return a;const c=s.value.clone(),h=OE(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ks?function(s,o,a,l){if(!Lh(s.precondition,o))return a;const c=OE(s.fieldTransforms,l,o),h=o.data;return h.setAll(xA(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Lh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function kU(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=AA(r.transform,i||null);s!=null&&(n===null&&(n=Fn.empty()),n.set(r.field,s))}return n||null}function DE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oa(r,i,(s,o)=>CU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fc extends vf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ks extends vf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function LE(t,e,n){const r=new Map;ct(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,IU(o,a,n[i]))}return r}function OE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,RU(s,o,e))}return r}class DA extends vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NU extends vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&PU(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=bA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(n,r)=>DE(n,r))&&Oa(this.baseMutations,e.baseMutations,(n,r)=>DE(n,r))}}class Iy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ct(e.mutations.length===r.length);let i=function(){return vU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Iy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,He;function LU(t){switch(t){default:return Ce();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function LA(t){if(t===void 0)return Ni("GRPC error has no .code"),G.UNKNOWN;switch(t){case jt.OK:return G.OK;case jt.CANCELLED:return G.CANCELLED;case jt.UNKNOWN:return G.UNKNOWN;case jt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case jt.INTERNAL:return G.INTERNAL;case jt.UNAVAILABLE:return G.UNAVAILABLE;case jt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case jt.NOT_FOUND:return G.NOT_FOUND;case jt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case jt.ABORTED:return G.ABORTED;case jt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case jt.DATA_LOSS:return G.DATA_LOSS;default:return Ce()}}(He=jt||(jt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU=new to([4294967295,4294967295],0);function ME(t){const e=OU().encode(t),n=new nA;return n.update(e),new Uint8Array(n.digest())}function VE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new to([n,r],0),new to([i,s],0)]}class Cy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(r<0)throw new Gl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=to.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(to.fromNumber(r)));return i.compare(MU)===1&&(i=new to([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ME(e),[r,i]=VE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Cy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=ME(e),[r,i]=VE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wf(ke.min(),i,new Wt(Xe),bi(),je())}}class pc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pc(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class OA{constructor(e,n){this.targetId=e,this.me=n}}class MA{constructor(e,n,r=kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class FE{constructor(){this.fe=0,this.ge=jE(),this.pe=kn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=je(),n=je(),r=je();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ce()}}),new pc(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=jE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VU{constructor(e){this.Le=e,this.Be=new Map,this.ke=bi(),this.qe=UE(),this.Qe=new Wt(Xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Eg(s))if(r===0){const o=new we(s.path);this.Ue(n,o,Sn.newNoDocument(o,ke.min()))}else ct(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=mo(r).toUint8Array()}catch(l){if(l instanceof dA)return La("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Cy(o,i,s)}catch(l){return La(l instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Eg(a.target)){const l=new we(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Sn.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=je();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new wf(e,n,this.Qe,this.ke,r);return this.ke=bi(),this.qe=UE(),this.Qe=new Wt(Xe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new FE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new hn(Xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new FE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function UE(){return new Wt(we.comparator)}function jE(){return new Wt(we.comparator)}const FU={asc:"ASCENDING",desc:"DESCENDING"},UU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jU={and:"AND",or:"OR"};class $U{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sg(t,e){return t.useProto3Json||pf(e)?e:{value:e}}function Id(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BU(t,e){return Id(t,e.toTimestamp())}function ni(t){return ct(!!t),ke.fromTimestamp(function(n){const r=_s(n);return new Qt(r.seconds,r.nanos)}(t))}function Ay(t,e){return Rg(t,e).canonicalString()}function Rg(t,e){const n=function(i){return new Lt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FA(t){const e=Lt.fromString(t);return ct(zA(e)),e}function Ig(t,e){return Ay(t.databaseId,e.path)}function Hp(t,e){const n=FA(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new we(jA(n))}function UA(t,e){return Ay(t.databaseId,e)}function zU(t){const e=FA(t);return e.length===4?Lt.emptyPath():jA(e)}function Cg(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jA(t){return ct(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $E(t,e,n){return{name:Ig(t,e),fields:n.value.mapValue.fields}}function WU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ct(h===void 0||typeof h=="string"),kn.fromBase64String(h||"")):(ct(h===void 0||h instanceof Buffer||h instanceof Uint8Array),kn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?G.UNKNOWN:LA(c.code);return new ve(h,c.message||"")}(o);n=new MA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hp(t,r.document.name),s=ni(r.document.updateTime),o=r.document.createTime?ni(r.document.createTime):ke.min(),a=new Fn({mapValue:{fields:r.document.fields}}),l=Sn.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Oh(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hp(t,r.document),s=r.readTime?ni(r.readTime):ke.min(),o=Sn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Oh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hp(t,r.document),s=r.removedTargetIds||[];n=new Oh([],s,i,null)}else{if(!("filter"in e))return Ce();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new DU(i,s),a=r.targetId;n=new OA(a,o)}}return n}function HU(t,e){let n;if(e instanceof fc)n={update:$E(t,e.key,e.value)};else if(e instanceof DA)n={delete:Ig(t,e.key)};else if(e instanceof ks)n={update:$E(t,e.key,e.data),updateMask:e4(e.fieldMask)};else{if(!(e instanceof NU))return Ce();n={verify:Ig(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Sd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ku)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:BU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ce()}(t,e.precondition)),n}function qU(t,e){return t&&t.length>0?(ct(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ni(i.updateTime):ni(s);return o.isEqual(ke.min())&&(o=ni(s)),new AU(o,i.transformResults||[])}(n,e))):[]}function KU(t,e){return{documents:[UA(t,e.path)]}}function GU(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=UA(t,i);const s=function(c){if(c.length!==0)return BA(ii.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Go(p.field),direction:XU(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function QU(t){let e=zU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ct(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=$A(d);return p instanceof ii&&gA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new Td(Qo(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,pf(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,_=d.values||[];return new Ed(_,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,_=d.values||[];return new Ed(_,p)}(n.endAt)),fU(e,i,o,s,a,"F",l,c)}function YU(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $A(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qo(n.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qo(n.unaryFilter.field);return Kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qo(n.unaryFilter.field);return Kt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qo(n.unaryFilter.field);return Kt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(t):t.fieldFilter!==void 0?function(n){return Kt.create(Qo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ii.create(n.compositeFilter.filters.map(r=>$A(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce()}}(n.compositeFilter.op))}(t):Ce()}function XU(t){return FU[t]}function JU(t){return UU[t]}function ZU(t){return jU[t]}function Go(t){return{fieldPath:t.canonicalString()}}function Qo(t){return un.fromServerFormat(t.fieldPath)}function BA(t){return t instanceof Kt?function(n){if(n.op==="=="){if(AE(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NAN"}};if(CE(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(AE(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NAN"}};if(CE(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(n.field),op:JU(n.op),value:n.value}}}(t):t instanceof ii?function(n){const r=n.getFilters().map(i=>BA(i));return r.length===1?r[0]:{compositeFilter:{op:ZU(n.op),filters:r}}}(t):Ce()}function e4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,r,i,s=ke.min(),o=ke.min(),a=kn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.ct=e}}function n4(t){const e=QU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this._n=new i4}addToCollectionParentIndex(e,n){return this._n.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(gs.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class i4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new hn(Lt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Fa(0)}static Ln(){return new Fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.changes=new nl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&hu(r.mutation,i,ir.empty(),Qt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const i=Xs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Kl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=bi();const o=cu(),a=function(){return cu()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof ks)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),hu(h.mutation,c,h.mutation.getFieldMask(),Qt.now())):o.set(c.key,ir.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new o4(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=cu();let i=new Wt((o,a)=>o-a),s=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||ir.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||je()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=RA();h.forEach(p=>{if(!s.has(p)){const _=bA(n.get(p),r.get(p));_!==null&&d.set(p,_),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return we.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):K.resolve(Xs());let a=-1,l=s;return o.next(c=>K.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,je())).next(h=>({batchId:a,changes:SA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(r=>{let i=Kl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Kl();return this.indexManager.getCollectionParents(e,s).next(a=>K.forEach(a,l=>{const c=function(d,p){return new mf(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Sn.newInvalidDocument(h)))});let a=Kl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&hu(h.mutation,c,ir.empty(),Qt.now()),_f(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return K.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ni(i.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:n4(i.bundledQuery),readTime:ni(i.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.overlays=new Wt(we.comparator),this.hr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xs();return K.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const i=Xs(),s=n.length+1,o=new we(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return K.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Wt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Xs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Xs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return K.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xU(n,r));let s=this.hr.get(n);s===void 0&&(s=je(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(){this.Pr=new hn(Jt.Ir),this.Tr=new hn(Jt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Jt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new we(new Lt([])),r=new Jt(n,e),i=new Jt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new we(new Lt([])),r=new Jt(n,e),i=new Jt(n,e+1);let s=je();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Jt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return we.comparator(e.key,n.key)||Xe(e.pr,n.pr)}static Er(e,n){return Xe(e.pr,n.pr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new hn(Jt.Ir)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bU(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Jt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),i=new Jt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new hn(Xe);return n.forEach(i=>{const s=new Jt(i,0),o=new Jt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),K.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;we.isDocumentKey(s)||(s=s.child(""));const o=new Jt(new we(s),0);let a=new hn(Xe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),K.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ct(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return K.forEach(n.mutations,i=>{const s=new Jt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Jt(n,0),i=this.wr.firstAfterOrEqual(r);return K.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.vr=e,this.docs=function(){return new Wt(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(n))}getEntries(e,n){let r=bi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Sn.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=bi();const o=n.path,a=new we(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||QF(GF(h),r)<=0||(i.has(h.key)||_f(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ce()}Fr(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new d4(this)}getSize(e){return K.resolve(this.size)}}class d4 extends s4{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.persistence=e,this.Mr=new nl(n=>Ty(n),Sy),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Py,this.targetCount=0,this.Lr=Fa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),K.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Fa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.qn(n),K.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n){this.Br={},this.overlays={},this.kr=new yy(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new f4(this),this.indexManager=new r4,this.remoteDocumentCache=function(i){return new h4(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new t4(n),this.$r=new l4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new u4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new c4(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const i=new m4(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return K.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class m4 extends XF{constructor(e){super(),this.currentSequenceNumber=e}}class ky{constructor(e){this.persistence=e,this.zr=new Py,this.jr=null}static Hr(e){return new ky(e)}get Jr(){if(this.jr)return this.jr;throw Ce()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),K.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Jr,r=>{const i=we.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ke.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return K.or([()=>K.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=je(),i=je();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ny(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return FL()?8:JF(fn())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new g4;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(kl()<=Ue.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ko(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),K.resolve()):(kl()<=Ue.DEBUG&&ue("QueryEngine","Query:",Ko(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(kl()<=Ue.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ko(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):K.resolve())}ji(e,n){if(bE(n))return K.resolve(null);let r=ei(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Tg(n,null,"F"),r=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=je(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,Tg(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return bE(n)||i.isEqual(ke.min())?K.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?K.resolve(null):(kl()<=Ue.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ko(n)),this.es(e,o,n,KF(i,-1)).next(a=>a))})}Zi(e,n){let r=new hn(EA(e));return n.forEach((i,s)=>{_f(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return kl()<=Ue.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ko(n)),this.zi.getDocumentsMatchingQuery(e,n,gs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Wt(Xe),this.rs=new nl(s=>Ty(s),Sy),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a4(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function v4(t,e,n,r){return new y4(t,e,n,r)}async function WA(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=je();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function w4(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let _=K.resolve();return p.forEach(y=>{_=_.next(()=>h.getEntry(l,y)).next(S=>{const b=c.docVersions.get(y);ct(b!==null),S.version.compareTo(b)<0&&(d.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=je();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function HA(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function E4(t,e){const n=be(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,d)));let _=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(kn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(d,_),function(S,b,R){return S.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(p,_,h)&&a.push(n.Qr.updateTargetData(s,_))});let l=bi(),c=je();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(T4(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(ke.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return K.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function T4(t,e,n){let r=je(),i=je();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=bi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ke.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function S4(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function R4(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new es(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Ag(t,e,n){const r=be(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!dc(o))throw o;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function BE(t,e,n){const r=be(t);let i=ke.min(),s=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=be(l),p=d.rs.get(h);return p!==void 0?K.resolve(d.ns.get(p)):d.Qr.getTargetData(c,h)}(r,o,ei(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ke.min(),n?s:je())).next(a=>(I4(r,gU(e),a),{documents:a,hs:s})))}function I4(t,e,n){let r=t.ss.get(e)||ke.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class zE{constructor(){this.activeTargetIds=TU()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class C4{constructor(){this.no=new zE,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new zE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah=null;function qp(){return ah===null?ah=function(){return 268435456+Math.round(2147483648*Math.random())}():ah++,"0x"+ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class N4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=qp(),l=this.vo(n,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(h=>(ue("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw La("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=P4[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=qp();return new Promise((o,a)=>{const l=new rA;l.setWithCredentials(!0),l.listenOnce(sA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xh.NO_ERROR:const h=l.getResponseJson();ue(wn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case xh.TIMEOUT:ue(wn,`RPC '${e}' ${s} timed out`),a(new ve(G.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const d=l.getStatus();if(ue(wn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const y=function(b){const R=b.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(R)>=0?R:G.UNKNOWN}(_.status);a(new ve(y,_.message))}else a(new ve(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ve(G.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{ue(wn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ue(wn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=qp(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lA(),a=aA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new iA({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ue(wn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,_=!1;const y=new k4({lo:b=>{_?ue(wn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(p||(ue(wn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),ue(wn,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},ho:()=>d.close()}),S=(b,R,g)=>{b.listen(R,I=>{try{g(I)}catch(M){setTimeout(()=>{throw M},0)}})};return S(d,ql.EventType.OPEN,()=>{_||(ue(wn,`RPC '${e}' stream ${i} transport opened.`),y.mo())}),S(d,ql.EventType.CLOSE,()=>{_||(_=!0,ue(wn,`RPC '${e}' stream ${i} transport closed`),y.po())}),S(d,ql.EventType.ERROR,b=>{_||(_=!0,La(wn,`RPC '${e}' stream ${i} transport errored:`,b),y.po(new ve(G.UNAVAILABLE,"The operation could not be completed")))}),S(d,ql.EventType.MESSAGE,b=>{var R;if(!_){const g=b.data[0];ct(!!g);const I=g,M=I.error||((R=I[0])===null||R===void 0?void 0:R.error);if(M){ue(wn,`RPC '${e}' stream ${i} received error:`,M);const z=M.status;let k=function(E){const A=jt[E];if(A!==void 0)return LA(A)}(z),T=M.message;k===void 0&&(k=G.INTERNAL,T="Unknown error status: "+z+" with message "+M.message),_=!0,y.po(new ve(k,T)),d.close()}else ue(wn,`RPC '${e}' stream ${i} received:`,g),y.yo(g)}}),S(a,oA.STAT_EVENT,b=>{b.stat===gg.PROXY?ue(wn,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===gg.NOPROXY&&ue(wn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}function Kp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t){return new $U(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new qA(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Ni(n.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new ve(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class b4 extends KA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=WU(this.serializer,e),r=function(s){if(!("targetChange"in s))return ke.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?ni(o.readTime):ke.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=Cg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Eg(l)?{documents:KU(s,l)}:{query:GU(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=VA(s,o.resumeToken);const c=Sg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ke.min())>0){a.readTime=Id(s,o.snapshotVersion.toTimestamp());const c=Sg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=YU(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=Cg(this.serializer),n.removeTarget=e,this.i_(n)}}class x4 extends KA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=qU(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.A_(r,n)}return ct(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Cg(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>HU(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new ve(G.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Rg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(G.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Rg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(G.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class L4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ni(n),this.y_=!1):ue("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{bo(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=be(l);c.M_.add(4),await mc(c),c.N_.set("Unknown"),c.M_.delete(4),await Tf(c)}(this))})}),this.N_=new L4(r,i)}}async function Tf(t){if(bo(t))for(const e of t.x_)await e(!0)}async function mc(t){for(const e of t.x_)await e(!1)}function GA(t,e){const n=be(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Ly(n)?Dy(n):rl(n).Xo()&&xy(n,e))}function by(t,e){const n=be(t),r=rl(n);n.F_.delete(e),r.Xo()&&QA(n,e),n.F_.size===0&&(r.Xo()?r.n_():bo(n)&&n.N_.set("Unknown"))}function xy(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rl(t).P_(e)}function QA(t,e){t.L_.xe(e),rl(t).I_(e)}function Dy(t){t.L_=new VU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),rl(t).start(),t.N_.w_()}function Ly(t){return bo(t)&&!rl(t).Zo()&&t.F_.size>0}function bo(t){return be(t).M_.size===0}function YA(t){t.L_=void 0}async function M4(t){t.N_.set("Online")}async function V4(t){t.F_.forEach((e,n)=>{xy(t,e)})}async function F4(t,e){YA(t),Ly(t)?(t.N_.D_(e),Dy(t)):t.N_.set("Unknown")}async function U4(t,e,n){if(t.N_.set("Online"),e instanceof MA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cd(t,r)}else if(e instanceof Oh?t.L_.Ke(e):e instanceof OA?t.L_.He(e):t.L_.We(e),!n.isEqual(ke.min()))try{const r=await HA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(kn.EMPTY_BYTE_STRING,h.snapshotVersion)),QA(s,l);const d=new es(h.target,l,c,h.sequenceNumber);xy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),await Cd(t,r)}}async function Cd(t,e,n){if(!dc(e))throw e;t.M_.add(1),await mc(t),t.N_.set("Offline"),n||(n=()=>HA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Tf(t)})}function XA(t,e){return e().catch(n=>Cd(t,n,e))}async function Sf(t){const e=be(t),n=ys(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;j4(e);)try{const i=await S4(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,$4(e,i)}catch(i){await Cd(e,i)}JA(e)&&ZA(e)}function j4(t){return bo(t)&&t.v_.length<10}function $4(t,e){t.v_.push(e);const n=ys(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function JA(t){return bo(t)&&!ys(t).Zo()&&t.v_.length>0}function ZA(t){ys(t).start()}async function B4(t){ys(t).V_()}async function z4(t){const e=ys(t);for(const n of t.v_)e.d_(n.mutations)}async function W4(t,e,n){const r=t.v_.shift(),i=Iy.from(r,e,n);await XA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Sf(t)}async function H4(t,e){e&&ys(t).E_&&await async function(r,i){if(function(o){return LU(o)&&o!==G.ABORTED}(i.code)){const s=r.v_.shift();ys(r).t_(),await XA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Sf(r)}}(t,e),JA(t)&&ZA(t)}async function HE(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=bo(n);n.M_.add(3),await mc(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Tf(n)}async function q4(t,e){const n=be(t);e?(n.M_.delete(2),await Tf(n)):e||(n.M_.add(2),await mc(n),n.N_.set("Unknown"))}function rl(t){return t.B_||(t.B_=function(n,r,i){const s=be(n);return s.f_(),new b4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:M4.bind(null,t),To:V4.bind(null,t),Ao:F4.bind(null,t),h_:U4.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Ly(t)?Dy(t):t.N_.set("Unknown")):(await t.B_.stop(),YA(t))})),t.B_}function ys(t){return t.k_||(t.k_=function(n,r,i){const s=be(n);return s.f_(),new x4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:B4.bind(null,t),Ao:H4.bind(null,t),R_:z4.bind(null,t),A_:W4.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await Sf(t)):(await t.k_.stop(),t.v_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Oy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function My(t,e){if(Ni("AsyncQueue",`${e}: ${t}`),dc(t))return new ve(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=Kl(),this.sortedSet=new Wt(this.comparator)}static emptySet(e){return new wa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.q_=new Wt(we.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):Ce():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ua{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ua(e,n,wa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class G4{constructor(){this.queries=new nl(e=>wA(e),gf),this.onlineState="Unknown",this.z_=new Set}}async function Q4(t,e){const n=be(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new K4,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=My(o,`Initialization of query '${Ko(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&Vy(n)}async function Y4(t,e){const n=be(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function X4(t,e){const n=be(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Vy(n)}function J4(t,e,n){const r=be(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function Vy(t){t.z_.forEach(e=>{e.next()})}var Pg,KE;(KE=Pg||(Pg={})).J_="default",KE.Cache="cache";class Z4{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Pg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.key=e}}class t1{constructor(e){this.key=e}}class ej{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=je(),this.mutatedKeys=je(),this.Ia=EA(e),this.Ta=new wa(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new qE,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),_=_f(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),S=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let b=!1;p&&_?p.data.isEqual(_.data)?y!==S&&(r.track({type:3,doc:_}),b=!0):this.Ra(p,_)||(r.track({type:2,doc:_}),b=!0,(l&&this.Ia(_,l)>0||c&&this.Ia(_,c)<0)&&(a=!0)):!p&&_?(r.track({type:0,doc:_}),b=!0):p&&!_&&(r.track({type:1,doc:p}),b=!0,(l||c)&&(a=!0)),b&&(_?(o=o.add(_),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,d)=>function(_,y){const S=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return S(_)-S(y)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new Ua(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new qE,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=je(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new t1(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new e1(r))}),n}pa(e){this.la=e.hs,this.Pa=je();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Ua.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class tj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nj{constructor(e){this.key=e,this.wa=!1}}class rj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new nl(a=>wA(a),gf),this.Da=new Map,this.Ca=new Set,this.va=new Wt(we.comparator),this.Fa=new Map,this.Ma=new Py,this.xa={},this.Oa=new Map,this.Na=Fa.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function ij(t,e,n=!0){const r=a1(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await n1(r,e,n,!0),i}async function sj(t,e){const n=a1(t);await n1(n,e,!0,!1)}async function n1(t,e,n,r){const i=await R4(t.localStore,ei(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await oj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&GA(t.remoteStore,i),a}async function oj(t,e,n,r,i){t.Ba=(d,p,_)=>async function(S,b,R,g){let I=b.view.da(R);I.Xi&&(I=await BE(S.localStore,b.query,!1).then(({documents:T})=>b.view.da(T,I)));const M=g&&g.targetChanges.get(b.targetId),z=g&&g.targetMismatches.get(b.targetId)!=null,k=b.view.applyChanges(I,S.isPrimaryClient,M,z);return QE(S,b.targetId,k.fa),k.snapshot}(t,d,p,_);const s=await BE(t.localStore,e,!0),o=new ej(e,s.hs),a=o.da(s.documents),l=pc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);QE(t,n,c.fa);const h=new tj(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function aj(t,e,n){const r=be(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!gf(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ag(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&by(r.remoteStore,i.targetId),kg(r,i.targetId)}).catch(hc)):(kg(r,i.targetId),await Ag(r.localStore,i.targetId,!0))}async function lj(t,e){const n=be(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),by(n.remoteStore,r.targetId))}async function uj(t,e,n){const r=gj(t);try{const i=await function(o,a){const l=be(o),c=Qt.now(),h=a.reduce((_,y)=>_.add(y.key),je());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let y=bi(),S=je();return l.os.getEntries(_,h).next(b=>{y=b,y.forEach((R,g)=>{g.isValidDocument()||(S=S.add(R))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,y)).next(b=>{d=b;const R=[];for(const g of a){const I=kU(g,d.get(g.key).overlayedDocument);I!=null&&R.push(new ks(g.key,I,fA(I.value.mapValue),ti.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,R,a)}).next(b=>{p=b;const R=b.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(_,b.batchId,R)})}).then(()=>({batchId:p.batchId,changes:SA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Wt(Xe)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await gc(r,i.changes),await Sf(r.remoteStore)}catch(i){const s=My(i,"Failed to persist write");n.reject(s)}}async function r1(t,e){const n=be(t);try{const r=await E4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ct(o.wa):i.removedDocuments.size>0&&(ct(o.wa),o.wa=!1))}),await gc(n,r,e)}catch(r){await hc(r)}}function GE(t,e,n){const r=be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=be(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.U_)p.j_(a)&&(c=!0)}),c&&Vy(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cj(t,e,n){const r=be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Wt(we.comparator);o=o.insert(s,Sn.newNoDocument(s,ke.min()));const a=je().add(s),l=new wf(ke.min(),new Map,new Wt(Xe),o,a);await r1(r,l),r.va=r.va.remove(s),r.Fa.delete(e),Fy(r)}else await Ag(r.localStore,e,!1).then(()=>kg(r,e,n)).catch(hc)}async function hj(t,e){const n=be(t),r=e.batch.batchId;try{const i=await w4(n.localStore,e);s1(n,r,null),i1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gc(n,i)}catch(i){await hc(i)}}async function dj(t,e,n){const r=be(t);try{const i=await function(o,a){const l=be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(ct(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);s1(r,e,n),i1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gc(r,i)}catch(i){await hc(i)}}function i1(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function s1(t,e,n){const r=be(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function kg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||o1(t,r)})}function o1(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(by(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Fy(t))}function QE(t,e,n){for(const r of n)r instanceof e1?(t.Ma.addReference(r.key,e),fj(t,r)):r instanceof t1?(ue("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||o1(t,r.key)):Ce()}function fj(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(ue("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Fy(t))}function Fy(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new we(Lt.fromString(e)),r=t.Na.next();t.Fa.set(r,new nj(n)),t.va=t.va.insert(n,r),GA(t.remoteStore,new es(ei(Ry(n.path)),r,"TargetPurposeLimboResolution",yy.oe))}}async function gc(t,e,n){const r=be(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Ny.Ki(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=be(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>K.forEach(c,p=>K.forEach(p.qi,_=>h.persistence.referenceDelegate.addReference(d,p.targetId,_)).next(()=>K.forEach(p.Qi,_=>h.persistence.referenceDelegate.removeReference(d,p.targetId,_)))))}catch(d){if(!dc(d))throw d;ue("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const _=h.ns.get(p),y=_.snapshotVersion,S=_.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(p,S)}}}(r.localStore,s))}async function pj(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=await WA(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new ve(G.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gc(n,r.us)}}function mj(t,e){const n=be(t),r=n.Fa.get(e);if(r&&r.wa)return je().add(r.key);{let i=je();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function a1(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=r1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cj.bind(null,e),e.Sa.h_=X4.bind(null,e.eventManager),e.Sa.ka=J4.bind(null,e.eventManager),e}function gj(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dj.bind(null,e),e}class YE{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ef(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return v4(this.persistence,new _4,e.initialUser,this.serializer)}createPersistence(e){return new p4(ky.Hr,this.serializer)}createSharedClientState(e){return new C4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class _j{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>GE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pj.bind(null,this.syncEngine),await q4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new G4}()}createDatastore(e){const n=Ef(e.databaseInfo.databaseId),r=function(s){return new N4(s)}(e.databaseInfo);return function(s,o,a,l){return new D4(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new O4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>GE(this.syncEngine,n,0),function(){return WE.D()?new WE:new A4}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new rj(i,s,o,a,l,c);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=be(r);ue("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await mc(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=En.UNAUTHENTICATED,this.clientId=cA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ue("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ue("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ve(G.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=My(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gp(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await WA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function XE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ej(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>HE(e.remoteStore,i)),t._onlineComponents=e}function wj(t){return t.name==="FirebaseError"?t.code===G.FAILED_PRECONDITION||t.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Ej(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!wj(n))throw n;La("Error using user provided cache. Falling back to memory cache: "+n),await Gp(t,new YE)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await Gp(t,new YE);return t._offlineComponents}async function l1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await XE(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await XE(t,new _j))),t._onlineComponents}function Tj(t){return l1(t).then(e=>e.syncEngine)}async function Sj(t){const e=await l1(t),n=e.eventManager;return n.onListen=ij.bind(null,e.syncEngine),n.onUnlisten=aj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lj.bind(null,e.syncEngine),n}function Rj(t,e,n={}){const r=new hs;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new yj({next:p=>{o.enqueueAndForget(()=>Y4(s,d));const _=p.docs.has(a);!_&&p.fromCache?c.reject(new ve(G.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&l&&l.source==="server"?c.reject(new ve(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Z4(Ry(a.path),h,{includeMetadataChanges:!0,ra:!0});return Q4(s,d)}(await Sj(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t,e,n){if(!n)throw new ve(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Cj(t,e,n,r){if(e===!0&&r===!0)throw new ve(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZE(t){if(!we.isDocumentKey(t))throw new ve(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Uy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce()}function _o(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uy(t);throw new ve(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ve(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ve(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FF;switch(r.type){case"firstParty":return new BF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=JE.get(n);r&&(ue("ComponentProvider","Removing Datastore"),JE.delete(n),r.terminate())}(this),Promise.resolve()}}function Aj(t,e,n,r={}){var i;const s=(t=_o(t,jy))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&La("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=En.MOCK_USER;else{a=OL(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ve(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new En(c)}t._authCredentials=new UF(new uA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $y(this.firestore,e,this._query)}}class or{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Qu extends $y{constructor(e,n,r){super(e,n,Ry(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new we(e))}withConverter(e){return new Qu(this.firestore,e,this._path)}}function jn(t,e,...n){if(t=Pn(t),arguments.length===1&&(e=cA.newId()),Ij("doc","path",e),t instanceof jy){const r=Lt.fromString(e,...n);return ZE(r),new or(t,null,new we(r))}{if(!(t instanceof or||t instanceof Qu))throw new ve(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return ZE(r),new or(t.firestore,t instanceof Qu?t.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new qA(this,"async_queue_retry"),this.hu=()=>{const n=Kp();n&&ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Kp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Kp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new hs;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!dc(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ni("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=Oy.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Ce()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}class Rf extends jy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Pj}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||h1(this),this._firestoreClient.terminate()}}function kj(t,e){const n=typeof t=="object"?t:JI(),r=typeof t=="string"?t:"(default)",i=oc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=LL("firestore");s&&Aj(i,...s)}return i}function c1(t){return t._firestoreClient||h1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function h1(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new tU(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,u1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new vj(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ja(kn.fromBase64String(e))}catch(n){throw new ve(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ja(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=/^__.*__$/;class bj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ks(e,this.data,this.fieldMask,n,this.fieldTransforms):new fc(e,this.data,n,this.fieldTransforms)}}class d1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ks(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function f1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class Wy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Wy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Ad(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(f1(this.fu)&&Nj.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class xj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ef(e)}Fu(e,n,r,i=!1){return new Wy({fu:e,methodName:n,vu:r,path:un.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function p1(t){const e=t._freezeSettings(),n=Ef(t._databaseId);return new xj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dj(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Hy("Data must be an object, but it was:",o,r);const a=m1(r,o);let l,c;if(s.merge)l=new ir(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Ng(e,d,n);if(!o.contains(p))throw new ve(G.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);_1(h,p)||h.push(p)}l=new ir(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new bj(new Fn(a),l,c)}class Cf extends By{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cf}}function Lj(t,e,n,r){const i=t.Fu(1,e,n);Hy("Data must be an object, but it was:",i,r);const s=[],o=Fn.empty();No(r,(l,c)=>{const h=qy(e,l,n);c=Pn(c);const d=i.Su(h);if(c instanceof Cf)s.push(h);else{const p=Af(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new ir(s);return new d1(o,a,i.fieldTransforms)}function Oj(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[Ng(e,r,n)],l=[i];if(s.length%2!=0)throw new ve(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Ng(e,s[p])),l.push(s[p+1]);const c=[],h=Fn.empty();for(let p=a.length-1;p>=0;--p)if(!_1(c,a[p])){const _=a[p];let y=l[p];y=Pn(y);const S=o.Su(_);if(y instanceof Cf)c.push(_);else{const b=Af(y,S);b!=null&&(c.push(_),h.set(_,b))}}const d=new ir(c);return new d1(h,d,o.fieldTransforms)}function Af(t,e){if(g1(t=Pn(t)))return Hy("Unsupported field value:",e,t),m1(t,e);if(t instanceof By)return function(r,i){if(!f1(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Af(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Qt.fromDate(r);return{timestampValue:Id(i.serializer,s)}}if(r instanceof Qt){const s=new Qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Id(i.serializer,s)}}if(r instanceof zy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ja)return{bytesValue:VA(i.serializer,r._byteString)};if(r instanceof or){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ay(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Uy(r)}`)}(t,e)}function m1(t,e){const n={};return hA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):No(t,(r,i)=>{const s=Af(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function g1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qt||t instanceof zy||t instanceof ja||t instanceof or||t instanceof By)}function Hy(t,e,n){if(!g1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Uy(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Ng(t,e,n){if((e=Pn(e))instanceof If)return e._internalPath;if(typeof e=="string")return qy(t,e);throw Ad("Field path arguments must be of type string or ",t,!1,void 0,n)}const Mj=new RegExp("[~\\*/\\[\\]]");function qy(t,e,n){if(e.search(Mj)>=0)throw Ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new If(...e.split("."))._internalPath}catch{throw Ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ad(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ve(G.INVALID_ARGUMENT,a+t+l)}function _1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(v1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Vj extends y1{data(){return super.data()}}function v1(t,e){return typeof e=="string"?qy(t,e):e instanceof If?e._internalPath:e._delegate._internalPath}class Fj{convertValue(e,n="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return No(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new zy(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const n=_s(e);return new Qt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Lt.fromString(e);ct(zA(r));const i=new Hu(r.get(1),r.get(3)),s=new we(r.popFirst(5));return i.isEqual(n)||Ni(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class w1 extends y1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $j(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(v1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $j extends w1{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t){t=_o(t,or);const e=_o(t.firestore,Rf);return Rj(c1(e),t._key).then(n=>Wj(e,t,n))}class Bj extends Fj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ja(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,n)}}function zj(t,e,n){t=_o(t,or);const r=_o(t.firestore,Rf),i=Uj(t.converter,e);return E1(r,[Dj(p1(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ti.none())])}function Yu(t,e,n,...r){t=_o(t,or);const i=_o(t.firestore,Rf),s=p1(i);let o;return o=typeof(e=Pn(e))=="string"||e instanceof If?Oj(s,"updateDoc",t._key,e,n,r):Lj(s,"updateDoc",t._key,e),E1(i,[o.toMutation(t._key,ti.exists(!0))])}function E1(t,e){return function(r,i){const s=new hs;return r.asyncQueue.enqueueAndForget(async()=>uj(await Tj(r),i,s)),s.promise}(c1(t),e)}function Wj(t,e,n){const r=n.docs.get(e._key),i=new Bj(t);return new w1(t,i,e._key,r,new jj(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){tl=i})(Po),Vr(new Er("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Rf(new jF(r.getProvider("auth-internal")),new WF(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ve(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),qn(TE,"4.6.4",e),qn(TE,"4.6.4","esm2017")})();const Hj={apiKey:"AIzaSyC6iK6Lrux-4MEpEc-zJYFrdZaPLjGUhNQ",authDomain:"todoreactapp-74bab.firebaseapp.com",databaseURL:"https://todoreactapp-74bab-default-rtdb.europe-west1.firebasedatabase.app",projectId:"todoreactapp-74bab",storageBucket:"todoreactapp-74bab.appspot.com",messagingSenderId:"590837115647",appId:"1:590837115647:web:c608d9ebb993d4e2427aca",measurementId:"G-VG9R1F5WT0"},qj=XI(Hj),$n=kj(qj),rn=MF();var tT={};const nT="@firebase/database",rT="1.0.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T1="";function Kj(t){T1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ln(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Uu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Di(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Gj(e)}}catch{}return new Qj},Js=S1("localStorage"),Yj=S1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new sc("@firebase/database"),Xj=function(){let t=1;return function(){return t++}}(),R1=function(t){const e=YL(t),n=new HL;n.update(e);const r=n.digest();return Z_.encodeByteArray(r)},_c=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=_c.apply(null,r):typeof r=="object"?e+=ln(r):e+=r,e+=" "}return e};let du=null,iT=!0;const Jj=function(t,e){se(!e,"Can't turn on custom loggers persistently."),Ea.logLevel=Ue.VERBOSE,du=Ea.log.bind(Ea)},Rn=function(...t){if(iT===!0&&(iT=!1,du===null&&Yj.get("logging_enabled")===!0&&Jj()),du){const e=_c.apply(null,t);du(e)}},yc=function(t){return function(...e){Rn(t,...e)}},bg=function(...t){const e="FIREBASE INTERNAL ERROR: "+_c(...t);Ea.error(e)},yo=function(...t){const e=`FIREBASE FATAL ERROR: ${_c(...t)}`;throw Ea.error(e),new Error(e)},ar=function(...t){const e="FIREBASE WARNING: "+_c(...t);Ea.warn(e)},Zj=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ar("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},I1=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},e$=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},$a="[MIN_NAME]",vo="[MAX_NAME]",il=function(t,e){if(t===e)return 0;if(t===$a||e===vo)return-1;if(e===$a||t===vo)return 1;{const n=sT(t),r=sT(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},t$=function(t,e){return t===e?0:t<e?-1:1},Nl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ln(e))},Ky=function(t){if(typeof t!="object"||t===null)return ln(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ln(e[r]),n+=":",n+=Ky(t[e[r]]);return n+="}",n},C1=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Tr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const A1=function(t){se(!I1(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},n$=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},r$=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},i$=new RegExp("^-?(0*)\\d{1,10}$"),s$=-2147483648,o$=2147483647,sT=function(t){if(i$.test(t)){const e=Number(t);if(e>=s$&&e<=o$)return e}return null},vc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ar("Exception was thrown by user callback.",n),e},Math.floor(0))}},a$=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ar(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Rn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ar(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="5",P1="v",k1="s",N1="r",b1="f",x1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,D1="ls",L1="p",xg="ac",O1="websocket",M1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Js.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Js.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function h$(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function V1(t,e,n){se(typeof e=="string","typeof type must == string"),se(typeof n=="object","typeof params must == object");let r;if(e===O1)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===M1)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);h$(t)&&(n.ns=t.namespace);const i=[];return Tr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(){this.counters_={}}incrementCounter(e,n=1){Di(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return PL(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp={},Yp={};function Qy(t){const e=t.toString();return Qp[e]||(Qp[e]=new d$),Qp[e]}function f$(t,e){const n=t.toString();return Yp[n]||(Yp[n]=e()),Yp[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="start",m$="close",g$="pLPCommand",_$="pRTLPCB",F1="id",U1="pw",j1="ser",y$="cb",v$="seg",w$="ts",E$="d",T$="dframe",$1=1870,B1=30,S$=$1-B1,R$=25e3,I$=3e4;class ua{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yc(e),this.stats_=Qy(n),this.urlFn=l=>(this.appCheckToken&&(l[xg]=this.appCheckToken),V1(n,M1,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new p$(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(I$)),e$(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yy((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===oT)this.id=a,this.password=l;else if(o===m$)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[oT]="t",r[j1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[y$]=this.scriptTagHolder.uniqueCallbackIdentifier),r[P1]=Gy,this.transportSessionId&&(r[k1]=this.transportSessionId),this.lastSessionId&&(r[D1]=this.lastSessionId),this.applicationId&&(r[L1]=this.applicationId),this.appCheckToken&&(r[xg]=this.appCheckToken),typeof location<"u"&&location.hostname&&x1.test(location.hostname)&&(r[N1]=b1);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ua.forceAllow_=!0}static forceDisallow(){ua.forceDisallow_=!0}static isAvailable(){return ua.forceAllow_?!0:!ua.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!n$()&&!r$()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ln(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=VI(n),i=C1(r,S$);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[T$]="t",r[F1]=e,r[U1]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ln(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Yy{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Xj(),window[g$+this.uniqueCallbackIdentifier]=e,window[_$+this.uniqueCallbackIdentifier]=n,this.myIFrame=Yy.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Rn("frame writing exception"),a.stack&&Rn(a.stack),Rn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Rn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[F1]=this.myID,e[U1]=this.myPW,e[j1]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+B1+r.length<=$1;){const o=this.pendingSegs.shift();r=r+"&"+v$+i+"="+o.seg+"&"+w$+i+"="+o.ts+"&"+E$+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(R$)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Rn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$=16384,A$=45e3;let Pd=null;typeof MozWebSocket<"u"?Pd=MozWebSocket:typeof WebSocket<"u"&&(Pd=WebSocket);class br{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yc(this.connId),this.stats_=Qy(n),this.connURL=br.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[P1]=Gy,typeof location<"u"&&location.hostname&&x1.test(location.hostname)&&(o[N1]=b1),n&&(o[k1]=n),r&&(o[D1]=r),i&&(o[xg]=i),s&&(o[L1]=s),V1(e,O1,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Js.set("previous_websocket_failure",!0);try{let r;WI(),this.mySock=new Pd(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){br.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Pd!==null&&!br.forceDisallow_}static previouslyFailed(){return Js.isInMemoryStorage||Js.get("previous_websocket_failure")===!0}markConnectionHealthy(){Js.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Uu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(se(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ln(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=C1(n,C$);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(A$))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}br.responsesRequiredToBeHealthy=2;br.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ua,br]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=br&&br.isAvailable();let r=n&&!br.previouslyFailed();if(e.webSocketOnly&&(n||ar("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[br];else{const i=this.transports_=[];for(const s of Xu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Xu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$=6e4,k$=5e3,N$=10*1024,b$=100*1024,Xp="t",aT="d",x$="s",lT="r",D$="e",uT="o",cT="a",hT="n",dT="p",L$="h";class O${constructor(e,n,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yc("c:"+this.id+":"),this.transportManager_=new Xu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=fu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>b$?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>N$?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Xp in e){const n=e[Xp];n===cT?this.upgradeIfSecondaryHealthy_():n===lT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===uT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Nl("t",e),r=Nl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:dT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Nl("t",e),r=Nl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Nl(Xp,e);if(aT in e){const r=e[aT];if(n===L$){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===hT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===x$?this.onConnectionShutdown_(r):n===lT?this.onReset_(r):n===D$?bg("Server Error: "+r):n===uT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bg("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Gy!==r&&ar("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),fu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(P$))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(k$))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:dT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Js.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.allowedEvents_=e,this.listeners_={},se(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){se(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends W1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ty()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new kd}getInitialEvent(e){return se(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=32,pT=768;class yt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function rt(){return new yt("")}function qe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ws(t){return t.pieces_.length-t.pieceNum_}function mt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new yt(t.pieces_,e)}function H1(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function M$(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function q1(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function K1(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new yt(e,0)}function tn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof yt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new yt(n,0)}function $e(t){return t.pieceNum_>=t.pieces_.length}function gr(t,e){const n=qe(t),r=qe(e);if(n===null)return e;if(n===r)return gr(mt(t),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function G1(t,e){if(ws(t)!==ws(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function xr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ws(t)>ws(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class V${constructor(e,n){this.errorPrefix_=n,this.parts_=q1(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=af(this.parts_[r]);Q1(this)}}function F$(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=af(e),Q1(t)}function U$(t){const e=t.parts_.pop();t.byteLength_-=af(e),t.parts_.length>0&&(t.byteLength_-=1)}function Q1(t){if(t.byteLength_>pT)throw new Error(t.errorPrefix_+"has a key path longer than "+pT+" bytes ("+t.byteLength_+").");if(t.parts_.length>fT)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fT+") or object contains a cycle "+Bs(t))}function Bs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy extends W1{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Xy}getInitialEvent(e){return se(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=1e3,j$=60*5*1e3,mT=30*1e3,$$=1.3,B$=3e4,z$="server_kill",gT=3;class Ri extends z1{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ri.nextPersistentConnectionId_++,this.log_=yc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bl,this.maxReconnectDelay_=j$,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!WI())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&kd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(ln(s)),se(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ey,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),se(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Ri.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Di(e,"w")){const r=Da(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ar(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||WL(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=mT)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=zL(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ln(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):bg("Unrecognized action received from server: "+ln(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){se(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>B$&&(this.reconnectDelay_=bl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$$)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ri.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){se(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Rn("getToken() completed but was canceled"):(Rn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new O$(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{ar(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(z$)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ar(d),l())}}}interrupt(e){Rn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Rn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],sg(this.interruptReasons_)&&(this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Ky(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new yt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Rn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gT&&(this.reconnectDelay_=mT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Rn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+T1.replace(/\./g,"-")]=1,ty()?e["framework.cordova"]=1:zI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=kd.getInstance().currentlyOnline();return sg(this.interruptReasons_)&&e}}Ri.nextPersistentConnectionId_=0;Ri.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ke(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ke($a,e),i=new Ke($a,n);return this.compare(r,i)!==0}minPost(){return Ke.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh;class Y1 extends Pf{static get __EMPTY_NODE(){return lh}static set __EMPTY_NODE(e){lh=e}compare(e,n){return il(e.name,n.name)}isDefinedOn(e){throw Ja("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ke.MIN}maxPost(){return new Ke(vo,lh)}makePost(e,n){return se(typeof e=="string","KeyIndex indexValue must always be a string."),new Ke(e,lh)}toString(){return".key"}}const Ta=new Y1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class en{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??en.RED,this.left=i??Bn.EMPTY_NODE,this.right=s??Bn.EMPTY_NODE}copy(e,n,r,i,s){return new en(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Bn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}en.RED=!0;en.BLACK=!1;class W${copy(e,n,r,i,s){return this}insert(e,n,r){return new en(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Bn{constructor(e,n=Bn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Bn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,en.BLACK,null,null))}remove(e){return new Bn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,en.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new uh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new uh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new uh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new uh(this.root_,null,this.comparator_,!0,e)}}Bn.EMPTY_NODE=new W$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(t,e){return il(t.name,e.name)}function Jy(t,e){return il(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dg;function q$(t){Dg=t}const X1=function(t){return typeof t=="number"?"number:"+A1(t):"string:"+t},J1=function(t){if(t.isLeafNode()){const e=t.val();se(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Di(e,".sv"),"Priority must be a string or number.")}else se(t===Dg||t.isEmpty(),"priority of unexpected type.");se(t===Dg||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _T;class Xt{constructor(e,n=Xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,se(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),J1(this.priorityNode_)}static set __childrenNodeConstructor(e){_T=e}static get __childrenNodeConstructor(){return _T}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Xt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:qe(e)===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=qe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(se(r!==".priority"||ws(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+X1(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=A1(this.value_):e+=this.value_,this.lazyHash_=R1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Xt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Xt.__childrenNodeConstructor?-1:(se(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Xt.VALUE_TYPE_ORDER.indexOf(n),s=Xt.VALUE_TYPE_ORDER.indexOf(r);return se(i>=0,"Unknown leaf type: "+n),se(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z1,eP;function K$(t){Z1=t}function G$(t){eP=t}class Q$ extends Pf{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?il(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ke.MIN}maxPost(){return new Ke(vo,new Xt("[PRIORITY-POST]",eP))}makePost(e,n){const r=Z1(e);return new Ke(n,new Xt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Cn=new Q$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$=Math.log(2);class X${constructor(e){const n=s=>parseInt(Math.log(s)/Y$,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Nd=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new en(p,d.node,en.BLACK,null,null);{const _=parseInt(h/2,10)+l,y=i(l,_),S=i(_+1,c);return d=t[_],p=n?n(d):d,new en(p,d.node,en.BLACK,y,S)}},s=function(l){let c=null,h=null,d=t.length;const p=function(y,S){const b=d-y,R=d;d-=y;const g=i(b+1,R),I=t[b],M=n?n(I):I;_(new en(M,I.node,S,null,g))},_=function(y){c?(c.left=y,c=y):(h=y,c=y)};for(let y=0;y<l.count;++y){const S=l.nextBitIsOne(),b=Math.pow(2,l.count-(y+1));S?p(b,en.BLACK):(p(b,en.BLACK),p(b,en.RED))}return h},o=new X$(t.length),a=s(o);return new Bn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp;const Ho={};class wi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return se(Ho&&Cn,"ChildrenNode.ts has not been loaded"),Jp=Jp||new wi({".priority":Ho},{".priority":Cn}),Jp}get(e){const n=Da(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Bn?n:null}hasIndex(e){return Di(this.indexSet_,e.toString())}addIndex(e,n){se(e!==Ta,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ke.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Nd(r,e.getCompare()):a=Ho;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new wi(h,c)}addToIndexes(e,n){const r=hd(this.indexes_,(i,s)=>{const o=Da(this.indexSet_,s);if(se(o,"Missing index implementation for "+s),i===Ho)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ke.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Nd(a,o.getCompare())}else return Ho;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Ke(e.name,a))),l.insert(e,e.node)}});return new wi(r,this.indexSet_)}removeFromIndexes(e,n){const r=hd(this.indexes_,i=>{if(i===Ho)return i;{const s=n.get(e.name);return s?i.remove(new Ke(e.name,s)):i}});return new wi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl;class tt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&J1(this.priorityNode_),this.children_.isEmpty()&&se(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xl||(xl=new tt(new Bn(Jy),null,wi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xl}updatePriority(e){return this.children_.isEmpty()?this:new tt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?xl:n}}getChild(e){const n=qe(e);return n===null?this:this.getImmediateChild(n).getChild(mt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(se(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ke(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?xl:this.priorityNode_;return new tt(i,o,s)}}updateChild(e,n){const r=qe(e);if(r===null)return n;{se(qe(e)!==".priority"||ws(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(mt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Cn,(o,a)=>{n[o]=a.val(e),r++,s&&tt.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+X1(this.getPriority().val())+":"),this.forEachChild(Cn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":R1(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ke(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ke(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ke(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ke.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ke.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wc?-1:0}withIndex(e){if(e===Ta||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new tt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ta||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Cn),i=n.getIterator(Cn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ta?null:this.indexMap_.get(e.toString())}}tt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class J$ extends tt{constructor(){super(new Bn(Jy),tt.EMPTY_NODE,wi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tt.EMPTY_NODE}isEmpty(){return!1}}const wc=new J$;Object.defineProperties(Ke,{MIN:{value:new Ke($a,tt.EMPTY_NODE)},MAX:{value:new Ke(vo,wc)}});Y1.__EMPTY_NODE=tt.EMPTY_NODE;Xt.__childrenNodeConstructor=tt;q$(wc);G$(wc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$=!0;function In(t,e=null){if(t===null)return tt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),se(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Xt(n,In(e))}if(!(t instanceof Array)&&Z$){const n=[];let r=!1;if(Tr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=In(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ke(o,l)))}}),n.length===0)return tt.EMPTY_NODE;const s=Nd(n,H$,o=>o.name,Jy);if(r){const o=Nd(n,Cn.getCompare());return new tt(s,In(e),new wi({".priority":o},{".priority":Cn}))}else return new tt(s,In(e),wi.Default)}else{let n=tt.EMPTY_NODE;return Tr(t,(r,i)=>{if(Di(t,r)&&r.substring(0,1)!=="."){const s=In(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(In(e))}}K$(In);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3 extends Pf{constructor(e){super(),this.indexPath_=e,se(!$e(e)&&qe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?il(e.name,n.name):s}makePost(e,n){const r=In(e),i=tt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ke(n,i)}maxPost(){const e=tt.EMPTY_NODE.updateChild(this.indexPath_,wc);return new Ke(vo,e)}toString(){return q1(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3 extends Pf{compare(e,n){const r=e.node.compareTo(n.node);return r===0?il(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ke.MIN}maxPost(){return Ke.MAX}makePost(e,n){const r=In(e);return new Ke(n,r)}toString(){return".value"}}const n3=new t3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){return{type:"value",snapshotNode:t}}function i3(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function s3(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function yT(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function o3(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Cn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return se(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return se(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$a}hasEnd(){return this.endSet_}getIndexEndValue(){return se(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return se(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return se(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Cn}copy(){const e=new Zy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Cn?n="$priority":t.index_===n3?n="$value":t.index_===Ta?n="$key":(se(t.index_ instanceof e3,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ln(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ln(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ln(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ln(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ln(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function wT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Cn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends z1{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=yc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(se(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=bd.getListenId_(e,r),a={};this.listens_[o]=a;const l=vT(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),Da(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",i(p,null)}})}unlisten(e,n){const r=bd.getListenId_(e,n);delete this.listens_[r]}get(e){const n=vT(e._queryParams),r=e._path.toString(),i=new ey;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Za(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Uu(a.responseText)}catch{ar("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&ar("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(){this.rootNode_=tt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(){return{value:null,children:new Map}}function tP(t,e,n){if($e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=qe(e);t.children.has(r)||t.children.set(r,xd());const i=t.children.get(r);e=mt(e),tP(i,e,n)}}function Lg(t,e,n){t.value!==null?n(e,t.value):l3(t,(r,i)=>{const s=new yt(e.toString()+"/"+r);Lg(i,s,n)})}function l3(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Tr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=10*1e3,c3=30*1e3,h3=5*60*1e3;class d3{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new u3(e);const r=ET+(c3-ET)*Math.random();fu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Tr(e,(i,s)=>{s>0&&Di(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),fu(this.reportStats_.bind(this),Math.floor(Math.random()*2*h3))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Gr||(Gr={}));function nP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function rP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function iP(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Gr.ACK_USER_WRITE,this.source=nP()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return se(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new yt(e));return new Dd(rt(),n,this.revert)}}else return se(qe(this.path)===e,"operationForChild called for unrelated child."),new Dd(mt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Gr.OVERWRITE}operationForChild(e){return $e(this.path)?new wo(this.source,rt(),this.snap.getImmediateChild(e)):new wo(this.source,mt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Gr.MERGE}operationForChild(e){if($e(this.path)){const n=this.children.subtree(new yt(e));return n.isEmpty()?null:n.value?new wo(this.source,rt(),n.value):new Ju(this.source,rt(),n)}else return se(qe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ju(this.source,mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const n=qe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function f3(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(o3(o.childName,o.snapshotNode))}),Dl(t,i,"child_removed",e,r,n),Dl(t,i,"child_added",e,r,n),Dl(t,i,"child_moved",s,r,n),Dl(t,i,"child_changed",e,r,n),Dl(t,i,"value",e,r,n),i}function Dl(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>m3(t,a,l)),o.forEach(a=>{const l=p3(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function p3(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function m3(t,e,n){if(e.childName==null||n.childName==null)throw Ja("Should only compare child_ events.");const r=new Ke(e.childName,e.snapshotNode),i=new Ke(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t,e){return{eventCache:t,serverCache:e}}function pu(t,e,n,r){return sP(new ev(e,n,r),t.serverCache)}function oP(t,e,n,r){return sP(t.eventCache,new ev(e,n,r))}function Og(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Eo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zp;const g3=()=>(Zp||(Zp=new Bn(t$)),Zp);class pt{constructor(e,n=g3()){this.value=e,this.children=n}static fromObject(e){let n=new pt(null);return Tr(e,(r,i)=>{n=n.set(new yt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:rt(),value:this.value};if($e(e))return null;{const r=qe(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(mt(e),n);return s!=null?{path:tn(new yt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const n=qe(e),r=this.children.get(n);return r!==null?r.subtree(mt(e)):new pt(null)}}set(e,n){if($e(e))return new pt(n,this.children);{const r=qe(e),s=(this.children.get(r)||new pt(null)).set(mt(e),n),o=this.children.insert(r,s);return new pt(this.value,o)}}remove(e){if($e(e))return this.children.isEmpty()?new pt(null):new pt(null,this.children);{const n=qe(e),r=this.children.get(n);if(r){const i=r.remove(mt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new pt(null):new pt(this.value,s)}else return this}}get(e){if($e(e))return this.value;{const n=qe(e),r=this.children.get(n);return r?r.get(mt(e)):null}}setTree(e,n){if($e(e))return n;{const r=qe(e),s=(this.children.get(r)||new pt(null)).setTree(mt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new pt(this.value,o)}}fold(e){return this.fold_(rt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(tn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,rt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if($e(e))return null;{const s=qe(e),o=this.children.get(s);return o?o.findOnPath_(mt(e),tn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,rt(),n)}foreachOnPath_(e,n,r){if($e(e))return this;{this.value&&r(n,this.value);const i=qe(e),s=this.children.get(i);return s?s.foreachOnPath_(mt(e),tn(n,i),r):new pt(null)}}foreach(e){this.foreach_(rt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(tn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.writeTree_=e}static empty(){return new Or(new pt(null))}}function mu(t,e,n){if($e(e))return new Or(new pt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=gr(i,e);return s=s.updateChild(o,n),new Or(t.writeTree_.set(i,s))}else{const i=new pt(n),s=t.writeTree_.setTree(e,i);return new Or(s)}}}function TT(t,e,n){let r=t;return Tr(n,(i,s)=>{r=mu(r,tn(e,i),s)}),r}function ST(t,e){if($e(e))return Or.empty();{const n=t.writeTree_.setTree(e,new pt(null));return new Or(n)}}function Mg(t,e){return xo(t,e)!=null}function xo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(gr(n.path,e)):null}function RT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Cn,(r,i)=>{e.push(new Ke(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ke(r,i.value))}),e}function fs(t,e){if($e(e))return t;{const n=xo(t,e);return n!=null?new Or(new pt(n)):new Or(t.writeTree_.subtree(e))}}function Vg(t){return t.writeTree_.isEmpty()}function Ba(t,e){return aP(rt(),t.writeTree_,e)}function aP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(se(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=aP(tn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(tn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e){return fP(e,t)}function _3(t,e,n,r,i){se(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=mu(t.visibleWrites,e,n)),t.lastWriteId=r}function y3(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function v3(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);se(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&w3(a,r.path)?i=!1:xr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return E3(t),!0;if(r.snap)t.visibleWrites=ST(t.visibleWrites,r.path);else{const a=r.children;Tr(a,l=>{t.visibleWrites=ST(t.visibleWrites,tn(r.path,l))})}return!0}else return!1}function w3(t,e){if(t.snap)return xr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&xr(tn(t.path,n),e))return!0;return!1}function E3(t){t.visibleWrites=uP(t.allWrites,T3,rt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function T3(t){return t.visible}function uP(t,e,n){let r=Or.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)xr(n,o)?(a=gr(n,o),r=mu(r,a,s.snap)):xr(o,n)&&(a=gr(o,n),r=mu(r,rt(),s.snap.getChild(a)));else if(s.children){if(xr(n,o))a=gr(n,o),r=TT(r,a,s.children);else if(xr(o,n))if(a=gr(o,n),$e(a))r=TT(r,rt(),s.children);else{const l=Da(s.children,qe(a));if(l){const c=l.getChild(mt(a));r=mu(r,rt(),c)}}}else throw Ja("WriteRecord should have .snap or .children")}}return r}function cP(t,e,n,r,i){if(!r&&!i){const s=xo(t.visibleWrites,e);if(s!=null)return s;{const o=fs(t.visibleWrites,e);if(Vg(o))return n;if(n==null&&!Mg(o,rt()))return null;{const a=n||tt.EMPTY_NODE;return Ba(o,a)}}}else{const s=fs(t.visibleWrites,e);if(!i&&Vg(s))return n;if(!i&&n==null&&!Mg(s,rt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(xr(c.path,e)||xr(e,c.path))},a=uP(t.allWrites,o,e),l=n||tt.EMPTY_NODE;return Ba(a,l)}}}function S3(t,e,n){let r=tt.EMPTY_NODE;const i=xo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Cn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=fs(t.visibleWrites,e);return n.forEachChild(Cn,(o,a)=>{const l=Ba(fs(s,new yt(o)),a);r=r.updateImmediateChild(o,l)}),RT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=fs(t.visibleWrites,e);return RT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function R3(t,e,n,r,i){se(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=tn(e,n);if(Mg(t.visibleWrites,s))return null;{const o=fs(t.visibleWrites,s);return Vg(o)?i.getChild(n):Ba(o,i.getChild(n))}}function I3(t,e,n,r){const i=tn(e,n),s=xo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=fs(t.visibleWrites,i);return Ba(o,r.getNode().getImmediateChild(n))}else return null}function C3(t,e){return xo(t.visibleWrites,e)}function A3(t,e,n,r,i,s,o){let a;const l=fs(t.visibleWrites,e),c=xo(l,rt());if(c!=null)a=c;else if(n!=null)a=Ba(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=p.getNext();for(;_&&h.length<i;)d(_,r)!==0&&h.push(_),_=p.getNext();return h}else return[]}function P3(){return{visibleWrites:Or.empty(),allWrites:[],lastWriteId:-1}}function Fg(t,e,n,r){return cP(t.writeTree,t.treePath,e,n,r)}function hP(t,e){return S3(t.writeTree,t.treePath,e)}function IT(t,e,n,r){return R3(t.writeTree,t.treePath,e,n,r)}function Ld(t,e){return C3(t.writeTree,tn(t.treePath,e))}function k3(t,e,n,r,i,s){return A3(t.writeTree,t.treePath,e,n,r,i,s)}function tv(t,e,n){return I3(t.writeTree,t.treePath,e,n)}function dP(t,e){return fP(tn(t.treePath,e),t.writeTree)}function fP(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;se(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),se(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,yT(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,s3(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,i3(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,yT(r,e.snapshotNode,i.oldSnap));else throw Ja("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const pP=new b3;class nv{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new ev(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tv(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Eo(this.viewCache_),s=k3(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function x3(t,e){se(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),se(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function D3(t,e,n,r,i){const s=new N3;let o,a;if(n.type===Gr.OVERWRITE){const c=n;c.source.fromUser?o=Ug(t,e,c.path,c.snap,r,i,s):(se(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$e(c.path),o=Od(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Gr.MERGE){const c=n;c.source.fromUser?o=O3(t,e,c.path,c.children,r,i,s):(se(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=jg(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Gr.ACK_USER_WRITE){const c=n;c.revert?o=F3(t,e,c.path,r,i,s):o=M3(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Gr.LISTEN_COMPLETE)o=V3(t,e,n.path,r,s);else throw Ja("Unknown operation type: "+n.type);const l=s.getChanges();return L3(e,o,l),{viewCache:o,changes:l}}function L3(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Og(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(r3(Og(e)))}}function mP(t,e,n,r,i,s){const o=e.eventCache;if(Ld(r,n)!=null)return e;{let a,l;if($e(n))if(se(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Eo(e),h=c instanceof tt?c:tt.EMPTY_NODE,d=hP(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Fg(r,Eo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=qe(n);if(c===".priority"){se(ws(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=IT(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=mt(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const p=IT(r,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=tv(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,i,s):a=o.getNode()}}return pu(e,a,o.isFullyInitialized()||$e(n),t.filter.filtersNodes())}}function Od(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if($e(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),_,null)}else{const _=qe(n);if(!l.isCompleteForPath(n)&&ws(n)>1)return e;const y=mt(n),b=l.getNode().getImmediateChild(_).updateChild(y,r);_===".priority"?c=h.updatePriority(l.getNode(),b):c=h.updateChild(l.getNode(),_,b,y,pP,null)}const d=oP(e,c,l.isFullyInitialized()||$e(n),h.filtersNodes()),p=new nv(i,d,s);return mP(t,d,n,i,p,a)}function Ug(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const h=new nv(i,e,s);if($e(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=pu(e,c,!0,t.filter.filtersNodes());else{const d=qe(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=pu(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=mt(n),_=a.getNode().getImmediateChild(d);let y;if($e(p))y=r;else{const S=h.getCompleteChild(d);S!=null?H1(p)===".priority"&&S.getChild(K1(p)).isEmpty()?y=S:y=S.updateChild(p,r):y=tt.EMPTY_NODE}if(_.equals(y))l=e;else{const S=t.filter.updateChild(a.getNode(),d,y,p,h,o);l=pu(e,S,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function CT(t,e){return t.eventCache.isCompleteForChild(e)}function O3(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=tn(n,l);CT(e,qe(h))&&(a=Ug(t,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=tn(n,l);CT(e,qe(h))||(a=Ug(t,a,h,c,i,s,o))}),a}function AT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function jg(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;$e(n)?c=r:c=new pt(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const _=e.serverCache.getNode().getImmediateChild(d),y=AT(t,_,p);l=Od(t,l,new yt(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,p)=>{const _=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!_){const y=e.serverCache.getNode().getImmediateChild(d),S=AT(t,y,p);l=Od(t,l,new yt(d),S,i,s,o,a)}}),l}function M3(t,e,n,r,i,s,o){if(Ld(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if($e(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Od(t,e,n,l.getNode().getChild(n),i,s,a,o);if($e(n)){let c=new pt(null);return l.getNode().forEachChild(Ta,(h,d)=>{c=c.set(new yt(h),d)}),jg(t,e,n,c,i,s,a,o)}else return e}else{let c=new pt(null);return r.foreach((h,d)=>{const p=tn(n,h);l.isCompleteForPath(p)&&(c=c.set(h,l.getNode().getChild(p)))}),jg(t,e,n,c,i,s,a,o)}}function V3(t,e,n,r,i){const s=e.serverCache,o=oP(e,s.getNode(),s.isFullyInitialized()||$e(n),s.isFiltered());return mP(t,o,n,r,pP,i)}function F3(t,e,n,r,i,s){let o;if(Ld(r,n)!=null)return e;{const a=new nv(r,e,i),l=e.eventCache.getNode();let c;if($e(n)||qe(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Fg(r,Eo(e));else{const d=e.serverCache.getNode();se(d instanceof tt,"serverChildren would be complete if leaf node"),h=hP(r,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=qe(n);let d=tv(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,mt(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,tt.EMPTY_NODE,mt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Fg(r,Eo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Ld(r,rt())!=null,pu(e,c,o,t.filter.filtersNodes())}}function U3(t,e){const n=Eo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!$e(e)&&!n.getImmediateChild(qe(e)).isEmpty())?n.getChild(e):null}function PT(t,e,n,r){e.type===Gr.MERGE&&e.source.queryId!==null&&(se(Eo(t.viewCache_),"We should always have a full cache before handling merges"),se(Og(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=D3(t.processor_,i,e,n,r);return x3(t.processor_,s.viewCache),se(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,j3(t,s.changes,s.viewCache.eventCache.getNode())}function j3(t,e,n,r){const i=t.eventRegistrations_;return f3(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kT;function $3(t){se(!kT,"__referenceConstructor has already been defined"),kT=t}function rv(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return se(s!=null,"SyncTree gave us an op for an invalid query."),PT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(PT(o,e,n,r));return s}}function iv(t,e){let n=null;for(const r of t.views.values())n=n||U3(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NT;function B3(t){se(!NT,"__referenceConstructor has already been defined"),NT=t}class bT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pt(null),this.pendingWriteTree_=P3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function z3(t,e,n,r,i){return _3(t.pendingWriteTree_,e,n,r,i),i?Nf(t,new wo(nP(),e,n)):[]}function ca(t,e,n=!1){const r=y3(t.pendingWriteTree_,e);if(v3(t.pendingWriteTree_,e)){let s=new pt(null);return r.snap!=null?s=s.set(rt(),!0):Tr(r.children,o=>{s=s.set(new yt(o),!0)}),Nf(t,new Dd(r.path,s,n))}else return[]}function kf(t,e,n){return Nf(t,new wo(rP(),e,n))}function W3(t,e,n){const r=pt.fromObject(n);return Nf(t,new Ju(rP(),e,r))}function H3(t,e,n,r){const i=vP(t,r);if(i!=null){const s=wP(i),o=s.path,a=s.queryId,l=gr(o,e),c=new wo(iP(a),l,n);return EP(t,o,c)}else return[]}function q3(t,e,n,r){const i=vP(t,r);if(i){const s=wP(i),o=s.path,a=s.queryId,l=gr(o,e),c=pt.fromObject(n),h=new Ju(iP(a),l,c);return EP(t,o,h)}else return[]}function gP(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=gr(o,e),c=iv(a,l);if(c)return c});return cP(i,e,s,n,!0)}function Nf(t,e){return _P(e,t.syncPointTree_,null,lP(t.pendingWriteTree_,rt()))}function _P(t,e,n,r){if($e(t.path))return yP(t,e,n,r);{const i=e.get(rt());n==null&&i!=null&&(n=iv(i,rt()));let s=[];const o=qe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=dP(r,o);s=s.concat(_P(a,l,c,h))}return i&&(s=s.concat(rv(i,t,r,n))),s}}function yP(t,e,n,r){const i=e.get(rt());n==null&&i!=null&&(n=iv(i,rt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=dP(r,o),h=t.operationForChild(o);h&&(s=s.concat(yP(h,a,l,c)))}),i&&(s=s.concat(rv(i,t,r,n))),s}function vP(t,e){return t.tagToQueryMap.get(e)}function wP(t){const e=t.indexOf("$");return se(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new yt(t.substr(0,e))}}function EP(t,e,n){const r=t.syncPointTree_.get(e);se(r,"Missing sync point for query tag that we're tracking");const i=lP(t.pendingWriteTree_,e);return rv(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new sv(n)}node(){return this.node_}}class ov{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=tn(this.path_,e);return new ov(this.syncTree_,n)}node(){return gP(this.syncTree_,this.path_)}}const K3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},xT=function(t,e,n){if(!t||typeof t!="object")return t;if(se(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return G3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Q3(t[".sv"],e);se(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},G3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:se(!1,"Unexpected server value: "+t)}},Q3=function(t,e,n){t.hasOwnProperty("increment")||se(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&se(!1,"Unexpected increment value: "+r);const i=e.node();if(se(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Y3=function(t,e,n,r){return av(e,new ov(n,t),r)},X3=function(t,e,n){return av(t,new sv(e),n)};function av(t,e,n){const r=t.getPriority().val(),i=xT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=xT(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Xt(a,In(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Xt(i))),o.forEachChild(Cn,(a,l)=>{const c=av(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function uv(t,e){let n=e instanceof yt?e:new yt(e),r=t,i=qe(n);for(;i!==null;){const s=Da(r.node.children,i)||{children:{},childCount:0};r=new lv(i,r,s),n=mt(n),i=qe(n)}return r}function sl(t){return t.node.value}function TP(t,e){t.node.value=e,$g(t)}function SP(t){return t.node.childCount>0}function J3(t){return sl(t)===void 0&&!SP(t)}function bf(t,e){Tr(t.node.children,(n,r)=>{e(new lv(n,t,r))})}function RP(t,e,n,r){n&&!r&&e(t),bf(t,i=>{RP(i,e,!0,r)}),n&&r&&e(t)}function Z3(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ec(t){return new yt(t.parent===null?t.name:Ec(t.parent)+"/"+t.name)}function $g(t){t.parent!==null&&eB(t.parent,t.name,t)}function eB(t,e,n){const r=J3(n),i=Di(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,$g(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,$g(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=/[\[\].#$\/\u0000-\u001F\u007F]/,nB=/[\[\].#$\u0000-\u001F\u007F]/,em=10*1024*1024,IP=function(t){return typeof t=="string"&&t.length!==0&&!tB.test(t)},rB=function(t){return typeof t=="string"&&t.length!==0&&!nB.test(t)},iB=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),rB(t)},CP=function(t,e,n){const r=n instanceof yt?new V$(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Bs(r));if(typeof e=="function")throw new Error(t+"contains a function "+Bs(r)+" with contents = "+e.toString());if(I1(e))throw new Error(t+"contains "+e.toString()+" "+Bs(r));if(typeof e=="string"&&e.length>em/3&&af(e)>em)throw new Error(t+"contains a string greater than "+em+" utf8 bytes "+Bs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Tr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!IP(o)))throw new Error(t+" contains an invalid key ("+o+") "+Bs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);F$(r,o),CP(t,a,r),U$(r)}),i&&s)throw new Error(t+' contains ".value" child '+Bs(r)+" in addition to actual children.")}},sB=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!IP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!iB(n))throw new Error(QL(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function aB(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!G1(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Do(t,e,n){aB(t,n),lB(t,r=>xr(r,e)||xr(e,r))}function lB(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(uB(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function uB(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();du&&Rn("event: "+n.toString()),vc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB="repo_interrupt",hB=25;class dB{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xd(),this.transactionQueueTree_=new lv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fB(t,e,n){if(t.stats_=Qy(t.repoInfo_),t.forceRestClient_||a$())t.server_=new bd(t.repoInfo_,(r,i,s,o)=>{DT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>LT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ln(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ri(t.repoInfo_,e,(r,i,s,o)=>{DT(t,r,i,s,o)},r=>{LT(t,r)},r=>{mB(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=f$(t.repoInfo_,()=>new d3(t.stats_,t.server_)),t.infoData_=new a3,t.infoSyncTree_=new bT({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=kf(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),cv(t,"connected",!1),t.serverSyncTree_=new bT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Do(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function pB(t){const n=t.infoData_.getNode(new yt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function AP(t){return K3({timestamp:pB(t)})}function DT(t,e,n,r,i){t.dataUpdateCount++;const s=new yt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=hd(n,c=>In(c));o=q3(t.serverSyncTree_,s,l,i)}else{const l=In(n);o=H3(t.serverSyncTree_,s,l,i)}else if(r){const l=hd(n,c=>In(c));o=W3(t.serverSyncTree_,s,l)}else{const l=In(n);o=kf(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=dv(t,s)),Do(t.eventQueue_,a,o)}function LT(t,e){cv(t,"connected",e),e===!1&&_B(t)}function mB(t,e){Tr(e,(n,r)=>{cv(t,n,r)})}function cv(t,e,n){const r=new yt("/.info/"+e),i=In(n);t.infoData_.updateSnapshot(r,i);const s=kf(t.infoSyncTree_,r,i);Do(t.eventQueue_,r,s)}function gB(t){return t.nextWriteId_++}function _B(t){PP(t,"onDisconnectEvents");const e=AP(t),n=xd();Lg(t.onDisconnect_,rt(),(i,s)=>{const o=Y3(i,s,t.serverSyncTree_,e);tP(n,i,o)});let r=[];Lg(n,rt(),(i,s)=>{r=r.concat(kf(t.serverSyncTree_,i,s));const o=EB(t,i);dv(t,o)}),t.onDisconnect_=xd(),Do(t.eventQueue_,rt(),r)}function yB(t){t.persistentConnection_&&t.persistentConnection_.interrupt(cB)}function PP(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Rn(n,...e)}function kP(t,e,n){return gP(t.serverSyncTree_,e,n)||tt.EMPTY_NODE}function hv(t,e=t.transactionQueueTree_){if(e||xf(t,e),sl(e)){const n=bP(t,e);se(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&vB(t,Ec(e),n)}else SP(e)&&bf(e,n=>{hv(t,n)})}function vB(t,e,n){const r=n.map(c=>c.currentWriteId),i=kP(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const h=n[c];se(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=gr(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{PP(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(ca(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();xf(t,uv(t.transactionQueueTree_,e)),hv(t,t.transactionQueueTree_),Do(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)vc(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ar("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}dv(t,e)}},o)}function dv(t,e){const n=NP(t,e),r=Ec(n),i=bP(t,n);return wB(t,i,r),r}function wB(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=gr(n,l.path);let h=!1,d;if(se(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,i=i.concat(ca(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=hB)h=!0,d="maxretry",i=i.concat(ca(t.serverSyncTree_,l.currentWriteId,!0));else{const p=kP(t,l.path,o);l.currentInputSnapshot=p;const _=e[a].update(p.val());if(_!==void 0){CP("transaction failed: Data returned ",_,l.path);let y=In(_);typeof _=="object"&&_!=null&&Di(_,".priority")||(y=y.updatePriority(p.getPriority()));const b=l.currentWriteId,R=AP(t),g=X3(y,p,R);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=g,l.currentWriteId=gB(t),o.splice(o.indexOf(b),1),i=i.concat(z3(t.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),i=i.concat(ca(t.serverSyncTree_,b,!0))}else h=!0,d="nodata",i=i.concat(ca(t.serverSyncTree_,l.currentWriteId,!0))}Do(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}xf(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)vc(r[a]);hv(t,t.transactionQueueTree_)}function NP(t,e){let n,r=t.transactionQueueTree_;for(n=qe(e);n!==null&&sl(r)===void 0;)r=uv(r,n),e=mt(e),n=qe(e);return r}function bP(t,e){const n=[];return xP(t,e,n),n.sort((r,i)=>r.order-i.order),n}function xP(t,e,n){const r=sl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);bf(e,i=>{xP(t,i,n)})}function xf(t,e){const n=sl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,TP(e,n.length>0?n:void 0)}bf(e,r=>{xf(t,r)})}function EB(t,e){const n=Ec(NP(t,e)),r=uv(t.transactionQueueTree_,e);return Z3(r,i=>{tm(t,i)}),tm(t,r),RP(r,i=>{tm(t,i)}),n}function tm(t,e){const n=sl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(se(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(se(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ca(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?TP(e,void 0):n.length=s+1,Do(t.eventQueue_,Ec(e),i);for(let o=0;o<r.length;o++)vc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function SB(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ar(`Invalid query segment '${n}' in query '${t}'`)}return e}const OT=function(t,e){const n=RB(t),r=n.namespace;n.domain==="firebase.com"&&yo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&yo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Zj();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new c$(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new yt(n.pathString)}},RB=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=TB(t.substring(h,d)));const p=SB(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const _=e.slice(0,c);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return $e(this._path)?null:H1(this._path)}get ref(){return new ol(this._repo,this._path)}get _queryIdentifier(){const e=wT(this._queryParams),n=Ky(e);return n==="{}"?"default":n}get _queryObject(){return wT(this._queryParams)}isEqual(e){if(e=Pn(e),!(e instanceof fv))return!1;const n=this._repo===e._repo,r=G1(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+M$(this._path)}}class ol extends fv{constructor(e,n){super(e,n,new Zy,!1)}get parent(){const e=K1(this._path);return e===null?null:new ol(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}$3(ol);B3(ol);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB="FIREBASE_DATABASE_EMULATOR_HOST",Bg={};let CB=!1;function AB(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||yo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=OT(s,i),a=o.repoInfo,l;typeof process<"u"&&tT&&(l=tT[IB]),l?(s=`http://${l}?ns=${a.namespace}`,o=OT(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new u$(t.name,t.options,e);sB("Invalid Firebase Database URL",o),$e(o.path)||yo("Database URL must point to the root of a Firebase Database (not including a child path).");const h=kB(a,t,c,new l$(t.name,n));return new NB(h,t)}function PB(t,e){const n=Bg[e];(!n||n[t.key]!==t)&&yo(`Database ${e}(${t.repoInfo_}) has already been deleted.`),yB(t),delete n[t.key]}function kB(t,e,n,r){let i=Bg[e.name];i||(i={},Bg[e.name]=i);let s=i[t.toURLString()];return s&&yo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new dB(t,CB,n,r),i[t.toURLString()]=s,s}class NB{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(fB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ol(this._repo,rt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(PB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yo("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){Kj(Po),Vr(new Er("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return AB(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),qn(nT,rT,t),qn(nT,rT,"esm2017")}Ri.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ri.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};bB();const xB=t=>U.jsx(xa,{to:"/REACT_VITE_TODOAPP/home",className:"capitalize bg-white rounded-3xl text-black px-4 py-2 hover:bg-transparent hover:border hover:border-white hover:text-white border border-transparent transition-all",children:t.title});var DP={};function DB(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var LB=DB,Oe=LB;function OB(t){return!!t&&typeof t.then=="function"}var gt=OB;function MB(t,e){if(t!=null)return t;throw Oe(e??"Got unexpected null or undefined")}var Tt=MB;function De(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Df{getValue(){throw Oe("BaseLoadable")}toPromise(){throw Oe("BaseLoadable")}valueMaybe(){throw Oe("BaseLoadable")}valueOrThrow(){throw Oe(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Oe("BaseLoadable")}promiseOrThrow(){throw Oe(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Oe("BaseLoadable")}errorOrThrow(){throw Oe(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Oe("BaseLoadable")}}class VB extends Df{constructor(e){super(),De(this,"state","hasValue"),De(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return gt(n)?To(n):za(n)?n:Tc(n)}catch(n){return gt(n)?To(n.next(()=>this.map(e))):Lf(n)}}}class FB extends Df{constructor(e){super(),De(this,"state","hasError"),De(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class LP extends Df{constructor(e){super(),De(this,"state","loading"),De(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return To(this.contents.then(n=>{const r=e(n);if(za(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(gt(n))return n.then(()=>this.map(e).contents);throw n}))}}function Tc(t){return Object.freeze(new VB(t))}function Lf(t){return Object.freeze(new FB(t))}function To(t){return Object.freeze(new LP(t))}function OP(){return Object.freeze(new LP(new Promise(()=>{})))}function UB(t){return t.every(e=>e.state==="hasValue")?Tc(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?Lf(Tt(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):To(Promise.all(t.map(e=>e.contents)))}function MP(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>za(i)?i:gt(i)?To(i):Tc(i)),r=UB(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function za(t){return t instanceof Df}const jB={of:t=>gt(t)?To(t):za(t)?t:Tc(t),error:t=>Lf(t),loading:()=>OP(),all:MP,isLoadable:za};var Lo={loadableWithValue:Tc,loadableWithError:Lf,loadableWithPromise:To,loadableLoading:OP,loadableAll:MP,isLoadable:za,RecoilLoadable:jB},$B=Lo.loadableWithValue,BB=Lo.loadableWithError,zB=Lo.loadableWithPromise,WB=Lo.loadableLoading,HB=Lo.loadableAll,qB=Lo.isLoadable,KB=Lo.RecoilLoadable,Sc=Object.freeze({__proto__:null,loadableWithValue:$B,loadableWithError:BB,loadableWithPromise:zB,loadableLoading:WB,loadableAll:HB,isLoadable:qB,RecoilLoadable:KB});const zg={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function GB(t,e){var n,r;const i=(n=DP[t])===null||n===void 0||(r=n.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw Oe(`process.env.${t} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function QB(t,e){var n;const r=(n=DP[t])===null||n===void 0?void 0:n.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function YB(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(GB("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{zg.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),QB("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{zg.RECOIL_GKS_ENABLED.add(n)})}))}YB();var al=zg;function Of(t){return al.RECOIL_GKS_ENABLED.has(t)}Of.setPass=t=>{al.RECOIL_GKS_ENABLED.add(t)};Of.setFail=t=>{al.RECOIL_GKS_ENABLED.delete(t)};Of.clear=()=>{al.RECOIL_GKS_ENABLED.clear()};var st=Of;function XB(t,e,{error:n}={}){return null}var JB=XB,pv=JB,nm,rm,im;const ZB=(nm=ut.createMutableSource)!==null&&nm!==void 0?nm:ut.unstable_createMutableSource,VP=(rm=ut.useMutableSource)!==null&&rm!==void 0?rm:ut.unstable_useMutableSource,FP=(im=ut.useSyncExternalStore)!==null&&im!==void 0?im:ut.unstable_useSyncExternalStore;function e9(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function t9(){return st("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:st("recoil_sync_external_store")&&FP!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:st("recoil_mutable_source")&&VP!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?st("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:st("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function n9(){return!1}var Rc={createMutableSource:ZB,useMutableSource:VP,useSyncExternalStore:FP,currentRendererSupportsUseSyncExternalStore:e9,reactMode:t9,isFastRefreshEnabled:n9};class mv{constructor(e){De(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class UP extends mv{}class jP extends mv{}function r9(t){return t instanceof UP||t instanceof jP}var Mf={AbstractRecoilValue:mv,RecoilState:UP,RecoilValueReadOnly:jP,isRecoilValue:r9},i9=Mf.AbstractRecoilValue,s9=Mf.RecoilState,o9=Mf.RecoilValueReadOnly,a9=Mf.isRecoilValue,Wa=Object.freeze({__proto__:null,AbstractRecoilValue:i9,RecoilState:s9,RecoilValueReadOnly:o9,isRecoilValue:a9});function l9(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var Vf=l9;class $P{}const u9=new $P,So=new Map,gv=new Map;function c9(t){return Vf(t,e=>Tt(gv.get(e)))}function h9(t){if(So.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function d9(t){al.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&h9(t.key),So.set(t.key,t);const e=t.set==null?new Wa.RecoilValueReadOnly(t.key):new Wa.RecoilState(t.key);return gv.set(t.key,e),e}class BP extends Error{}function f9(t){const e=So.get(t);if(e==null)throw new BP(`Missing definition for RecoilValue: "${t}""`);return e}function p9(t){return So.get(t)}const Md=new Map;function m9(t){var e;if(!st("recoil_memory_managament_2020"))return;const n=So.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;So.delete(t),(r=zP(t))===null||r===void 0||r(),Md.delete(t)}}function g9(t,e){st("recoil_memory_managament_2020")&&(e===void 0?Md.delete(t):Md.set(t,e))}function zP(t){return Md.get(t)}var Qn={nodes:So,recoilValues:gv,registerNode:d9,getNode:f9,getNodeMaybe:p9,deleteNodeConfigIfPossible:m9,setConfigDeletionHandler:g9,getConfigDeletionHandler:zP,recoilValuesForKeys:c9,NodeMissingError:BP,DefaultValue:$P,DEFAULT_VALUE:u9};function _9(t,e){e()}var y9={enqueueExecution:_9};function v9(t,e){return e={exports:{}},t(e,e.exports),e.exports}var w9=v9(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},n={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},c=function(L){return function(){return L}},h=n.hash=function(F){var L=typeof F>"u"?"undefined":e(F);if(L==="number")return F;L!=="string"&&(F+="");for(var q=0,ne=0,ee=F.length;ne<ee;++ne){var oe=F.charCodeAt(ne);q=(q<<5)-q+oe|0}return q},d=function(L){return L-=L>>1&1431655765,L=(L&858993459)+(L>>2&858993459),L=L+(L>>4)&252645135,L+=L>>8,L+=L>>16,L&127},p=function(L,q){return q>>>L&s},_=function(L){return 1<<L},y=function(L,q){return d(L&q-1)},S=function(L,q,ne,ee){var oe=ee;if(!L){var fe=ee.length;oe=new Array(fe);for(var pe=0;pe<fe;++pe)oe[pe]=ee[pe]}return oe[q]=ne,oe},b=function(L,q,ne){var ee=ne.length-1,oe=0,fe=0,pe=ne;if(L)oe=fe=q;else for(pe=new Array(ee);oe<q;)pe[fe++]=ne[oe++];for(++oe;oe<=ee;)pe[fe++]=ne[oe++];return L&&(pe.length=ee),pe},R=function(L,q,ne,ee){var oe=ee.length;if(L){for(var fe=oe;fe>=q;)ee[fe--]=ee[fe];return ee[q]=ne,ee}for(var pe=0,_e=0,Re=new Array(oe+1);pe<q;)Re[_e++]=ee[pe++];for(Re[q]=ne;pe<oe;)Re[++_e]=ee[pe++];return Re},g=1,I=2,M=3,z=4,k={__hamt_isEmpty:!0},T=function(L){return L===k||L&&L.__hamt_isEmpty},v=function(L,q,ne,ee){return{type:g,edit:L,hash:q,key:ne,value:ee,_modify:J}},E=function(L,q,ne){return{type:I,edit:L,hash:q,children:ne,_modify:de}},A=function(L,q,ne){return{type:M,edit:L,mask:q,children:ne,_modify:Z}},P=function(L,q,ne){return{type:z,edit:L,size:q,children:ne,_modify:le}},D=function(L){return L===k||L.type===g||L.type===I},C=function(L,q,ne,ee,oe){for(var fe=[],pe=ee,_e=0,Re=0;pe;++Re)pe&1&&(fe[Re]=oe[_e++]),pe>>>=1;return fe[q]=ne,P(L,_e+1,fe)},Ae=function(L,q,ne,ee){for(var oe=new Array(q-1),fe=0,pe=0,_e=0,Re=ee.length;_e<Re;++_e)if(_e!==ne){var Je=ee[_e];Je&&!T(Je)&&(oe[fe++]=Je,pe|=1<<_e)}return A(L,pe,oe)},Nt=function F(L,q,ne,ee,oe,fe){if(ne===oe)return E(L,ne,[fe,ee]);var pe=p(q,ne),_e=p(q,oe);return A(L,_(pe)|_(_e),pe===_e?[F(L,q+r,ne,ee,oe,fe)]:pe<_e?[ee,fe]:[fe,ee])},St=function(L,q,ne,ee,oe,fe,pe,_e){for(var Re=oe.length,Je=0;Je<Re;++Je){var Vt=oe[Je];if(ne(pe,Vt.key)){var vt=Vt.value,bt=fe(vt);return bt===vt?oe:bt===l?(--_e.value,b(L,Je,oe)):S(L,Je,v(q,ee,pe,bt),oe)}}var Ht=fe();return Ht===l?oe:(++_e.value,S(L,Re,v(q,ee,pe,Ht),oe))},Le=function(L,q){return L===q.edit},J=function(L,q,ne,ee,oe,fe,pe){if(q(fe,this.key)){var _e=ee(this.value);return _e===this.value?this:_e===l?(--pe.value,k):Le(L,this)?(this.value=_e,this):v(L,oe,fe,_e)}var Re=ee();return Re===l?this:(++pe.value,Nt(L,ne,this.hash,this,oe,v(L,oe,fe,Re)))},de=function(L,q,ne,ee,oe,fe,pe){if(oe===this.hash){var _e=Le(L,this),Re=St(_e,L,q,this.hash,this.children,ee,fe,pe);return Re===this.children?this:Re.length>1?E(L,this.hash,Re):Re[0]}var Je=ee();return Je===l?this:(++pe.value,Nt(L,ne,this.hash,this,oe,v(L,oe,fe,Je)))},Z=function(L,q,ne,ee,oe,fe,pe){var _e=this.mask,Re=this.children,Je=p(ne,oe),Vt=_(Je),vt=y(_e,Vt),bt=_e&Vt,Ht=bt?Re[vt]:k,wt=Ht._modify(L,q,ne+r,ee,oe,fe,pe);if(Ht===wt)return this;var li=Le(L,this),N=_e,x=void 0;if(bt&&T(wt)){if(N&=~Vt,!N)return k;if(Re.length<=2&&D(Re[vt^1]))return Re[vt^1];x=b(li,vt,Re)}else if(!bt&&!T(wt)){if(Re.length>=o)return C(L,Je,wt,_e,Re);N|=Vt,x=R(li,vt,wt,Re)}else x=S(li,vt,wt,Re);return li?(this.mask=N,this.children=x,this):A(L,N,x)},le=function(L,q,ne,ee,oe,fe,pe){var _e=this.size,Re=this.children,Je=p(ne,oe),Vt=Re[Je],vt=(Vt||k)._modify(L,q,ne+r,ee,oe,fe,pe);if(Vt===vt)return this;var bt=Le(L,this),Ht=void 0;if(T(Vt)&&!T(vt))++_e,Ht=S(bt,Je,vt,Re);else if(!T(Vt)&&T(vt)){if(--_e,_e<=a)return Ae(L,_e,Je,Re);Ht=S(bt,Je,k,Re)}else Ht=S(bt,Je,vt,Re);return bt?(this.size=_e,this.children=Ht,this):P(L,_e,Ht)};k._modify=function(F,L,q,ne,ee,oe,fe){var pe=ne();return pe===l?k:(++fe.value,v(F,ee,oe,pe))};function O(F,L,q,ne,ee){this._editable=F,this._edit=L,this._config=q,this._root=ne,this._size=ee}O.prototype.setTree=function(F,L){return this._editable?(this._root=F,this._size=L,this):F===this._root?this:new O(this._editable,this._edit,this._config,F,L)};var H=n.tryGetHash=function(F,L,q,ne){for(var ee=ne._root,oe=0,fe=ne._config.keyEq;;)switch(ee.type){case g:return fe(q,ee.key)?ee.value:F;case I:{if(L===ee.hash)for(var pe=ee.children,_e=0,Re=pe.length;_e<Re;++_e){var Je=pe[_e];if(fe(q,Je.key))return Je.value}return F}case M:{var Vt=p(oe,L),vt=_(Vt);if(ee.mask&vt){ee=ee.children[y(ee.mask,vt)],oe+=r;break}return F}case z:{if(ee=ee.children[p(oe,L)],ee){oe+=r;break}return F}default:return F}};O.prototype.tryGetHash=function(F,L,q){return H(F,L,q,this)};var Q=n.tryGet=function(F,L,q){return H(F,q._config.hash(L),L,q)};O.prototype.tryGet=function(F,L){return Q(F,L,this)};var ce=n.getHash=function(F,L,q){return H(void 0,F,L,q)};O.prototype.getHash=function(F,L){return ce(F,L,this)},n.get=function(F,L){return H(void 0,L._config.hash(F),F,L)},O.prototype.get=function(F,L){return Q(L,F,this)};var ie=n.has=function(F,L,q){return H(l,F,L,q)!==l};O.prototype.hasHash=function(F,L){return ie(F,L,this)};var Te=n.has=function(F,L){return ie(L._config.hash(F),F,L)};O.prototype.has=function(F){return Te(F,this)};var Ne=function(L,q){return L===q};n.make=function(F){return new O(0,0,{keyEq:F&&F.keyEq||Ne,hash:F&&F.hash||h},k,0)},n.empty=n.make();var ge=n.isEmpty=function(F){return F&&!!T(F._root)};O.prototype.isEmpty=function(){return ge(this)};var Ye=n.modifyHash=function(F,L,q,ne){var ee={value:ne._size},oe=ne._root._modify(ne._editable?ne._edit:NaN,ne._config.keyEq,0,F,L,q,ee);return ne.setTree(oe,ee.value)};O.prototype.modifyHash=function(F,L,q){return Ye(q,F,L,this)};var ot=n.modify=function(F,L,q){return Ye(F,q._config.hash(L),L,q)};O.prototype.modify=function(F,L){return ot(L,F,this)};var Se=n.setHash=function(F,L,q,ne){return Ye(c(q),F,L,ne)};O.prototype.setHash=function(F,L,q){return Se(F,L,q,this)};var Be=n.set=function(F,L,q){return Se(q._config.hash(F),F,L,q)};O.prototype.set=function(F,L){return Be(F,L,this)};var Yt=c(l),Yn=n.removeHash=function(F,L,q){return Ye(Yt,F,L,q)};O.prototype.removeHash=O.prototype.deleteHash=function(F,L){return Yn(F,L,this)};var Rt=n.remove=function(F,L){return Yn(L._config.hash(F),F,L)};O.prototype.remove=O.prototype.delete=function(F){return Rt(F,this)};var sn=n.beginMutation=function(F){return new O(F._editable+1,F._edit+1,F._config,F._root,F._size)};O.prototype.beginMutation=function(){return sn(this)};var Vo=n.endMutation=function(F){return F._editable=F._editable&&F._editable-1,F};O.prototype.endMutation=function(){return Vo(this)};var xs=n.mutate=function(F,L){var q=sn(L);return F(q),Vo(q)};O.prototype.mutate=function(F){return xs(F,this)};var ai=function(L){return L&&Ds(L[0],L[1],L[2],L[3],L[4])},Ds=function(L,q,ne,ee,oe){for(;ne<L;){var fe=q[ne++];if(fe&&!T(fe))return Fo(fe,ee,[L,q,ne,ee,oe])}return ai(oe)},Fo=function(L,q,ne){switch(L.type){case g:return{value:q(L),rest:ne};case I:case z:case M:var ee=L.children;return Ds(ee.length,ee,0,q,ne);default:return ai(ne)}},Ls={done:!0};function Xn(F){this.v=F}Xn.prototype.next=function(){if(!this.v)return Ls;var F=this.v;return this.v=ai(F.rest),F},Xn.prototype[Symbol.iterator]=function(){return this};var hr=function(L,q){return new Xn(Fo(L._root,q))},Ot=function(L){return[L.key,L.value]},Mt=n.entries=function(F){return hr(F,Ot)};O.prototype.entries=O.prototype[Symbol.iterator]=function(){return Mt(this)};var Nn=function(L){return L.key},Mn=n.keys=function(F){return hr(F,Nn)};O.prototype.keys=function(){return Mn(this)};var Os=function(L){return L.value},Oi=n.values=O.prototype.values=function(F){return hr(F,Os)};O.prototype.values=function(){return Oi(this)};var $r=n.fold=function(F,L,q){var ne=q._root;if(ne.type===g)return F(L,ne.value,ne.key);for(var ee=[ne.children],oe=void 0;oe=ee.pop();)for(var fe=0,pe=oe.length;fe<pe;){var _e=oe[fe++];_e&&_e.type&&(_e.type===g?L=F(L,_e.value,_e.key):ee.push(_e.children))}return L};O.prototype.fold=function(F,L){return $r(F,L,this)};var Jn=n.forEach=function(F,L){return $r(function(q,ne,ee){return F(ne,ee,L)},null,L)};O.prototype.forEach=function(F){return Jn(F,this)};var Ms=n.count=function(F){return F._size};O.prototype.count=function(){return Ms(this)},Object.defineProperty(O.prototype,"size",{get:O.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class E9{constructor(e){De(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return yv(this)}toMap(){return new Map(this._map)}}class _v{constructor(e){if(De(this,"_hamt",w9.empty.beginMutation()),e instanceof _v){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return yv(this)}toMap(){return new Map(this._hamt)}}function yv(t){return st("recoil_hamt_2020")?new _v(t):new E9(t)}var T9={persistentMap:yv},S9=T9.persistentMap,R9=Object.freeze({__proto__:null,persistentMap:S9});function I9(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var gu=I9;function C9(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var Vd=C9;function A9(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function P9(t){return{nodeDeps:Vd(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Vd(t.nodeToNodeSubscriptions,e=>new Set(e))}}function sm(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=n,o=i.get(t);if(o&&r&&o!==r.nodeDeps.get(t))return;i.set(t,e);const a=o==null?e:gu(e,o);for(const l of a)s.has(l)||s.set(l,new Set),Tt(s.get(l)).add(t);if(o){const l=gu(o,e);for(const c of l){if(!s.has(c))return;const h=Tt(s.get(c));h.delete(t),h.size===0&&s.delete(c)}}}function k9(t,e,n,r){var i,s,o,a;const l=n.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const c=n.getGraph(r);if(sm(t,e,c),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const d=n.getGraph(l.currentTree.version);sm(t,e,d,c)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var h;const d=(h=l.nextTree)===null||h===void 0?void 0:h.version;if(d!==void 0){const p=n.getGraph(d);sm(t,e,p,c)}}}var Ic={cloneGraph:P9,graph:A9,saveDepsToStore:k9};let N9=0;const b9=()=>N9++;let x9=0;const D9=()=>x9++;let L9=0;const O9=()=>L9++;var Ff={getNextTreeStateVersion:b9,getNextStoreID:D9,getNextComponentID:O9};const{persistentMap:MT}=R9,{graph:M9}=Ic,{getNextTreeStateVersion:WP}=Ff;function HP(){const t=WP();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:MT(),nonvalidatedAtoms:MT()}}function V9(){const t=HP();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,M9()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var qP={makeEmptyTreeState:HP,makeEmptyStoreState:V9,getNextTreeStateVersion:WP};class KP{}function F9(){return new KP}var Uf={RetentionZone:KP,retentionZone:F9};function U9(t,e){const n=new Set(t);return n.add(e),n}function j9(t,e){const n=new Set(t);return n.delete(e),n}function $9(t,e,n){const r=new Map(t);return r.set(e,n),r}function B9(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function z9(t,e){const n=new Map(t);return n.delete(e),n}function W9(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var GP={setByAddingToSet:U9,setByDeletingFromSet:j9,mapBySettingInMap:$9,mapByUpdatingInMap:B9,mapByDeletingFromMap:z9,mapByDeletingMultipleFromMap:W9};function*H9(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var vv=H9;function q9(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var QP=q9;const{getNode:Cc,getNodeMaybe:K9,recoilValuesForKeys:VT}=Qn,{RetentionZone:FT}=Uf,{setByAddingToSet:G9}=GP,Q9=Object.freeze(new Set);class Y9 extends Error{}function X9(t,e,n){if(!st("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(n instanceof FT)i(n);else if(Array.isArray(n))for(const s of n)i(s);return()=>{if(!st("recoil_memory_managament_2020"))return;const{retention:s}=t.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(n instanceof FT)o(n);else if(Array.isArray(n))for(const a of n)o(a)}}function wv(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const s=Cc(n),o=X9(t,n,s.retainedBy),a=s.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),o()})}function J9(t,e,n){wv(t,t.getState().currentTree,e,n)}function Z9(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function ez(t,e,n){return wv(t,e,n,"get"),Cc(n).get(t,e)}function YP(t,e,n){return Cc(n).peek(t,e)}function tz(t,e,n){var r;const i=K9(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:G9(t.dirtyAtoms,e)}}function nz(t,e,n,r){const i=Cc(n);if(i.set==null)throw new Y9(`Attempt to set read-only RecoilValue: ${n}`);const s=i.set;return wv(t,e,n,"set"),s(t,e,r)}function rz(t,e,n){const r=t.getState(),i=t.getGraph(e.version),s=Cc(n).nodeType;return QP({type:s},{loadable:()=>YP(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>s==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var o;return VT((o=i.nodeDeps.get(n))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:VT(vv(XP(t,e,new Set([n])),l=>l!==n)),components:Vf((o=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function XP(t,e,n){const r=new Set,i=Array.from(n),s=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:Q9;for(const c of l)r.has(c)||i.push(c)}return r}var Ns={getNodeLoadable:ez,peekNodeLoadable:YP,setNodeValue:nz,initializeNode:J9,cleanUpNode:Z9,setUnvalidatedAtomValue_DEPRECATED:tz,peekNodeInfo:rz,getDownstreamNodes:XP};let JP=null;function iz(t){JP=t}function sz(){var t;(t=JP)===null||t===void 0||t()}var ZP={setInvalidateMemoizedSnapshot:iz,invalidateMemoizedSnapshot:sz};const{getDownstreamNodes:oz,getNodeLoadable:ek,setNodeValue:az}=Ns,{getNextComponentID:lz}=Ff,{getNode:uz,getNodeMaybe:tk}=Qn,{DefaultValue:Ev}=Qn,{reactMode:cz}=Rc,{AbstractRecoilValue:hz,RecoilState:dz,RecoilValueReadOnly:fz,isRecoilValue:pz}=Wa,{invalidateMemoizedSnapshot:mz}=ZP;function gz(t,{key:e},n=t.getState().currentTree){var r,i;const s=t.getState();n.version===s.currentTree.version||n.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=s.previousTree)===null||i===void 0||i.version);const o=ek(t,n,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function _z(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof Ev?n.delete(i):n.set(i,r)}),n}function yz(t,e,{key:n},r){if(typeof r=="function"){const i=ek(t,e,n);if(i.state==="loading"){const s=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Oe(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function vz(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:s}=n,o=yz(t,e,i,s),a=az(t,e,i.key,o);for(const[l,c]of a.entries())Wg(e,l,c)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=n;Wg(e,i,s)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=n,o=tk(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else pv(`Unknown action ${n.type}`)}function Wg(t,e,n){n.state==="hasValue"&&n.contents instanceof Ev?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function nk(t,e){t.replaceState(n=>{const r=rk(n);for(const i of e)vz(t,r,i);return ik(t,r),mz(),r})}function jf(t,e){if(_u.length){const n=_u[_u.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else nk(t,[e])}const _u=[];function wz(){const t=new Map;return _u.push(t),()=>{for(const[e,n]of t)nk(e,n);_u.pop()}}function rk(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function ik(t,e){const n=oz(t,e,e.dirtyAtoms);for(const s of n){var r,i;(r=tk(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function sk(t,e,n){jf(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function Ez(t,e,n){if(n instanceof Ev)return sk(t,e,n);jf(t,{type:"setLoadable",recoilValue:e,loadable:n})}function Tz(t,e){jf(t,{type:"markModified",recoilValue:e})}function Sz(t,e,n){jf(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function Rz(t,{key:e},n,r=null){const i=lz(),s=t.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),Tt(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",n]);const o=cz();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function Iz(t,e){var n;const{currentTree:r}=t.getState(),i=uz(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var si={RecoilValueReadOnly:fz,AbstractRecoilValue:hz,RecoilState:dz,getRecoilValueAsLoadable:gz,setRecoilValue:sk,setRecoilValueLoadable:Ez,markRecoilValueModified:Tz,setUnvalidatedRecoilValue:Sz,subscribeToRecoilValue:Rz,isRecoilValue:pz,applyAtomValueWrites:_z,batchStart:wz,writeLoadableToTreeState:Wg,invalidateDownstreams:ik,copyTreeState:rk,refreshRecoilValue:Iz};function Cz(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(n,s[1],s[0],t))return!0;i=r.next()}return!1}var Az=Cz;const{cleanUpNode:Pz}=Ns,{deleteNodeConfigIfPossible:kz,getNode:ok}=Qn,{RetentionZone:ak}=Uf,Nz=12e4,lk=new Set;function uk(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const o of e)if(o instanceof ak)for(const a of Lz(n,o))i.add(a);else i.add(o);const s=bz(t,i);for(const o of s)Dz(t,r,o)}function bz(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const c=new Set,h=xz(t,r,l,s,o);for(const y of h){var d;if(ok(y).retainedBy==="recoilRoot"){o.add(y);continue}if(((d=n.retention.referenceCounts.get(y))!==null&&d!==void 0?d:0)>0){o.add(y);continue}if(ck(y).some(b=>n.retention.referenceCounts.get(b))){o.add(y);continue}const S=i.nodeToNodeSubscriptions.get(y);if(S&&Az(S,b=>o.has(b))){o.add(y);continue}s.add(y),c.add(y)}const p=new Set;for(const y of c)for(const S of(_=i.nodeDeps.get(y))!==null&&_!==void 0?_:lk){var _;s.has(S)||p.add(S)}p.size&&a(p)}}function xz(t,e,n,r,i){const s=t.getGraph(e.version),o=[],a=new Set;for(;n.size>0;)l(Tt(n.values().next().value));return o;function l(c){if(r.has(c)||i.has(c)){n.delete(c);return}if(a.has(c))return;const h=s.nodeToNodeSubscriptions.get(c);if(h)for(const d of h)l(d);a.add(c),n.delete(c),o.push(c)}}function Dz(t,e,n){if(!st("recoil_memory_managament_2020"))return;Pz(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=ck(n);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(n);if(l!==void 0){o.nodeDeps.delete(n);for(const c of l){var a;(a=o.nodeToNodeSubscriptions.get(c))===null||a===void 0||a.delete(n)}}o.nodeToNodeSubscriptions.delete(n)}kz(n)}function Lz(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:lk}function ck(t){const e=ok(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof ak?[e]:e}function Oz(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):uk(t,new Set([e]))}function Mz(t,e,n){var r;if(!st("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+n;s===0?hk(t,e):i.set(e,s)}function hk(t,e){if(!st("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),Oz(t,e)}function Vz(t){if(!st("recoil_memory_managament_2020"))return;const e=t.getState();uk(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function Fz(t){return t===void 0?"recoilRoot":t}var Oo={SUSPENSE_TIMEOUT_MS:Nz,updateRetainCount:Mz,updateRetainCountToZero:hk,releaseScheduledRetainablesNow:Vz,retainedByOptionWithDefault:Fz};const{unstable_batchedUpdates:Uz}=yI;var jz={unstable_batchedUpdates:Uz};const{unstable_batchedUpdates:$z}=jz;var Bz={unstable_batchedUpdates:$z};const{batchStart:zz}=si,{unstable_batchedUpdates:Wz}=Bz;let Tv=Wz||(t=>t());const Hz=t=>{Tv=t},qz=()=>Tv,Kz=t=>{Tv(()=>{let e=()=>{};try{e=zz(),t()}finally{e()}})};var $f={getBatcher:qz,setBatcher:Hz,batchUpdates:Kz};function*Gz(t){for(const e of t)for(const n of e)yield n}var dk=Gz;const fk=typeof Window>"u"||typeof window>"u",Qz=t=>!fk&&(t===window||t instanceof Window),Yz=typeof navigator<"u"&&navigator.product==="ReactNative";var Bf={isSSR:fk,isReactNative:Yz,isWindow:Qz};function Xz(t,e){let n;return(...r)=>{n||(n={});const i=e(...r);return Object.hasOwnProperty.call(n,i)||(n[i]=t(...r)),n[i]}}function Jz(t,e){let n,r;return(...i)=>{const s=e(...i);return n===s||(n=s,r=t(...i)),r}}function Zz(t,e){let n,r;return[(...o)=>{const a=e(...o);return n===a||(n=a,r=t(...o)),r},()=>{n=null}]}var e6={memoizeWithArgsHash:Xz,memoizeOneWithArgsHash:Jz,memoizeOneWithArgsHashAndInvalidation:Zz};const{batchUpdates:Hg}=$f,{initializeNode:t6,peekNodeInfo:n6}=Ns,{graph:r6}=Ic,{getNextStoreID:i6}=Ff,{DEFAULT_VALUE:s6,recoilValues:UT,recoilValuesForKeys:jT}=Qn,{AbstractRecoilValue:o6,getRecoilValueAsLoadable:a6,setRecoilValue:$T,setUnvalidatedRecoilValue:l6}=si,{updateRetainCount:Mh}=Oo,{setInvalidateMemoizedSnapshot:u6}=ZP,{getNextTreeStateVersion:c6,makeEmptyStoreState:h6}=qP,{isSSR:d6}=Bf,{memoizeOneWithArgsHashAndInvalidation:f6}=e6;class zf{constructor(e,n){De(this,"_store",void 0),De(this,"_refCount",1),De(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),a6(this._store,r))),De(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),De(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return jT(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?UT.values():r.isInitialized===!0?jT(dk([i,s])):vv(UT.values(),({key:o})=>!i.has(o)&&!s.has(o))}),De(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),n6(this._store,this._store.getState().currentTree,r))),De(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new qg(this,Hg);return r(i),i}),De(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new qg(this,Hg);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:i6(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return Tt(i.get(r));const s=r6();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Oe("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)t6(this._store,r,"get"),Mh(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){d6||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!st("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){st("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function pk(t,e,n=!1){const r=t.getState(),i=n?c6():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Vf(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function p6(t){const e=new zf(h6());return t!=null?e.map(t):e}const[BT,mk]=f6((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:Tt(r.previousTree);return new zf(pk(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});u6(mk);function m6(t,e="latest"){const n=BT(t,e);return n.isRetained()?n:(mk(),BT(t,e))}class qg extends zf{constructor(e,n){super(pk(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),De(this,"_batch",void 0),De(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{Mh(s,r.key,1),$T(this.getStore_INTERNAL(),r,i)})}),De(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{Mh(i,r.key,1),$T(this.getStore_INTERNAL(),r,s6)})}),De(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();Hg(()=>{for(const[s,o]of r.entries())Mh(i,s,1),l6(i,new o6(s),o)})}),this._batch=n}}var Wf={Snapshot:zf,MutableSnapshot:qg,freshSnapshot:p6,cloneSnapshot:m6},g6=Wf.Snapshot,_6=Wf.MutableSnapshot,y6=Wf.freshSnapshot,v6=Wf.cloneSnapshot,Hf=Object.freeze({__proto__:null,Snapshot:g6,MutableSnapshot:_6,freshSnapshot:y6,cloneSnapshot:v6});function w6(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var E6=w6;const{useRef:T6}=ut;function S6(t){const e=T6(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var zT=S6;const{getNextTreeStateVersion:R6,makeEmptyStoreState:gk}=qP,{cleanUpNode:I6,getDownstreamNodes:C6,initializeNode:A6,setNodeValue:P6,setUnvalidatedAtomValue_DEPRECATED:k6}=Ns,{graph:N6}=Ic,{cloneGraph:b6}=Ic,{getNextStoreID:_k}=Ff,{createMutableSource:om,reactMode:yk}=Rc,{applyAtomValueWrites:x6}=si,{releaseScheduledRetainablesNow:vk}=Oo,{freshSnapshot:D6}=Hf,{useCallback:L6,useContext:wk,useEffect:Kg,useMemo:O6,useRef:M6,useState:V6}=ut;function Ll(){throw Oe("This component must be used inside a <RecoilRoot> component.")}const Ek=Object.freeze({storeID:_k(),getState:Ll,replaceState:Ll,getGraph:Ll,subscribeToTransactions:Ll,addTransactionMetadata:Ll});let Gg=!1;function WT(t){if(Gg)throw Oe("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){st("recoil_memory_managament_2020")&&st("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&vk(t);const n=e.currentTree.version,r=R6();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,b6(Tt(e.graphsByVersion.get(n))))}}const Tk=ut.createContext({current:Ek}),qf=()=>wk(Tk),Sk=ut.createContext(null);function F6(){return wk(Sk)}function Sv(t,e,n){const r=C6(t,n,n.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(n)}}function Rk(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(t);for(const[i,s]of e.transactionSubscriptions)s(t);(!yk().early||e.suspendedComponentResolvers.size>0)&&(Sv(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function U6(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,Rk(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):pv("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,st("recoil_memory_managament_2020")&&n==null&&vk(t)}finally{e.commitDepth--}}function j6({setNotifyBatcherOfChange:t}){const e=qf(),[,n]=V6([]);return t(()=>n({})),Kg(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),Kg(()=>{y9.enqueueExecution("Batcher",()=>{U6(e.current)})}),null}function $6(t,e){const n=gk();return e({set:(r,i)=>{const s=n.currentTree,o=P6(t,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const c of a)l.delete(c);n.currentTree={...s,dirtyAtoms:E6(s.dirtyAtoms,a),atomValues:x6(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{n.currentTree=k6(n.currentTree,s,i)})}}),n}function B6(t){const e=D6(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let HT=0;function z6({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const s=_=>{const y=i.current.graphsByVersion;if(y.has(_))return Tt(y.get(_));const S=N6();return y.set(_,S),S},o=(_,y)=>{if(y==null){const{transactionSubscriptions:S}=d.current.getState(),b=HT++;return S.set(b,_),{release:()=>{S.delete(b)}}}else{const{nodeTransactionSubscriptions:S}=d.current.getState();S.has(y)||S.set(y,new Map);const b=HT++;return Tt(S.get(y)).set(b,_),{release:()=>{const R=S.get(y);R&&(R.delete(b),R.size===0&&S.delete(y))}}}},a=_=>{WT(d.current);for(const y of Object.keys(_))Tt(d.current.getState().nextTree).transactionMetadata[y]=_[y]},l=_=>{WT(d.current);const y=Tt(i.current.nextTree);let S;try{Gg=!0,S=_(y)}finally{Gg=!1}S!==y&&(i.current.nextTree=S,yk().early&&Sv(d.current,i.current,S),Tt(c.current)())},c=M6(null),h=L6(_=>{c.current=_},[c]),d=zT(()=>n??{storeID:_k(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});n!=null&&(d.current=n),i=zT(()=>t!=null?$6(d.current,t):e!=null?B6(e):gk());const p=O6(()=>om==null?void 0:om(i,()=>i.current.currentTree.version),[i]);return Kg(()=>{const _=d.current;for(const y of new Set(_.getState().knownAtoms))A6(_,y,"get");return()=>{for(const y of _.getState().knownAtoms)I6(_,y)}},[d]),ut.createElement(Tk.Provider,{value:d},ut.createElement(Sk.Provider,{value:p},ut.createElement(j6,{setNotifyBatcherOfChange:h}),r))}function W6(t){const{override:e,...n}=t,r=qf();return e===!1&&r.current!==Ek?t.children:ut.createElement(z6,n)}function H6(){return qf().current.storeID}var Li={RecoilRoot:W6,useStoreRef:qf,useRecoilMutableSource:F6,useRecoilStoreID:H6,notifyComponents_FOR_TESTING:Sv,sendEndOfBatchNotifications_FOR_TESTING:Rk};function q6(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var K6=q6;const{useEffect:G6,useRef:Q6}=ut;function Y6(t){const e=Q6();return G6(()=>{e.current=t}),e.current}var Ik=Y6;const{useStoreRef:X6}=Li,{SUSPENSE_TIMEOUT_MS:J6}=Oo,{updateRetainCount:Ol}=Oo,{RetentionZone:Z6}=Uf,{useEffect:e5,useRef:t5}=ut,{isSSR:qT}=Bf;function n5(t){if(st("recoil_memory_managament_2020"))return r5(t)}function r5(t){const n=(Array.isArray(t)?t:[t]).map(o=>o instanceof Z6?o:o.key),r=X6();e5(()=>{if(!st("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!qT)window.clearTimeout(i.current),i.current=null;else for(const a of n)Ol(o,a,1);return()=>{for(const a of n)Ol(o,a,-1)}},[r,...n]);const i=t5(),s=Ik(n);if(!qT&&(s===void 0||!K6(s,n))){const o=r.current;for(const a of n)Ol(o,a,1);if(s)for(const a of s)Ol(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)Ol(o,a,-1)},J6)}}var Rv=n5;function i5(){return"<component name not available>"}var Ac=i5;const{batchUpdates:s5}=$f,{DEFAULT_VALUE:Ck}=Qn,{currentRendererSupportsUseSyncExternalStore:o5,reactMode:ll,useMutableSource:a5,useSyncExternalStore:l5}=Rc,{useRecoilMutableSource:u5,useStoreRef:oi}=Li,{AbstractRecoilValue:Qg,getRecoilValueAsLoadable:Pc,setRecoilValue:Fd,setUnvalidatedRecoilValue:c5,subscribeToRecoilValue:Ha}=si,{useCallback:Gn,useEffect:qa,useMemo:Ak,useRef:yu,useState:Iv}=ut,{setByAddingToSet:h5}=GP,{isSSR:d5}=Bf;function Cv(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{const s=n.current.getState().suspendedComponentResolvers;s.add(i),d5&&gt(t.contents)&&t.contents.finally(()=>{s.delete(i)})}):t.state==="hasError"?t.contents:Oe(`Invalid value of loadable atom "${e.key}"`)}function f5(){const t=Ac(),e=oi(),[,n]=Iv([]),r=yu(new Set);r.current=new Set;const i=yu(new Set),s=yu(new Map),o=Gn(l=>{const c=s.current.get(l);c&&(c.release(),s.current.delete(l))},[s]),a=Gn((l,c)=>{s.current.has(c)&&n([])},[]);return qa(()=>{const l=e.current;gu(r.current,i.current).forEach(c=>{if(s.current.has(c))return;const h=Ha(l,new Qg(c),p=>a(p,c),t);s.current.set(c,h),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),c)}):a(l.getState(),c)}),gu(i.current,r.current).forEach(c=>{o(c)}),i.current=r.current}),qa(()=>{const l=s.current;return gu(r.current,new Set(l.keys())).forEach(c=>{const h=Ha(e.current,new Qg(c),d=>a(d,c),t);l.set(c,h)}),()=>l.forEach((c,h)=>o(h))},[t,e,o,a]),Ak(()=>{function l(y){return S=>{Fd(e.current,y,S)}}function c(y){return()=>Fd(e.current,y,Ck)}function h(y){var S;r.current.has(y.key)||(r.current=h5(r.current,y.key));const b=e.current.getState();return Pc(e.current,y,ll().early&&(S=b.nextTree)!==null&&S!==void 0?S:b.currentTree)}function d(y){const S=h(y);return Cv(S,y,e)}function p(y){return[d(y),l(y)]}function _(y){return[h(y),l(y)]}return{getRecoilValue:d,getRecoilValueLoadable:h,getRecoilState:p,getRecoilStateLoadable:_,getSetRecoilState:l,getResetRecoilState:c}},[r,e])}const p5={current:0};function m5(t){const e=oi(),n=Ac(),r=Gn(()=>{var a;const l=e.current,c=l.getState(),h=ll().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return{loadable:Pc(l,t,h),key:t.key}},[e,t]),i=Gn(a=>{let l;return()=>{var c,h;const d=a();return(c=l)!==null&&c!==void 0&&c.loadable.is(d.loadable)&&((h=l)===null||h===void 0?void 0:h.key)===d.key?l:(l=d,d)}},[]),s=Ak(()=>i(r),[r,i]),o=Gn(a=>{const l=e.current;return Ha(l,t,a,n).release},[e,t,n]);return l5(o,s,s).loadable}function g5(t){const e=oi(),n=Gn(()=>{var c;const h=e.current,d=h.getState(),p=ll().early&&(c=d.nextTree)!==null&&c!==void 0?c:d.currentTree;return Pc(h,t,p)},[e,t]),r=Gn(()=>n(),[n]),i=Ac(),s=Gn((c,h)=>{const d=e.current;return Ha(d,t,()=>{if(!st("recoil_suppress_rerender_in_callback"))return h();const _=n();l.current.is(_)||h(),l.current=_},i).release},[e,t,i,n]),o=u5();if(o==null)throw Oe("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=a5(o,r,s),l=yu(a);return qa(()=>{l.current=a}),a}function Yg(t){const e=oi(),n=Ac(),r=Gn(()=>{var l;const c=e.current,h=c.getState(),d=ll().early&&(l=h.nextTree)!==null&&l!==void 0?l:h.currentTree;return Pc(c,t,d)},[e,t]),i=Gn(()=>({loadable:r(),key:t.key}),[r,t.key]),s=Gn(l=>{const c=i();return l.loadable.is(c.loadable)&&l.key===c.key?l:c},[i]);qa(()=>{const l=Ha(e.current,t,c=>{a(s)},n);return a(s),l.release},[n,t,e,s]);const[o,a]=Iv(i);return o.key!==t.key?i().loadable:o.loadable}function _5(t){const e=oi(),[,n]=Iv([]),r=Ac(),i=Gn(()=>{var a;const l=e.current,c=l.getState(),h=ll().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return Pc(l,t,h)},[e,t]),s=i(),o=yu(s);return qa(()=>{o.current=s}),qa(()=>{const a=e.current,l=a.getState(),c=Ha(a,t,d=>{var p;if(!st("recoil_suppress_rerender_in_callback"))return n([]);const _=i();(p=o.current)!==null&&p!==void 0&&p.is(_)||n(_),o.current=_},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,n([])});else{var h;if(!st("recoil_suppress_rerender_in_callback"))return n([]);const d=i();(h=o.current)!==null&&h!==void 0&&h.is(d)||n(d),o.current=d}return c.release},[r,i,t,e]),s}function Av(t){return st("recoil_memory_managament_2020")&&Rv(t),{TRANSITION_SUPPORT:Yg,SYNC_EXTERNAL_STORE:o5()?m5:Yg,MUTABLE_SOURCE:g5,LEGACY:_5}[ll().mode](t)}function Pk(t){const e=oi(),n=Av(t);return Cv(n,t,e)}function Kf(t){const e=oi();return Gn(n=>{Fd(e.current,t,n)},[e,t])}function y5(t){const e=oi();return Gn(()=>{Fd(e.current,t,Ck)},[e,t])}function v5(t){return[Pk(t),Kf(t)]}function w5(t){return[Av(t),Kf(t)]}function E5(){const t=oi();return(e,n={})=>{s5(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>c5(t.current,new Qg(i),r))})}}function kk(t){return st("recoil_memory_managament_2020")&&Rv(t),Yg(t)}function Nk(t){const e=oi(),n=kk(t);return Cv(n,t,e)}function T5(t){return[Nk(t),Kf(t)]}var S5={recoilComponentGetRecoilValueCount_FOR_TESTING:p5,useRecoilInterface:f5,useRecoilState:v5,useRecoilStateLoadable:w5,useRecoilValue:Pk,useRecoilValueLoadable:Av,useResetRecoilState:y5,useSetRecoilState:Kf,useSetUnvalidatedAtomValues:E5,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:kk,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Nk,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:T5};function R5(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var I5=R5;function C5(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var A5=C5;function P5(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var k5=P5;const{batchUpdates:N5}=$f,{DEFAULT_VALUE:b5,getNode:bk,nodes:x5}=Qn,{useStoreRef:Pv}=Li,{AbstractRecoilValue:D5,setRecoilValueLoadable:L5}=si,{SUSPENSE_TIMEOUT_MS:O5}=Oo,{cloneSnapshot:Ud}=Hf,{useCallback:Gf,useEffect:xk,useRef:KT,useState:M5}=ut,{isSSR:GT}=Bf;function Qf(t){const e=Pv();xk(()=>e.current.subscribeToTransactions(t).release,[t,e])}function QT(t){const e=t.atomValues.toMap(),n=Vd(I5(e,(r,i)=>{const o=bk(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return k5(t.nonvalidatedAtoms.toMap(),n)}function V5(t){Qf(Gf(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=QT(r),s=QT(n),o=Vd(x5,l=>{var c,h,d,p;return{persistence_UNSTABLE:{type:(c=(h=l.persistence_UNSTABLE)===null||h===void 0?void 0:h.type)!==null&&c!==void 0?c:"none",backButton:(d=(p=l.persistence_UNSTABLE)===null||p===void 0?void 0:p.backButton)!==null&&d!==void 0?d:!1}}}),a=A5(r.dirtyAtoms,l=>i.has(l)||s.has(l));t({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function F5(t){Qf(Gf(e=>{const n=Ud(e,"latest"),r=Ud(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function U5(){const t=Pv(),[e,n]=M5(()=>Ud(t.current)),r=Ik(e),i=KT(),s=KT();if(Qf(Gf(a=>n(Ud(a)),[])),xk(()=>{const a=e.retain();if(i.current&&!GT){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!GT){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},O5)}return e}function Dk(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;N5(()=>{const o=new Set;for(const c of[i.atomValues.keys(),s.atomValues.keys()])for(const h of c){var a,l;((a=i.atomValues.get(h))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(h))===null||l===void 0?void 0:l.contents)&&bk(h).shouldRestoreFromSnapshots&&o.add(h)}o.forEach(c=>{L5(t,new D5(c),s.atomValues.has(c)?Tt(s.atomValues.get(c)):b5)}),t.replaceState(c=>({...c,stateID:e.getID()}))})}function j5(){const t=Pv();return Gf(e=>Dk(t.current,e),[t])}var Lk={useRecoilSnapshot:U5,gotoSnapshot:Dk,useGotoRecoilSnapshot:j5,useRecoilTransactionObserver:F5,useTransactionObservation_DEPRECATED:V5,useTransactionSubscription_DEPRECATED:Qf};const{peekNodeInfo:$5}=Ns,{useStoreRef:B5}=Li;function z5(){const t=B5();return({key:e})=>$5(t.current,t.current.getState().currentTree,e)}var W5=z5;const{reactMode:H5}=Rc,{RecoilRoot:q5,useStoreRef:K5}=Li,{useMemo:G5}=ut;function Q5(){H5().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=K5().current;return G5(()=>{function e({children:n}){return ut.createElement(q5,{store_INTERNAL:t},n)}return e},[t])}var Y5=Q5;const{loadableWithValue:X5}=Sc,{initializeNode:J5}=Ns,{DEFAULT_VALUE:Z5,getNode:eW}=Qn,{copyTreeState:tW,getRecoilValueAsLoadable:nW,invalidateDownstreams:rW,writeLoadableToTreeState:iW}=si;function YT(t){return eW(t.key).nodeType==="atom"}class sW{constructor(e,n){De(this,"_store",void 0),De(this,"_treeState",void 0),De(this,"_changes",void 0),De(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!YT(r))throw Oe("Reading selectors within atomicUpdate is not supported");const i=nW(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Oe(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),De(this,"set",(r,i)=>{if(!YT(r))throw Oe("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else J5(this._store,r.key,"set"),this._changes.set(r.key,i)}),De(this,"reset",r=>{this.set(r,Z5)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=tW(this._treeState);for(const[n,r]of this._changes)iW(e,n,X5(r));return rW(this._store,e),e}}function oW(t){return e=>{t.replaceState(n=>{const r=new sW(t,n);return e(r),r.newTreeState_INTERNAL()})}}var aW={atomicUpdater:oW},lW=aW.atomicUpdater,Ok=Object.freeze({__proto__:null,atomicUpdater:lW});function uW(t,e){if(!t)throw new Error(e)}var cW=uW,Ql=cW;const{atomicUpdater:hW}=Ok,{batchUpdates:dW}=$f,{DEFAULT_VALUE:fW}=Qn,{useStoreRef:pW}=Li,{refreshRecoilValue:mW,setRecoilValue:XT}=si,{cloneSnapshot:gW}=Hf,{gotoSnapshot:_W}=Lk,{useCallback:yW}=ut;class Mk{}const vW=new Mk;function Vk(t,e,n,r){let i=vW,s;if(dW(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Oe(a);const l=QP({...r??{},set:(h,d)=>XT(t,h,d),reset:h=>XT(t,h,fW),refresh:h=>mW(t,h),gotoSnapshot:h=>_W(t,h),transact_UNSTABLE:h=>hW(t)(h)},{snapshot:()=>{const h=gW(t);return s=h.retain(),h}}),c=e(l);if(typeof c!="function")throw Oe(a);i=c(...n)}),i instanceof Mk&&Ql(!1),gt(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function wW(t,e){const n=pW();return yW((...r)=>Vk(n.current,t,r),e!=null?[...e,n]:void 0)}var Fk={recoilCallback:Vk,useRecoilCallback:wW};const{useStoreRef:EW}=Li,{refreshRecoilValue:TW}=si,{useCallback:SW}=ut;function RW(t){const e=EW();return SW(()=>{const n=e.current;TW(n,t)},[t,e])}var IW=RW;const{atomicUpdater:CW}=Ok,{useStoreRef:AW}=Li,{useMemo:PW}=ut;function kW(t,e){const n=AW();return PW(()=>(...r)=>{CW(n.current)(s=>{t(s)(...r)})},e!=null?[...e,n]:void 0)}var NW=kW;class bW{constructor(e){De(this,"value",void 0),this.value=e}}var xW={WrappedValue:bW},DW=xW.WrappedValue,Uk=Object.freeze({__proto__:null,WrappedValue:DW});const{isFastRefreshEnabled:LW}=Rc;class JT extends Error{}class OW{constructor(e){var n,r,i;De(this,"_name",void 0),De(this,"_numLeafs",void 0),De(this,"_root",void 0),De(this,"_onHit",void 0),De(this,"_onSet",void 0),De(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var s,o,a,l;let c,h;for(const[b,R]of e){var d,p,_;const g=this._root;if((g==null?void 0:g.type)==="leaf")throw this.invalidCacheError();const I=c;if(c=I?I.branches.get(h):g,c=(d=c)!==null&&d!==void 0?d:{type:"branch",nodeKey:b,parent:I,branches:new Map,branchKey:h},c.type!=="branch"||c.nodeKey!==b)throw this.invalidCacheError();I==null||I.branches.set(h,c),r==null||(p=r.onNodeVisit)===null||p===void 0||p.call(r,c),h=this._mapNodeValue(R),this._root=(_=this._root)!==null&&_!==void 0?_:c}const y=c?(s=c)===null||s===void 0?void 0:s.branches.get(h):this._root;if(y!=null&&(y.type!=="leaf"||y.branchKey!==h))throw this.invalidCacheError();const S={type:"leaf",value:n,parent:c,branchKey:h};(o=c)===null||o===void 0||o.branches.set(h,S),this._root=(a=this._root)!==null&&a!==void 0?a:S,this._numLeafs++,this._onSet(S),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,S)};try{i()}catch(s){if(s instanceof JT)this.clear(),i();else throw s}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=LW()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw pv(e+(this._name!=null?` - ${this._name}`:"")),new JT}}var MW={TreeCache:OW},VW=MW.TreeCache,jk=Object.freeze({__proto__:null,TreeCache:VW});class FW{constructor(e){var n;De(this,"_maxSize",void 0),De(this,"_size",void 0),De(this,"_head",void 0),De(this,"_tail",void 0),De(this,"_map",void 0),De(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:n};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=Tt(this._map.get(n)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var UW={LRUCache:FW},jW=UW.LRUCache,$k=Object.freeze({__proto__:null,LRUCache:jW});const{LRUCache:$W}=$k,{TreeCache:BW}=jk;function zW({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new $W({maxSize:e}),i=new BW({name:t,mapNodeValue:n,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var ZT=zW;function Cr(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Oe("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(gt(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,s)=>Cr(i,e,s.toString()))}]`;if(typeof t.toJSON=="function")return Cr(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[s,o]of t)i[typeof s=="string"?s:Cr(s,e)]=o;return Cr(i,e,n)}return t instanceof Set?Cr(Array.from(t).sort((i,s)=>Cr(i,e).localeCompare(Cr(s,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?Cr(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${Cr(i,e)}:${Cr(t[i],e,i)}`).join(",")}}`}function WW(t,e={allowFunctions:!1}){return Cr(t,e)}var Yf=WW;const{TreeCache:HW}=jk,ch={equality:"reference",eviction:"keep-all",maxSize:1/0};function qW({equality:t=ch.equality,eviction:e=ch.eviction,maxSize:n=ch.maxSize}=ch,r){const i=KW(t);return GW(e,n,i,r)}function KW(t){switch(t){case"reference":return e=>e;case"value":return e=>Yf(e)}throw Oe(`Unrecognized equality policy ${t}`)}function GW(t,e,n,r){switch(t){case"keep-all":return new HW({name:r,mapNodeValue:n});case"lru":return ZT({name:r,maxSize:Tt(e),mapNodeValue:n});case"most-recent":return ZT({name:r,maxSize:1,mapNodeValue:n})}throw Oe(`Unrecognized eviction policy ${t}`)}var QW=qW;function YW(t){return()=>null}var XW={startPerfBlock:YW};const{isLoadable:JW,loadableWithError:hh,loadableWithPromise:ZW,loadableWithValue:am}=Sc,{WrappedValue:Bk}=Uk,{getNodeLoadable:dh,peekNodeLoadable:eH,setNodeValue:tH}=Ns,{saveDepsToStore:nH}=Ic,{DEFAULT_VALUE:rH,getConfigDeletionHandler:iH,getNode:sH,registerNode:eS}=Qn,{isRecoilValue:oH}=Wa,{markRecoilValueModified:tS}=si,{retainedByOptionWithDefault:aH}=Oo,{recoilCallback:lH}=Fk,{startPerfBlock:uH}=XW;class zk{}const Ml=new zk,Vl=[],fh=new Map,cH=(()=>{let t=0;return()=>t++})();function Wk(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,s=t.set!=null?t.set:void 0,o=new Set,a=QW(i??{equality:"reference",eviction:"keep-all"},n),l=aH(t.retainedBy_UNSTABLE),c=new Map;let h=0;function d(){return!st("recoil_memory_managament_2020")||h>0}function p(O){return O.getState().knownSelectors.add(n),h++,()=>{h--}}function _(){return iH(n)!==void 0&&!d()}function y(O,H,Q,ce,ie){St(H,ce,ie),S(O,Q)}function S(O,H){Ae(O,H)&&C(O),R(H,!0)}function b(O,H){Ae(O,H)&&(Tt(A(O)).stateVersions.clear(),R(H,!1))}function R(O,H){const Q=fh.get(O);if(Q!=null){for(const ce of Q)tS(ce,Tt(e));H&&fh.delete(O)}}function g(O,H){let Q=fh.get(H);Q==null&&fh.set(H,Q=new Set),Q.add(O)}function I(O,H,Q,ce,ie,Te){return H.then(Ne=>{if(!d())throw C(O),Ml;const ge=am(Ne);return y(O,Q,ie,ge,ce),Ne}).catch(Ne=>{if(!d())throw C(O),Ml;if(gt(Ne))return M(O,Ne,Q,ce,ie,Te);const ge=hh(Ne);throw y(O,Q,ie,ge,ce),Ne})}function M(O,H,Q,ce,ie,Te){return H.then(Ne=>{if(!d())throw C(O),Ml;Te.loadingDepKey!=null&&Te.loadingDepPromise===H?Q.atomValues.set(Te.loadingDepKey,am(Ne)):O.getState().knownSelectors.forEach(Se=>{Q.atomValues.delete(Se)});const ge=T(O,Q);if(ge&&ge.state!=="loading"){if((Ae(O,ie)||A(O)==null)&&S(O,ie),ge.state==="hasValue")return ge.contents;throw ge.contents}if(!Ae(O,ie)){const Se=E(O,Q);if(Se!=null)return Se.loadingLoadable.contents}const[Ye,ot]=k(O,Q,ie);if(Ye.state!=="loading"&&y(O,Q,ie,Ye,ot),Ye.state==="hasError")throw Ye.contents;return Ye.contents}).catch(Ne=>{if(Ne instanceof zk)throw Ml;if(!d())throw C(O),Ml;const ge=hh(Ne);throw y(O,Q,ie,ge,ce),Ne})}function z(O,H,Q,ce){var ie,Te,Ne,ge;if(Ae(O,ce)||H.version===((ie=O.getState())===null||ie===void 0||(Te=ie.currentTree)===null||Te===void 0?void 0:Te.version)||H.version===((Ne=O.getState())===null||Ne===void 0||(ge=Ne.nextTree)===null||ge===void 0?void 0:ge.version)){var Ye,ot,Se;nH(n,Q,O,(Ye=(ot=O.getState())===null||ot===void 0||(Se=ot.nextTree)===null||Se===void 0?void 0:Se.version)!==null&&Ye!==void 0?Ye:O.getState().currentTree.version)}for(const Be of Q)o.add(Be)}function k(O,H,Q){const ce=uH(n);let ie=!0,Te=!0;const Ne=()=>{ce(),Te=!1};let ge,Ye=!1,ot;const Se={loadingDepKey:null,loadingDepPromise:null},Be=new Map;function Yt({key:Rt}){const sn=dh(O,H,Rt);switch(Be.set(Rt,sn),ie||(z(O,H,new Set(Be.keys()),Q),b(O,Q)),sn.state){case"hasValue":return sn.contents;case"hasError":throw sn.contents;case"loading":throw Se.loadingDepKey=Rt,Se.loadingDepPromise=sn.contents,sn.contents}throw Oe("Invalid Loadable state")}const Yn=Rt=>(...sn)=>{if(Te)throw Oe("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&Ql(!1),lH(O,Rt,sn,{node:e})};try{ge=r({get:Yt,getCallback:Yn}),ge=oH(ge)?Yt(ge):ge,JW(ge)&&(ge.state==="hasError"&&(Ye=!0),ge=ge.contents),gt(ge)?ge=I(O,ge,H,Be,Q,Se).finally(Ne):Ne(),ge=ge instanceof Bk?ge.value:ge}catch(Rt){ge=Rt,gt(ge)?ge=M(O,ge,H,Be,Q,Se).finally(Ne):(Ye=!0,Ne())}return Ye?ot=hh(ge):gt(ge)?ot=ZW(ge):ot=am(ge),ie=!1,D(O,Q,Be),z(O,H,new Set(Be.keys()),Q),[ot,Be]}function T(O,H){let Q=H.atomValues.get(n);if(Q!=null)return Q;const ce=new Set;try{Q=a.get(Te=>(typeof Te!="string"&&Ql(!1),dh(O,H,Te).contents),{onNodeVisit:Te=>{Te.type==="branch"&&Te.nodeKey!==n&&ce.add(Te.nodeKey)}})}catch(Te){throw Oe(`Problem with cache lookup for selector "${n}": ${Te.message}`)}if(Q){var ie;H.atomValues.set(n,Q),z(O,H,ce,(ie=A(O))===null||ie===void 0?void 0:ie.executionID)}return Q}function v(O,H){const Q=T(O,H);if(Q!=null)return C(O),Q;const ce=E(O,H);if(ce!=null){var ie;return((ie=ce.loadingLoadable)===null||ie===void 0?void 0:ie.state)==="loading"&&g(O,ce.executionID),ce.loadingLoadable}const Te=cH(),[Ne,ge]=k(O,H,Te);return Ne.state==="loading"?(P(O,Te,Ne,ge,H),g(O,Te)):(C(O),St(H,Ne,ge)),Ne}function E(O,H){const Q=dk([c.has(O)?[Tt(c.get(O))]:[],Vf(vv(c,([ie])=>ie!==O),([,ie])=>ie)]);function ce(ie){for(const[Te,Ne]of ie)if(!dh(O,H,Te).is(Ne))return!0;return!1}for(const ie of Q){if(ie.stateVersions.get(H.version)||!ce(ie.depValuesDiscoveredSoFarDuringAsyncWork))return ie.stateVersions.set(H.version,!0),ie;ie.stateVersions.set(H.version,!1)}}function A(O){return c.get(O)}function P(O,H,Q,ce,ie){c.set(O,{depValuesDiscoveredSoFarDuringAsyncWork:ce,executionID:H,loadingLoadable:Q,stateVersions:new Map([[ie.version,!0]])})}function D(O,H,Q){if(Ae(O,H)){const ce=A(O);ce!=null&&(ce.depValuesDiscoveredSoFarDuringAsyncWork=Q)}}function C(O){c.delete(O)}function Ae(O,H){var Q;return H===((Q=A(O))===null||Q===void 0?void 0:Q.executionID)}function Nt(O){return Array.from(O.entries()).map(([H,Q])=>[H,Q.contents])}function St(O,H,Q){O.atomValues.set(n,H);try{a.set(Nt(Q),H)}catch(ce){throw Oe(`Problem with setting cache for selector "${n}": ${ce.message}`)}}function Le(O){if(Vl.includes(n)){const H=`Recoil selector has circular dependencies: ${Vl.slice(Vl.indexOf(n)).join(" → ")}`;return hh(Oe(H))}Vl.push(n);try{return O()}finally{Vl.pop()}}function J(O,H){const Q=H.atomValues.get(n);return Q??a.get(ce=>{var ie;return typeof ce!="string"&&Ql(!1),(ie=eH(O,H,ce))===null||ie===void 0?void 0:ie.contents})}function de(O,H){return Le(()=>v(O,H))}function Z(O){O.atomValues.delete(n)}function le(O,H){e==null&&Ql(!1);for(const ce of o){var Q;const ie=sH(ce);(Q=ie.clearCache)===null||Q===void 0||Q.call(ie,O,H)}o.clear(),Z(H),a.clear(),tS(O,e)}return s!=null?e=eS({key:n,nodeType:"selector",peek:J,get:de,set:(H,Q,ce)=>{let ie=!1;const Te=new Map;function Ne({key:Se}){if(ie)throw Oe("Recoil: Async selector sets are not currently supported.");const Be=dh(H,Q,Se);if(Be.state==="hasValue")return Be.contents;if(Be.state==="loading"){const Yt=`Getting value of asynchronous atom or selector "${Se}" in a pending state while setting selector "${n}" is not yet supported.`;throw Oe(Yt)}else throw Be.contents}function ge(Se,Be){if(ie)throw Oe("Recoil: Async selector sets are not currently supported.");const Yt=typeof Be=="function"?Be(Ne(Se)):Be;tH(H,Q,Se.key,Yt).forEach((Rt,sn)=>Te.set(sn,Rt))}function Ye(Se){ge(Se,rH)}const ot=s({set:ge,get:Ne,reset:Ye},ce);if(ot!==void 0)throw gt(ot)?Oe("Recoil: Async selector sets are not currently supported."):Oe("Recoil: selector set should be a void function.");return ie=!0,Te},init:p,invalidate:Z,clearCache:le,shouldDeleteConfigOnRelease:_,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=eS({key:n,nodeType:"selector",peek:J,get:de,init:p,invalidate:Z,clearCache:le,shouldDeleteConfigOnRelease:_,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}Wk.value=t=>new Bk(t);var Ka=Wk;const{isLoadable:hH,loadableWithError:lm,loadableWithPromise:um,loadableWithValue:qo}=Sc,{WrappedValue:Hk}=Uk,{peekNodeInfo:dH}=Ns,{DEFAULT_VALUE:Ws,DefaultValue:Hi,getConfigDeletionHandler:qk,registerNode:fH,setConfigDeletionHandler:pH}=Qn,{isRecoilValue:mH}=Wa,{getRecoilValueAsLoadable:gH,markRecoilValueModified:_H,setRecoilValue:nS,setRecoilValueLoadable:yH}=si,{retainedByOptionWithDefault:vH}=Oo,Fl=t=>t instanceof Hk?t.value:t;function wH(t){const{key:e,persistence_UNSTABLE:n}=t,r=vH(t.retainedBy_UNSTABLE);let i=0;function s(g){return um(g.then(I=>(o=qo(I),I)).catch(I=>{throw o=lm(I),I}))}let o=gt(t.default)?s(t.default):hH(t.default)?t.default.state==="loading"?s(t.default.contents):t.default:qo(Fl(t.default));o.contents;let a;const l=new Map;function c(g){return g}function h(g,I){const M=I.then(z=>{var k,T;return((T=((k=g.getState().nextTree)!==null&&k!==void 0?k:g.getState().currentTree).atomValues.get(e))===null||T===void 0?void 0:T.contents)===M&&nS(g,R,z),z}).catch(z=>{var k,T;throw((T=((k=g.getState().nextTree)!==null&&k!==void 0?k:g.getState().currentTree).atomValues.get(e))===null||T===void 0?void 0:T.contents)===M&&yH(g,R,lm(z)),z});return M}function d(g,I,M){var z;i++;const k=()=>{var A;i--,(A=l.get(g))===null||A===void 0||A.forEach(P=>P()),l.delete(g)};if(g.getState().knownAtoms.add(e),o.state==="loading"){const A=()=>{var P;((P=g.getState().nextTree)!==null&&P!==void 0?P:g.getState().currentTree).atomValues.has(e)||_H(g,R)};o.contents.finally(A)}const T=(z=t.effects)!==null&&z!==void 0?z:t.effects_UNSTABLE;if(T!=null){let A=function(Z){if(Ae&&Z.key===e){const le=C;return le instanceof Hi?p(g,I):gt(le)?um(le.then(O=>O instanceof Hi?o.toPromise():O)):qo(le)}return gH(g,Z)},P=function(Z){return A(Z).toPromise()},D=function(Z){var le;const O=dH(g,(le=g.getState().nextTree)!==null&&le!==void 0?le:g.getState().currentTree,Z.key);return Ae&&Z.key===e&&!(C instanceof Hi)?{...O,isSet:!0,loadable:A(Z)}:O},C=Ws,Ae=!0,Nt=!1,St=null;const Le=Z=>le=>{if(Ae){const O=A(R),H=O.state==="hasValue"?O.contents:Ws;C=typeof le=="function"?le(H):le,gt(C)&&(C=C.then(Q=>(St={effect:Z,value:Q},Q)))}else{if(gt(le))throw Oe("Setting atoms to async values is not implemented.");typeof le!="function"&&(St={effect:Z,value:Fl(le)}),nS(g,R,typeof le=="function"?O=>{const H=Fl(le(O));return St={effect:Z,value:H},H}:Fl(le))}},J=Z=>()=>Le(Z)(Ws),de=Z=>le=>{var O;const{release:H}=g.subscribeToTransactions(Q=>{var ce;let{currentTree:ie,previousTree:Te}=Q.getState();Te||(Te=ie);const Ne=(ce=ie.atomValues.get(e))!==null&&ce!==void 0?ce:o;if(Ne.state==="hasValue"){var ge,Ye,ot,Se;const Be=Ne.contents,Yt=(ge=Te.atomValues.get(e))!==null&&ge!==void 0?ge:o,Yn=Yt.state==="hasValue"?Yt.contents:Ws;((Ye=St)===null||Ye===void 0?void 0:Ye.effect)!==Z||((ot=St)===null||ot===void 0?void 0:ot.value)!==Be?le(Be,Yn,!ie.atomValues.has(e)):((Se=St)===null||Se===void 0?void 0:Se.effect)===Z&&(St=null)}},e);l.set(g,[...(O=l.get(g))!==null&&O!==void 0?O:[],H])};for(const Z of T)try{const le=Z({node:R,storeID:g.storeID,parentStoreID_UNSTABLE:g.parentStoreID,trigger:M,setSelf:Le(Z),resetSelf:J(Z),onSet:de(Z),getPromise:P,getLoadable:A,getInfo_UNSTABLE:D});if(le!=null){var v;l.set(g,[...(v=l.get(g))!==null&&v!==void 0?v:[],le])}}catch(le){C=le,Nt=!0}if(Ae=!1,!(C instanceof Hi)){var E;const Z=Nt?lm(C):gt(C)?um(h(g,C)):qo(Fl(C));Z.contents,I.atomValues.set(e,Z),(E=g.getState().nextTree)===null||E===void 0||E.atomValues.set(e,Z)}}return k}function p(g,I){var M,z;return(M=(z=I.atomValues.get(e))!==null&&z!==void 0?z:a)!==null&&M!==void 0?M:o}function _(g,I){if(I.atomValues.has(e))return Tt(I.atomValues.get(e));if(I.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return o;const M=I.nonvalidatedAtoms.get(e),z=n.validator(M,Ws);return a=z instanceof Hi?o:qo(z),a}else return o}function y(){a=void 0}function S(g,I,M){if(I.atomValues.has(e)){const z=Tt(I.atomValues.get(e));if(z.state==="hasValue"&&M===z.contents)return new Map}else if(!I.nonvalidatedAtoms.has(e)&&M instanceof Hi)return new Map;return a=void 0,new Map().set(e,qo(M))}function b(){return qk(e)!==void 0&&i<=0}const R=fH({key:e,nodeType:"atom",peek:p,get:_,set:S,init:d,invalidate:y,shouldDeleteConfigOnRelease:b,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return R}function kv(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return mH(n)?EH({...e,default:n}):wH({...e,default:n})}function EH(t){const e=kv({...t,default:Ws,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof Hi?r:Tt(t.persistence_UNSTABLE).validator(r,Ws)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=Ka({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof Hi?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return pH(n.key,qk(t.key)),n}kv.value=t=>new Hk(t);var Kk=kv;class TH{constructor(e){var n;De(this,"_map",void 0),De(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var SH={MapCache:TH},RH=SH.MapCache,IH=Object.freeze({__proto__:null,MapCache:RH});const{LRUCache:rS}=$k,{MapCache:CH}=IH,ph={equality:"reference",eviction:"none",maxSize:1/0};function AH({equality:t=ph.equality,eviction:e=ph.eviction,maxSize:n=ph.maxSize}=ph){const r=PH(t);return kH(e,n,r)}function PH(t){switch(t){case"reference":return e=>e;case"value":return e=>Yf(e)}throw Oe(`Unrecognized equality policy ${t}`)}function kH(t,e,n){switch(t){case"keep-all":return new CH({mapKey:n});case"lru":return new rS({mapKey:n,maxSize:Tt(e)});case"most-recent":return new rS({mapKey:n,maxSize:1})}throw Oe(`Unrecognized eviction policy ${t}`)}var Gk=AH;const{setConfigDeletionHandler:NH}=Qn;function bH(t){var e,n;const r=Gk({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...c}=t,h="default"in t?t.default:new Promise(()=>{}),d=Kk({...c,key:`${t.key}__${(s=Yf(i))!==null&&s!==void 0?s:"void"}`,default:typeof h=="function"?h(i):h,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(o=t.effects)!==null&&o!==void 0?o:t.effects_UNSTABLE});return r.set(i,d),NH(d.key,()=>{r.delete(i)}),d}}var xH=bH;const{setConfigDeletionHandler:DH}=Qn;let LH=0;function OH(t){var e,n;const r=Gk({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(p){throw Oe(`Problem with cache lookup for selector ${t.key}: ${p.message}`)}if(o!=null)return o;const a=`${t.key}__selectorFamily/${(s=Yf(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${LH++}`,l=p=>t.get(i)(p),c=t.cachePolicy_UNSTABLE,h=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let d;if(t.set!=null){const p=t.set;d=Ka({key:a,get:l,set:(y,S)=>p(i)(y,S),cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:h})}else d=Ka({key:a,get:l,cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:h});return r.set(i,d),DH(d.key,()=>{r.delete(i)}),d}}var bs=OH;const MH=bs({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function VH(t){return MH(t)}var FH=VH;const UH=bs({key:"__error",get:t=>()=>{throw Oe(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function jH(t){return UH(t)}var $H=jH;function BH(t){return t}var zH=BH;const{loadableWithError:Qk,loadableWithPromise:Yk,loadableWithValue:Xk}=Sc;function Xf(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{n[i]=t(s)}catch(o){r[i]=o}return[n,r]}function WH(t){return t!=null&&!gt(t)}function Jf(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function Xg(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function Sa(t,e,n){const r=n.map((i,s)=>i==null?Xk(e[s]):gt(i)?Yk(i):Qk(i));return Xg(t,r)}function HH(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const qH=bs({key:"__waitForNone",get:t=>({get:e})=>{const n=Jf(t),[r,i]=Xf(e,n);return Sa(t,r,i)},dangerouslyAllowMutability:!0}),KH=bs({key:"__waitForAny",get:t=>({get:e})=>{const n=Jf(t),[r,i]=Xf(e,n);return i.some(s=>!gt(s))?Sa(t,r,i):new Promise(s=>{for(const[o,a]of i.entries())gt(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(Sa(t,r,i))}).catch(l=>{i[o]=l,s(Sa(t,r,i))})})},dangerouslyAllowMutability:!0}),GH=bs({key:"__waitForAll",get:t=>({get:e})=>{const n=Jf(t),[r,i]=Xf(e,n);if(i.every(o=>o==null))return Xg(t,r);const s=i.find(WH);if(s!=null)throw s;return Promise.all(i).then(o=>Xg(t,HH(r,o)))},dangerouslyAllowMutability:!0}),QH=bs({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=Jf(t),[r,i]=Xf(e,n);return i.every(s=>!gt(s))?Sa(t,r,i):Promise.all(i.map((s,o)=>gt(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>Sa(t,r,i))},dangerouslyAllowMutability:!0}),YH=bs({key:"__noWait",get:t=>({get:e})=>{try{return Ka.value(Xk(e(t)))}catch(n){return Ka.value(gt(n)?Yk(n):Qk(n))}},dangerouslyAllowMutability:!0});var XH={waitForNone:qH,waitForAny:KH,waitForAll:GH,waitForAllSettled:QH,noWait:YH};const{RecoilLoadable:JH}=Sc,{DefaultValue:ZH}=Qn,{RecoilRoot:eq,useRecoilStoreID:tq}=Li,{isRecoilValue:nq}=Wa,{retentionZone:rq}=Uf,{freshSnapshot:iq}=Hf,{useRecoilState:sq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:oq,useRecoilStateLoadable:aq,useRecoilValue:lq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:uq,useRecoilValueLoadable:cq,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:hq,useResetRecoilState:dq,useSetRecoilState:fq}=S5,{useGotoRecoilSnapshot:pq,useRecoilSnapshot:mq,useRecoilTransactionObserver:gq}=Lk,{useRecoilCallback:_q}=Fk,{noWait:yq,waitForAll:vq,waitForAllSettled:wq,waitForAny:Eq,waitForNone:Tq}=XH;var Nv={DefaultValue:ZH,isRecoilValue:nq,RecoilLoadable:JH,RecoilEnv:al,RecoilRoot:eq,useRecoilStoreID:tq,useRecoilBridgeAcrossReactRoots_UNSTABLE:Y5,atom:Kk,selector:Ka,atomFamily:xH,selectorFamily:bs,constSelector:FH,errorSelector:$H,readOnlySelector:zH,noWait:yq,waitForNone:Tq,waitForAny:Eq,waitForAll:vq,waitForAllSettled:wq,useRecoilValue:lq,useRecoilValueLoadable:cq,useRecoilState:sq,useRecoilStateLoadable:aq,useSetRecoilState:fq,useResetRecoilState:dq,useGetRecoilValueInfo_UNSTABLE:W5,useRecoilRefresher_UNSTABLE:IW,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:hq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:uq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:oq,useRecoilCallback:_q,useRecoilTransaction_UNSTABLE:NW,useGotoRecoilSnapshot:pq,useRecoilSnapshot:mq,useRecoilTransactionObserver_UNSTABLE:gq,snapshot_UNSTABLE:iq,useRetain:Rv,retentionZone:rq},Sq=Nv.RecoilRoot,Jk=Nv.atom,Ur=Nv.useRecoilState;const Zf=Jk({key:"userAtom",default:{}}),Rq=async()=>{const[t,e]=Ur(Zf);B.useEffect(()=>{rn.onAuthStateChanged(async n=>{if(n){const r=jn($n,"Users",n.uid),i=await vs(r);i.exists()&&e(i.data())}})},[])},Mo=Jk({key:"TasksAtom",default:[]}),Iq=t=>{const e=Cs(),[n,r]=Ur(Mo);Rq();const[i,s]=Ur(Zf),o=async()=>{await rn.signOut(),r([]),s({}),e("/REACT_VITE_TODOAPP/home")},[a,l]=B.useState();return B.useEffect(()=>{rn.onAuthStateChanged(c=>{l(c)})},[]),U.jsx(U.Fragment,{children:U.jsxs("div",{className:"header container m-auto md:p-5 lg:p-5 flex justify-between items-center py-2 px-2 md:px-10 md:py-5",children:[U.jsx(xa,{to:"/REACT_VITE_TODOAPP/",children:U.jsx("h2",{className:`${t.activeTextAnimation?"animateText":""} text-white`,style:{textShadow:t.activeTextAnimation?"":"1px 1px 3px white"},children:"TODO"})}),U.jsxs("div",{className:"flex items-center gap-2",children:[a?U.jsxs("button",{className:"BtnLogOut",onClick:o,children:[U.jsx("div",{className:"sign",children:U.jsx("svg",{viewBox:"0 0 512 512",children:U.jsx("path",{d:"M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"})})}),U.jsx("div",{className:"text",children:"Logout"})]}):U.jsx(xa,{to:"/REACT_VITE_TODOAPP/home/login",className:"btn",style:{fontSize:"14px",padding:"3px",height:"fit-content"},children:"Login"}),U.jsx("a",{href:"https://github.com/Elsayed-Rady-Elsayed",children:U.jsx("i",{className:"fa-brands fa-github text-gray-600 hover:text-white transition-all"})}),U.jsx("a",{href:"https://www.linkedin.com/in/elsayed-rady-elsayed-73b541288/",children:U.jsx("i",{className:"fa-brands fa-linkedin text-gray-600 hover:text-[#378fe9] transition-all"})})]})]})})},Cq=t=>U.jsxs("div",{className:"onBoarding absolute left-1/2 top-1/2 p-5 text-center",style:{transform:"translate(-50%,-50%)"},children:[U.jsx("h1",{className:`text-white mb-4 py-2 ${t.activeTextAnimation?"animateText-lg":""} text-2xl md:text-4xl lg:text-4xl capitalize`,style:{},children:"start doing your tasks"}),U.jsx(xB,{title:"get started"})]}),Qr=t=>{const e=B.useRef(0),[n,r]=B.useState(""),i=s=>{e.current.style.borderColor=s};return t.setClicked&&n==""?i("red"):t.setClicked&&n.length>0&&i("#596A95"),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:t.name,children:t.placeholder}),U.jsx("input",{ref:e,style:{boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},id:t.name,placeholder:t.placeholder,className:"bg-[#222630] w-[100%] px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]",name:t.name,autoComplete:"off",type:t.type,value:n,onChange:s=>{s.target.value===""&&i("red"),t.name=="title"&&s.target.value.trim()===""&&i("red"),r(s.target.value),s.target.value.trim().length>0&&t.value(s)}})]})},Zk=()=>U.jsx("div",{className:"container m-auto bg-[#121212]",children:U.jsx(iL,{})}),Aq=t=>{const e=B.useRef(0),[n,r]=B.useState(""),i=s=>{e.current.style.borderColor=s};return t.setClicked&&n==""?i("red"):t.setClicked&&n.length>0&&i("#596A95"),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:t.name,children:t.placeholder}),U.jsx("textarea",{ref:e,value:n,rows:"5",name:t.name,autoComplete:"off",placeholder:t.placeholder,id:t.name,style:{resize:"none",boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},onChange:s=>{s.target.value.trim()===""?i("red"):i("#596A95"),r(s.target.value),t.value(s)},className:"bg-[#222630] w-full px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]"})]})},eN=t=>U.jsxs(xa,{to:t.path,children:[U.jsx("i",{className:"fa-solid fa-arrow-left text-white"}),U.jsx("span",{className:"text-white ms-2",children:"back"})]}),ep=async()=>{const[t,e]=Ur(Mo);B.useEffect(()=>{rn.onAuthStateChanged(async n=>{if(n){const r=jn($n,"Users",n.uid),i=await vs(r);i.exists()&&e(s=>[...i.data().taskData])}})},[])},Pq=()=>{ep();const t=Cs(),[e,n]=B.useState({title:"",date:"",start:"",end:"",description:"",done:!1,pending:!1}),[r,i]=B.useState(!1),[s,o]=Ur(Mo),[a,l]=B.useState(!1),c=y=>{const{name:S,value:b}=y.target;n(R=>({...R,[S]:b}))},[h,d]=B.useState();B.useEffect(()=>{rn.onAuthStateChanged(y=>{d(y)})},[]);const p=y=>{y.preventDefault(),rn.onAuthStateChanged(async S=>{S&&e.title.length>0&&e.date.length>0&&e.start.length>0&&e.end.length>0&&e.description.length>0?(await Yu(jn($n,"Users",S.uid),{taskData:[...s,e]}),t("/REACT_VITE_TODOAPP/home")):_()})},_=()=>{e.title.length>0&&e.date.length>0&&e.start.length>0&&e.end.length>0&&e.description.length>0?(l(!0),o(y=>[...y,e]),t("/REACT_VITE_TODOAPP/home")):l(!1)};return U.jsx("form",{onSubmit:p,className:"w-full absolute left-1/2 top-1/2 flex justify-center p-2 md:p-0",style:{transform:"translate(-50%,-50%)"},children:U.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[U.jsx(eN,{path:"/home"}),U.jsx(Qr,{setClicked:r,name:"title",placeholder:"Title",type:"text",value:c}),U.jsx(Qr,{setClicked:r,value:c,name:"date",placeholder:"date",type:"date"}),U.jsxs("div",{className:"time grid grid-cols-2 gap-2 w-full",children:[U.jsx(Qr,{setClicked:r,value:c,name:"start",placeholder:"start time",type:"time"}),U.jsx(Qr,{setClicked:r,value:c,name:"end",placeholder:"end time",type:"time"})," "]}),U.jsx(Aq,{setClicked:r,value:c,name:"description",placeholder:"description"}),U.jsx("button",{onClick:()=>{i(!0)},className:"btn w-full mt-2",children:"add task"})]})})},kq=t=>{const e=Cs(),n=()=>{window.location.reload()},[r,i]=Ur(Mo),s=()=>{e(`/REACT_VITE_TODOAPP/home/eidtTask/${t.id}`)},o=l=>{rn.onAuthStateChanged(async c=>{if(c){let h=[];const d=jn($n,"Users",c.uid),p=await vs(d);p.exists()&&(h=[...p.data().taskData],h[t.id].done=!l),await Yu(jn($n,"Users",c.uid),{taskData:h}),e("/REACT_VITE_TODOAPP/home"),n()}else i(h=>h.map((d,p)=>p===t.id?{...d,done:!d.done}:d))})},a=()=>{rn.onAuthStateChanged(async l=>{if(l){let c=[];const h=jn($n,"Users",l.uid),d=await vs(h);d.exists()&&(c=[...d.data().taskData],c=c.filter((p,_)=>_!==t.id)),await Yu(jn($n,"Users",l.uid),{taskData:c}),e("/REACT_VITE_TODOAPP/home"),n()}else{let c=[];c=[...r],c=c.filter((h,d)=>d!==t.id),i(c)}})};return U.jsxs("div",{onClick:s,className:"relative overflow-hidden cursor-pointer container m-auto bg-[#222630] w-[100%] outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid hover:border-[#596A95] border-[#2B3040]",children:[U.jsxs("div",{className:"icons absolute end-2 flex z-30",children:[t.iSdone?U.jsx("i",{onClick:l=>{l.stopPropagation(),o(t.iSdone)},className:"fa-solid fa-circle-check text-green-400 py-3 px-2"}):U.jsx("i",{onClick:l=>{l.stopPropagation(),o(t.iSdone)},className:"text-green-400 fa-regular fa-circle-check py-3 px-2"}),U.jsx("i",{onClick:l=>{l.stopPropagation(),a()},className:"fa-regular fa-trash-can text-red-500 py-3 px-2"}),U.jsx("i",{onClick:l=>{l.stopPropagation(),e(`/REACT_VITE_TODOAPP/home/timer/${t.id}`)},className:"fa-solid fa-stopwatch-20 text-yellow-500 py-3 px-2"})]}),t.iSdone?U.jsx("div",{className:"absolute w-full h-full bg-white/20 text-green-500 text-2xl font-bold flex items-center justify-center",children:"Done Task"}):"",U.jsx("h2",{className:"cursor-pointer capitalize text-2xl m-2",children:t.title}),U.jsx("p",{className:"text-gray-500 text-[12px] m-2",children:t.date}),U.jsxs("div",{className:"flex gap-5 m-2",children:[U.jsx("div",{className:"capitalize text-white text-[12px] ",children:U.jsxs("p",{children:["start : ",t.start]})}),U.jsx("div",{className:"capitalize text-white text-[12px]",children:U.jsxs("p",{children:["end : ",t.end]})})]}),U.jsx("p",{className:"text-[10px] mt-2 text-gray-400 truncate h-7 m-2",children:t.desciption})]})},Nq=t=>{const e=B.useRef();return U.jsxs("div",{className:"alert bg-yellow-500 text-white flex items-center p-1 text-sm w-full",id:"warningItem",ref:e,children:[U.jsx("i",{className:"fa-solid fa-circle-exclamation me-2"}),U.jsx("span",{className:"capitalize text-[8px] md:text-[12px]",children:"you have't logined you can't save your data"}),U.jsx("span",{onClick:()=>{e.current.style.display="none"},className:"cursor-pointer ms-1 inline-block text-[8px] md:text-[12px] underline font-bold",children:"i know"})]})},bq=()=>{ep();const[t,e]=Ur(Mo),[n,r]=B.useState(),i=t.map((s,o)=>U.jsx(kq,{iSdone:s.done,id:o,title:s.title,date:s.date,start:s.start,end:s.end,desciption:s.description},o));return B.useEffect(()=>{rn.onAuthStateChanged(s=>{r(s)})},[]),U.jsxs(U.Fragment,{children:[n?"":U.jsx(Nq,{}),U.jsxs("div",{className:" grid grid-cols-1 lg:grid-cols-4 md:grid-cols-2 m-5 md:m-3 gap-3 mt-3",children:[U.jsx(xa,{to:"/REACT_VITE_TODOAPP/home/addTask",className:"fixed bottom-10 right-10 cursor-pointer bg-white h-10 w-10 flex items-center justify-center rounded-[50%] hover:rotate-90 transition-all duration-500",children:U.jsx("i",{className:"fa-solid fa-plus"})}),i.length>0&&n!=null?i:i.length==0&&(n==null||n!=null)?U.jsx("div",{className:"w-full text-gray-400 text-sm text-center capitalize absolute top-1/2 left-1/2",style:{transform:"translate(-50%,-50%)"},children:"no tasks yet"}):i.length>0&&n==null?i:U.jsxs("div",{className:"loader",children:[U.jsx("div",{className:"square",id:"sq1"}),U.jsx("div",{className:"square",id:"sq2"}),U.jsx("div",{className:"square",id:"sq3"}),U.jsx("div",{className:"square",id:"sq4"}),U.jsx("div",{className:"square",id:"sq5"}),U.jsx("div",{className:"square",id:"sq6"}),U.jsx("div",{className:"square",id:"sq7"}),U.jsx("div",{className:"square",id:"sq8"}),U.jsx("div",{className:"square",id:"sq9"})]})]})]})},tN=t=>{const e=B.useRef();return U.jsx("div",{className:`alert ${t.color} text-white flex items-center p-1 text-sm w-full`,id:"warningItem",ref:e,children:t.title})},xq=()=>{const t=Cs(),[e,n]=B.useState(!1),[r,i]=B.useState(!1),[s,o]=Ur(Zf),[a,l]=B.useState({color:"",title:""}),[c,h]=B.useState({email:"",password:""}),d=()=>{c.email.length>0&&c.password.length>6?n(!0):n(!1)},p=async y=>{if(y.preventDefault(),e&&r)try{await TV(rn,c.email,c.password);const S=rn.currentUser;l({color:"bg-green-500",title:"logined succesfully"}),setTimeout(()=>{t("/REACT_VITE_TODOAPP/home")},500)}catch(S){l({color:"bg-red-500",title:"email or password is wrong"}),console.log(S)}};B.useEffect(()=>{rn.onAuthStateChanged(async y=>{if(y){const S=jn($n,"Users",y.uid),b=await vs(S);b.exists()&&o(b.data())}})},[]);const _=y=>{const{name:S,value:b}=y.target;h(R=>({...R,[S]:b}))};return U.jsxs(U.Fragment,{children:[e&&r?U.jsx(tN,{title:a.title,color:a.color}):"",U.jsx("div",{className:"w-[90%] md:w-[50%] lg:w-[30%] h-fit absolute top-1/2 left-1/2 p-2 bg-[#222630] px-3 py-2 outline-none text-white rounded-lg border-2 border-solid border-[#2B3040]",style:{transform:"translate(-50%,-50%)"},children:U.jsxs("form",{onSubmit:p,action:"",children:[U.jsx("h2",{className:"font-semibold text-xl text-center mb-4",children:"Login"}),U.jsx(Qr,{setClicked:r,name:"email",placeholder:"email",type:"email",value:_}),U.jsx(Qr,{setClicked:r,name:"password",placeholder:"password",type:"password",value:_}),U.jsx("button",{onClick:()=>{i(!0),d()},className:"btn w-full mt-5",children:"Login"}),U.jsxs("p",{className:"text-center my-2 text-sm",children:["don't have an account?",U.jsxs(xa,{to:"/REACT_VITE_TODOAPP/home/register",className:"underline cursor-pointer font-bold",children:[" ","Register"]})]})]})})]})},Dq=()=>{const t=Cs(),[e,n]=B.useState(!1),[r,i]=B.useState(!1),[s,o]=Ur(Zf),[a,l]=B.useState({color:"",title:""}),[c,h]=B.useState({email:"",password:"",firstName:"",lastName:""}),d=()=>{c.email.length>0&&c.password.length>6&&c.firstName.length>0&&c.lastName.length>0?n(!0):n(!1)},p=async y=>{if(y.preventDefault(),e)try{await EV(rn,c.email,c.password);const S=rn.currentUser;S&&await zj(jn($n,"Users",S.uid),{email:S.email,firstName:c.firstName,lastName:c.lastName}),l({color:"bg-green-500",title:"account created successfully"}),setTimeout(()=>{t("/REACT_VITE_TODOAPP/home")},500)}catch(S){l({color:"bg-red-500",title:"couldnot create your account"}),console.log(S)}};B.useEffect(()=>{rn.onAuthStateChanged(async y=>{if(y){const S=jn($n,"Users",y.uid),b=await vs(S);b.exists()&&o(b.data())}})},[]);const _=y=>{const{name:S,value:b}=y.target;h(R=>({...R,[S]:b}))};return U.jsxs(U.Fragment,{children:[e&&r?U.jsx(tN,{title:a.title,color:a.color}):"",U.jsx("div",{className:"w-[90%] md:w-[50%] lg:w-[30%] h-fit absolute top-1/2 left-1/2 p-2 bg-[#222630] px-3 py-2 outline-none text-white rounded-lg border-2 border-solid border-[#2B3040]",style:{transform:"translate(-50%,-50%)"},children:U.jsxs("form",{onSubmit:p,action:"",children:[U.jsx("h2",{className:"font-semibold text-xl text-center mb-4",children:"Register"}),U.jsx(Qr,{setClicked:r,name:"email",placeholder:"email",type:"email",value:_}),U.jsx(Qr,{setClicked:r,name:"password",placeholder:"password",type:"password",value:_}),U.jsx("p",{className:"text-[10px] mt-1 text-gray-400",children:"password must be more than 6 characters"}),U.jsx(Qr,{setClicked:r,name:"firstName",placeholder:"first Name",type:"text",value:_}),U.jsx(Qr,{setClicked:r,name:"lastName",placeholder:"last name",type:"text",value:_}),U.jsx("button",{onClick:()=>{i(!0),d()},className:"btn w-full mt-5",children:"Register"})]})})]})},Lq=()=>{ep();const[t,e]=Ur(Mo),n=window.location.pathname.split("/").slice(-1).join(),r=Cs(),[i,s]=B.useState({title:"",date:"",start:"",end:"",description:"",done:!1,pending:!1}),[o,a]=B.useState(!1);B.useState(!1),B.useEffect(()=>{t[n]!=null&&s(t[n])},[]);const l=g=>{const{name:I,value:M}=g.target;s(z=>({...z,[I]:M}))},[c,h]=B.useState();B.useEffect(()=>{rn.onAuthStateChanged(g=>{h(g)})},[]),B.useState([]);const d=g=>{g.preventDefault(),rn.onAuthStateChanged(async I=>{if(I&&i.title.length>0&&i.date.length>0&&i.start.length>0&&i.end.length>0&&i.description.length>0){let M=[];const z=jn($n,"Users",I.uid),k=await vs(z);k.exists()&&(M=[...k.data().taskData],M[n]=i),await Yu(jn($n,"Users",I.uid),{taskData:M}),r("/REACT_VITE_TODOAPP/home")}else{let M=[];M=[t],M[n]=i,e(M),r("/REACT_VITE_TODOAPP/home")}})},p=B.useRef(0),_=B.useRef(0),y=B.useRef(0),S=B.useRef(0),b=B.useRef(0);B.useState("");const R=(g,I)=>{I.current.style.borderColor=g};return U.jsx("form",{onSubmit:d,className:"w-full absolute left-1/2 top-1/2 flex justify-center p-2 md:p-0",style:{transform:"translate(-50%,-50%)"},children:U.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[U.jsx(eN,{path:"/REACT_VITE_TODOAPP/home"}),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:"Title",children:"Title"}),U.jsx("input",{ref:p,style:{boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},id:"title",placeholder:"Title",className:"bg-[#222630] w-[100%] px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]",name:"title",autoComplete:"off",type:"text",value:i.title,onChange:g=>{g.target.value===""?R("red",p):R("#596A95",p),g.target.name=="title"&&g.target.value.trim()===""&&R("red",p),l(g)}})]}),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:"date",children:"date"}),U.jsx("input",{ref:_,style:{boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},id:"date",placeholder:"date",className:"bg-[#222630] w-[100%] px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]",name:"date",autoComplete:"off",type:"date",value:i.date,onChange:g=>{g.target.value===""?R("red",_):R("#596A95",_),g.target.name=="title"&&g.target.value.trim()===""&&R("red",_),l(g)}})]}),U.jsxs("div",{className:"time grid grid-cols-2 gap-2 w-full",children:[U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:"start",children:"start time"}),U.jsx("input",{ref:y,style:{boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},id:"start",placeholder:"start time",className:"bg-[#222630] w-[100%] px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]",name:"start",autoComplete:"off",type:"time",value:i.start,onChange:g=>{g.target.value===""?R("red",y):R("#596A95",y),g.target.name=="title"&&g.target.value.trim()===""&&R("red",y),l(g)}})]}),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:"end",children:"end time"}),U.jsx("input",{ref:S,style:{boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},id:"end",placeholder:"end time",className:"bg-[#222630] w-[100%] px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]",name:"end",autoComplete:"off",type:"time",value:i.end,onChange:g=>{g.target.value===""?R("red",S):R("#596A95",S),g.target.name=="title"&&g.target.value.trim()===""&&R("red",S),l(g)}})]})]}),U.jsxs("div",{className:"flex flex-col text-white/80 capitalize font-light",children:[U.jsx("label",{className:"mb-2",htmlFor:"description",children:"description"}),U.jsx("textarea",{ref:b,value:i.description,rows:"5",name:"description",autoComplete:"off",placeholder:"description",id:"description",style:{resize:"none",boxShadow:"inset 2px 5px 10px rgba(0, 0, 0, 0.3)"},onChange:g=>{g.target.value===""?R("red",b):R("#596A95",b),g.target.name=="title"&&g.target.value.trim()===""&&R("red",b),l(g)},className:"bg-[#222630] w-full px-3 py-2 outline-none text-white rounded-lg border-2 transition-colors duration-100 border-solid focus:border-[#596A95] border-[#2B3040]"})]}),U.jsx("button",{onClick:()=>{a(!0)},className:"btn w-full mt-2",children:"edit task"})]})})},Oq=t=>{B.useState("");const e=Cs(),n=Number(window.location.pathname.split("/").splice(-1).join()),[r,i]=Ur(Mo),s=()=>{window.location.reload()},[o,a]=B.useState(0);B.useEffect(()=>{const h=setInterval(()=>{a(d=>d+1)},1e3);return()=>clearInterval(h)},[]);const l=h=>{const d=Math.floor(h/3600),p=Math.floor(h%3600/60),_=h%60;return`${String(d).padStart(2,"0")}:${String(p).padStart(2,"0")}:${String(_).padStart(2,"0")}`},c=()=>{rn.onAuthStateChanged(async h=>{if(h){let d=[];const p=jn($n,"Users",h.uid),_=await vs(p);_.exists()&&(d=[..._.data().taskData],d[n].done=!0),await Yu(jn($n,"Users",h.uid),{taskData:d}),e("/REACT_VITE_TODOAPP/home"),s()}else i(d=>d.map((p,_)=>_===n?{...p,done:!p.done}:p)),e("/REACT_VITE_TODOAPP/home")})};return U.jsxs("div",{className:"text-center flex flex-col items-center",children:[U.jsx("div",{className:"timer w-56 border p-5 text-2xl mt-6 border-[#596A95] rounded-lg text-white",children:l(o)}),U.jsxs("div",{className:"btns flex flex-col md:flex-row w-full gap-2 mt-5",children:[U.jsx("button",{className:"btn bg-red-500 w-full",onClick:()=>{c()},children:"End Task"}),U.jsx("button",{className:"btn bg-yellow-500 w-full",onClick:()=>{e("/REACT_VITE_TODOAPP/home"),s()},children:"Pend Task"})]})]})};function Mq(){ep();const[t,e]=B.useState(U.jsxs("div",{className:"loader",children:[U.jsx("div",{className:"square",id:"sq1"}),U.jsx("div",{className:"square",id:"sq2"}),U.jsx("div",{className:"square",id:"sq3"}),U.jsx("div",{className:"square",id:"sq4"}),U.jsx("div",{className:"square",id:"sq5"}),U.jsx("div",{className:"square",id:"sq6"}),U.jsx("div",{className:"square",id:"sq7"}),U.jsx("div",{className:"square",id:"sq8"}),U.jsx("div",{className:"square",id:"sq9"})]}));return setTimeout(()=>{e(U.jsxs(U.Fragment,{children:[U.jsx(Iq,{activeTextAnimation:!0}),U.jsx(Zk,{})]}))},2e3),U.jsx("div",{className:"bg-[#121212] h-svh",children:t})}const Vq=dL([{path:"/REACT_VITE_TODOAPP/",element:U.jsx(Mq,{}),children:[{path:"/REACT_VITE_TODOAPP/",element:U.jsx(Cq,{})},{path:"/REACT_VITE_TODOAPP/home",element:U.jsx(Zk,{}),children:[{path:"/REACT_VITE_TODOAPP/home/login",element:U.jsx(xq,{})},{path:"/REACT_VITE_TODOAPP/home/register",element:U.jsx(Dq,{})},{path:"/REACT_VITE_TODOAPP/home",element:U.jsx(bq,{})},{path:"/REACT_VITE_TODOAPP/home/timer/:id",element:U.jsx(Oq,{})},{path:"/REACT_VITE_TODOAPP/home/addTask",element:U.jsx(Pq,{})},{path:"/REACT_VITE_TODOAPP/home/eidtTask/:id",element:U.jsx(Lq,{})}]}]}]);cm.createRoot(document.getElementById("root")).render(U.jsx(ut.StrictMode,{children:U.jsx(Sq,{children:U.jsx(EL,{router:Vq})})}));
